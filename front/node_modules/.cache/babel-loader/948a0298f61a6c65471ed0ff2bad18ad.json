{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scroll_view/ui.scrollable.simulated.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getHeight, getWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { titleize } from \"../../core/utils/inflector\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nimport { each, map } from \"../../core/utils/iterator\";\nimport { isDefined } from \"../../core/utils/type\";\nimport { getBoundingRect } from \"../../core/utils/position\";\nimport { resetPosition, move, locate } from \"../../animation/translator\";\nimport Class from \"../../core/class\";\nimport Animator from \"./animator\";\nimport { isDxMouseWheelEvent, addNamespace as addEventNamespace, normalizeKeyName, isCommandKeyPressed } from \"../../events/utils/index\";\nimport { deferUpdate, deferUpdater, deferRender, deferRenderer, noop } from \"../../core/utils/common\";\nimport Scrollbar from \"./ui.scrollbar\";\nimport { when, Deferred } from \"../../core/utils/deferred\";\nvar SCROLLABLE_SIMULATED = \"dxSimulatedScrollable\";\nvar SCROLLABLE_STRATEGY = \"dxScrollableStrategy\";\nvar SCROLLABLE_SIMULATED_CURSOR = SCROLLABLE_SIMULATED + \"Cursor\";\nvar SCROLLABLE_SIMULATED_KEYBOARD = SCROLLABLE_SIMULATED + \"Keyboard\";\nvar SCROLLABLE_SIMULATED_CLASS = \"dx-scrollable-simulated\";\nvar SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE = \"dx-scrollable-scrollbars-alwaysvisible\";\nvar SCROLLABLE_SCROLLBAR_CLASS = \"dx-scrollable-scrollbar\";\nvar VERTICAL = \"vertical\";\nvar HORIZONTAL = \"horizontal\";\nvar ACCELERATION = .92;\nvar OUT_BOUNDS_ACCELERATION = .5;\nvar MIN_VELOCITY_LIMIT = 1;\nvar FRAME_DURATION = Math.round(1e3 / 60);\nvar SCROLL_LINE_HEIGHT = 40;\nvar VALIDATE_WHEEL_TIMEOUT = 500;\nvar BOUNCE_MIN_VELOCITY_LIMIT = MIN_VELOCITY_LIMIT / 5;\nvar BOUNCE_DURATION = 400;\nvar BOUNCE_FRAMES = BOUNCE_DURATION / FRAME_DURATION;\nvar BOUNCE_ACCELERATION_SUM = (1 - Math.pow(ACCELERATION, BOUNCE_FRAMES)) / (1 - ACCELERATION);\nvar KEY_CODES = {\n  PAGE_UP: \"pageUp\",\n  PAGE_DOWN: \"pageDown\",\n  END: \"end\",\n  HOME: \"home\",\n  LEFT: \"leftArrow\",\n  UP: \"upArrow\",\n  RIGHT: \"rightArrow\",\n  DOWN: \"downArrow\",\n  TAB: \"tab\"\n};\nvar InertiaAnimator = Animator.inherit({\n  ctor: function (scroller) {\n    this.callBase();\n    this.scroller = scroller;\n  },\n  VELOCITY_LIMIT: MIN_VELOCITY_LIMIT,\n  _isFinished: function () {\n    return Math.abs(this.scroller._velocity) <= this.VELOCITY_LIMIT;\n  },\n  _step: function () {\n    this.scroller._scrollStep(this.scroller._velocity);\n\n    this.scroller._velocity *= this._acceleration();\n  },\n  _acceleration: function () {\n    return this.scroller._inBounds() ? ACCELERATION : OUT_BOUNDS_ACCELERATION;\n  },\n  _complete: function () {\n    this.scroller._scrollComplete();\n  }\n});\nvar BounceAnimator = InertiaAnimator.inherit({\n  VELOCITY_LIMIT: BOUNCE_MIN_VELOCITY_LIMIT,\n  _isFinished: function () {\n    return this.scroller._crossBoundOnNextStep() || this.callBase();\n  },\n  _acceleration: function () {\n    return ACCELERATION;\n  },\n  _complete: function () {\n    this.scroller._move(this.scroller._bounceLocation);\n\n    this.callBase();\n  }\n});\nexport var Scroller = Class.inherit({\n  ctor: function (options) {\n    this._initOptions(options);\n\n    this._initAnimators();\n\n    this._initScrollbar();\n  },\n  _initOptions: function (options) {\n    this._location = 0;\n    this._topReached = false;\n    this._bottomReached = false;\n    this._axis = options.direction === HORIZONTAL ? \"x\" : \"y\";\n    this._prop = options.direction === HORIZONTAL ? \"left\" : \"top\";\n    this._dimension = options.direction === HORIZONTAL ? \"width\" : \"height\";\n    this._scrollProp = options.direction === HORIZONTAL ? \"scrollLeft\" : \"scrollTop\";\n    each(options, (optionName, optionValue) => {\n      this[\"_\" + optionName] = optionValue;\n    });\n  },\n  _initAnimators: function () {\n    this._inertiaAnimator = new InertiaAnimator(this);\n    this._bounceAnimator = new BounceAnimator(this);\n  },\n  _initScrollbar: function () {\n    this._scrollbar = new Scrollbar($(\"<div>\").appendTo(this._$container), {\n      direction: this._direction,\n      visible: this._scrollByThumb,\n      visibilityMode: this._visibilityModeNormalize(this._scrollbarVisible),\n      expandable: this._scrollByThumb\n    });\n    this._$scrollbar = this._scrollbar.$element();\n  },\n  _visibilityModeNormalize: function (mode) {\n    return true === mode ? \"onScroll\" : false === mode ? \"never\" : mode;\n  },\n  _scrollStep: function (delta) {\n    var prevLocation = this._location;\n    this._location += delta;\n\n    this._suppressBounce();\n\n    this._move();\n\n    if (Math.abs(prevLocation - this._location) < 1) {\n      return;\n    }\n\n    eventsEngine.triggerHandler(this._$container, {\n      type: \"scroll\"\n    });\n  },\n  _suppressBounce: function () {\n    if (this._bounceEnabled || this._inBounds(this._location)) {\n      return;\n    }\n\n    this._velocity = 0;\n    this._location = this._boundLocation();\n  },\n  _boundLocation: function (location) {\n    location = void 0 !== location ? location : this._location;\n    return Math.max(Math.min(location, this._maxOffset), this._minOffset);\n  },\n  _move: function (location) {\n    this._location = void 0 !== location ? location * this._getScaleRatio() : this._location;\n\n    this._moveContent();\n\n    this._moveScrollbar();\n  },\n  _moveContent: function () {\n    var location = this._location;\n\n    this._$container[this._scrollProp](-location / this._getScaleRatio());\n\n    this._moveContentByTranslator(location);\n  },\n  _getScaleRatio: function () {\n    if (hasWindow() && !this._scaleRatio) {\n      var element = this._$element.get(0);\n\n      var realDimension = this._getRealDimension(element, this._dimension);\n\n      var baseDimension = this._getBaseDimension(element, this._dimension);\n\n      this._scaleRatio = Math.round(realDimension / baseDimension * 100) / 100;\n    }\n\n    return this._scaleRatio || 1;\n  },\n  _getRealDimension: function (element, dimension) {\n    return Math.round(getBoundingRect(element)[dimension]);\n  },\n  _getBaseDimension: function (element, dimension) {\n    var dimensionName = \"offset\" + titleize(dimension);\n    return element[dimensionName];\n  },\n  _moveContentByTranslator: function (location) {\n    var translateOffset;\n    var minOffset = -this._maxScrollPropValue;\n\n    if (location > 0) {\n      translateOffset = location;\n    } else if (location <= minOffset) {\n      translateOffset = location - minOffset;\n    } else {\n      translateOffset = location % 1;\n    }\n\n    if (this._translateOffset === translateOffset) {\n      return;\n    }\n\n    var targetLocation = {};\n    targetLocation[this._prop] = translateOffset;\n    this._translateOffset = translateOffset;\n\n    if (0 === translateOffset) {\n      resetPosition(this._$content);\n      return;\n    }\n\n    move(this._$content, targetLocation);\n  },\n  _moveScrollbar: function () {\n    this._scrollbar.moveTo(this._location);\n  },\n  _scrollComplete: function () {\n    if (this._inBounds()) {\n      this._hideScrollbar();\n\n      if (this._completeDeferred) {\n        this._completeDeferred.resolve();\n      }\n    }\n\n    this._scrollToBounds();\n  },\n  _scrollToBounds: function () {\n    if (this._inBounds()) {\n      return;\n    }\n\n    this._bounceAction();\n\n    this._setupBounce();\n\n    this._bounceAnimator.start();\n  },\n  _setupBounce: function () {\n    var boundLocation = this._bounceLocation = this._boundLocation();\n\n    var bounceDistance = boundLocation - this._location;\n    this._velocity = bounceDistance / BOUNCE_ACCELERATION_SUM;\n  },\n  _inBounds: function (location) {\n    location = void 0 !== location ? location : this._location;\n    return this._boundLocation(location) === location;\n  },\n  _crossBoundOnNextStep: function () {\n    var location = this._location;\n    var nextLocation = location + this._velocity;\n    return location < this._minOffset && nextLocation >= this._minOffset || location > this._maxOffset && nextLocation <= this._maxOffset;\n  },\n  _initHandler: function (e) {\n    this._stopScrolling();\n\n    this._prepareThumbScrolling(e);\n  },\n  _stopScrolling: deferRenderer(function () {\n    this._hideScrollbar();\n\n    this._inertiaAnimator.stop();\n\n    this._bounceAnimator.stop();\n  }),\n  _prepareThumbScrolling: function (e) {\n    if (isDxMouseWheelEvent(e.originalEvent)) {\n      return;\n    }\n\n    var $target = $(e.originalEvent.target);\n\n    var scrollbarClicked = this._isScrollbar($target);\n\n    if (scrollbarClicked) {\n      this._moveToMouseLocation(e);\n    }\n\n    this._thumbScrolling = scrollbarClicked || this._isThumb($target);\n    this._crossThumbScrolling = !this._thumbScrolling && this._isAnyThumbScrolling($target);\n\n    if (this._thumbScrolling) {\n      this._scrollbar.feedbackOn();\n    }\n  },\n  _isThumbScrollingHandler: function ($target) {\n    return this._isThumb($target);\n  },\n  _moveToMouseLocation: function (e) {\n    var mouseLocation = e[\"page\" + this._axis.toUpperCase()] - this._$element.offset()[this._prop];\n\n    var location = this._location + mouseLocation / this._containerToContentRatio() - getHeight(this._$container) / 2;\n\n    this._scrollStep(-Math.round(location));\n  },\n  _startHandler: function () {\n    this._showScrollbar();\n  },\n  _moveHandler: function (delta) {\n    if (this._crossThumbScrolling) {\n      return;\n    }\n\n    if (this._thumbScrolling) {\n      delta[this._axis] = -Math.round(delta[this._axis] / this._containerToContentRatio());\n    }\n\n    this._scrollBy(delta);\n  },\n  _scrollBy: function (delta) {\n    delta = delta[this._axis];\n\n    if (!this._inBounds()) {\n      delta *= OUT_BOUNDS_ACCELERATION;\n    }\n\n    this._scrollStep(delta);\n  },\n  _scrollByHandler: function (delta) {\n    this._scrollBy(delta);\n\n    this._scrollComplete();\n  },\n  _containerToContentRatio: function () {\n    return this._scrollbar.containerToContentRatio();\n  },\n  _endHandler: function (velocity) {\n    this._completeDeferred = new Deferred();\n    this._velocity = velocity[this._axis];\n\n    this._inertiaHandler();\n\n    this._resetThumbScrolling();\n\n    return this._completeDeferred.promise();\n  },\n  _inertiaHandler: function () {\n    this._suppressInertia();\n\n    this._inertiaAnimator.start();\n  },\n  _suppressInertia: function () {\n    if (!this._inertiaEnabled || this._thumbScrolling) {\n      this._velocity = 0;\n    }\n  },\n  _resetThumbScrolling: function () {\n    this._thumbScrolling = false;\n    this._crossThumbScrolling = false;\n  },\n  _stopHandler: function () {\n    if (this._thumbScrolling) {\n      this._scrollComplete();\n    }\n\n    this._resetThumbScrolling();\n\n    this._scrollToBounds();\n  },\n  _disposeHandler: function () {\n    this._stopScrolling();\n\n    this._$scrollbar.remove();\n  },\n  _updateHandler: function () {\n    this._update();\n\n    this._moveToBounds();\n  },\n  _update: function () {\n    this._stopScrolling();\n\n    return deferUpdate(() => {\n      this._resetScaleRatio();\n\n      this._updateLocation();\n\n      this._updateBounds();\n\n      this._updateScrollbar();\n\n      deferRender(() => {\n        this._moveScrollbar();\n\n        this._scrollbar.update();\n      });\n    });\n  },\n  _resetScaleRatio: function () {\n    this._scaleRatio = null;\n  },\n  _updateLocation: function () {\n    this._location = (locate(this._$content)[this._prop] - this._$container[this._scrollProp]()) * this._getScaleRatio();\n  },\n  _updateBounds: function () {\n    this._maxOffset = this._getMaxOffset();\n    this._minOffset = this._getMinOffset();\n  },\n  _getMaxOffset: function () {\n    return 0;\n  },\n  _getMinOffset: function () {\n    this._maxScrollPropValue = Math.max(this._contentSize() - this._containerSize(), 0);\n    return -this._maxScrollPropValue;\n  },\n  _updateScrollbar: deferUpdater(function () {\n    var containerSize = this._containerSize();\n\n    var contentSize = this._contentSize();\n\n    var baseContainerSize = this._getBaseDimension(this._$container.get(0), this._dimension);\n\n    var baseContentSize = this._getBaseDimension(this._$content.get(0), this._dimension);\n\n    deferRender(() => {\n      this._scrollbar.option({\n        containerSize: containerSize,\n        contentSize: contentSize,\n        baseContainerSize: baseContainerSize,\n        baseContentSize: baseContentSize,\n        scaleRatio: this._getScaleRatio()\n      });\n    });\n  }),\n  _moveToBounds: deferRenderer(deferUpdater(deferRenderer(function () {\n    var location = this._boundLocation();\n\n    var locationChanged = location !== this._location;\n    this._location = location;\n\n    this._move();\n\n    if (locationChanged) {\n      this._scrollAction();\n    }\n  }))),\n  _createActionsHandler: function (actions) {\n    this._scrollAction = actions.scroll;\n    this._bounceAction = actions.bounce;\n  },\n  _showScrollbar: function () {\n    this._scrollbar.option(\"visible\", true);\n  },\n  _hideScrollbar: function () {\n    this._scrollbar.option(\"visible\", false);\n  },\n  _containerSize: function () {\n    return this._getRealDimension(this._$container.get(0), this._dimension);\n  },\n  _contentSize: function () {\n    var isOverflowHidden = \"hidden\" === this._$content.css(\"overflow\" + this._axis.toUpperCase());\n\n    var contentSize = this._getRealDimension(this._$content.get(0), this._dimension);\n\n    if (!isOverflowHidden) {\n      var containerScrollSize = this._$content[0][\"scroll\" + titleize(this._dimension)] * this._getScaleRatio();\n\n      contentSize = Math.max(containerScrollSize, contentSize);\n    }\n\n    return contentSize;\n  },\n  _validateEvent: function (e) {\n    var $target = $(e.originalEvent.target);\n    return this._isThumb($target) || this._isScrollbar($target) || this._isContent($target);\n  },\n  _isThumb: function ($element) {\n    return this._scrollByThumb && this._scrollbar.isThumb($element);\n  },\n  _isScrollbar: function ($element) {\n    return this._scrollByThumb && $element && $element.is(this._$scrollbar);\n  },\n  _isContent: function ($element) {\n    return this._scrollByContent && !!$element.closest(this._$element).length;\n  },\n  _reachedMin: function () {\n    return Math.round(this._location - this._minOffset) <= 0;\n  },\n  _reachedMax: function () {\n    return Math.round(this._location - this._maxOffset) >= 0;\n  },\n  _cursorEnterHandler: function () {\n    this._resetScaleRatio();\n\n    this._updateScrollbar();\n\n    this._scrollbar.cursorEnter();\n  },\n  _cursorLeaveHandler: function () {\n    this._scrollbar.cursorLeave();\n  },\n  dispose: noop\n});\nvar hoveredScrollable;\nvar activeScrollable;\nexport var SimulatedStrategy = Class.inherit({\n  ctor: function (scrollable) {\n    this._init(scrollable);\n  },\n  _init: function (scrollable) {\n    this._component = scrollable;\n    this._$element = scrollable.$element();\n    this._$container = $(scrollable.container());\n    this._$wrapper = scrollable._$wrapper;\n    this._$content = scrollable.$content();\n    this.option = scrollable.option.bind(scrollable);\n    this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\n    this._isLocked = scrollable._isLocked.bind(scrollable);\n    this._isDirection = scrollable._isDirection.bind(scrollable);\n    this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\n    this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable);\n  },\n  render: function () {\n    this._$element.addClass(SCROLLABLE_SIMULATED_CLASS);\n\n    this._createScrollers();\n\n    if (this.option(\"useKeyboard\")) {\n      this._$container.prop(\"tabIndex\", 0);\n    }\n\n    this._attachKeyboardHandler();\n\n    this._attachCursorHandlers();\n  },\n  _createScrollers: function () {\n    this._scrollers = {};\n\n    if (this._isDirection(HORIZONTAL)) {\n      this._createScroller(HORIZONTAL);\n    }\n\n    if (this._isDirection(VERTICAL)) {\n      this._createScroller(VERTICAL);\n    }\n\n    this._$element.toggleClass(SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE, \"always\" === this.option(\"showScrollbar\"));\n  },\n  _createScroller: function (direction) {\n    this._scrollers[direction] = new Scroller(this._scrollerOptions(direction));\n  },\n  _scrollerOptions: function (direction) {\n    return {\n      direction: direction,\n      $content: this._$content,\n      $container: this._$container,\n      $wrapper: this._$wrapper,\n      $element: this._$element,\n      scrollByContent: this.option(\"scrollByContent\"),\n      scrollByThumb: this.option(\"scrollByThumb\"),\n      scrollbarVisible: this.option(\"showScrollbar\"),\n      bounceEnabled: this.option(\"bounceEnabled\"),\n      inertiaEnabled: this.option(\"inertiaEnabled\"),\n      isAnyThumbScrolling: this._isAnyThumbScrolling.bind(this)\n    };\n  },\n  _applyScaleRatio: function (targetLocation) {\n    for (var direction in this._scrollers) {\n      var prop = this._getPropByDirection(direction);\n\n      if (isDefined(targetLocation[prop])) {\n        var scroller = this._scrollers[direction];\n        targetLocation[prop] *= scroller._getScaleRatio();\n      }\n    }\n\n    return targetLocation;\n  },\n  _isAnyThumbScrolling: function ($target) {\n    var result = false;\n\n    this._eventHandler(\"isThumbScrolling\", $target).done(function (isThumbScrollingVertical, isThumbScrollingHorizontal) {\n      result = isThumbScrollingVertical || isThumbScrollingHorizontal;\n    });\n\n    return result;\n  },\n  handleInit: function (e) {\n    this._suppressDirections(e);\n\n    this._eventForUserAction = e;\n\n    this._eventHandler(\"init\", e);\n  },\n  _suppressDirections: function (e) {\n    if (isDxMouseWheelEvent(e.originalEvent)) {\n      this._prepareDirections(true);\n\n      return;\n    }\n\n    this._prepareDirections();\n\n    this._eachScroller(function (scroller, direction) {\n      var isValid = scroller._validateEvent(e);\n\n      this._validDirections[direction] = isValid;\n    });\n  },\n  _prepareDirections: function (value) {\n    value = value || false;\n    this._validDirections = {};\n    this._validDirections[HORIZONTAL] = value;\n    this._validDirections[VERTICAL] = value;\n  },\n  _eachScroller: function (callback) {\n    callback = callback.bind(this);\n    each(this._scrollers, function (direction, scroller) {\n      callback(scroller, direction);\n    });\n  },\n  handleStart: function (e) {\n    this._eventForUserAction = e;\n\n    this._eventHandler(\"start\").done(this._startAction);\n  },\n  _saveActive: function () {\n    activeScrollable = this;\n  },\n  _resetActive: function () {\n    if (activeScrollable === this) {\n      activeScrollable = null;\n    }\n  },\n  handleMove: function (e) {\n    if (this._isLocked()) {\n      e.cancel = true;\n\n      this._resetActive();\n\n      return;\n    }\n\n    this._saveActive();\n\n    e.preventDefault && e.preventDefault();\n\n    this._adjustDistance(e, e.delta);\n\n    this._eventForUserAction = e;\n\n    this._eventHandler(\"move\", e.delta);\n  },\n  _adjustDistance: function (e, distance) {\n    distance.x *= this._validDirections[HORIZONTAL];\n    distance.y *= this._validDirections[VERTICAL];\n\n    var devicePixelRatio = this._tryGetDevicePixelRatio();\n\n    if (devicePixelRatio && isDxMouseWheelEvent(e.originalEvent)) {\n      distance.x = Math.round(distance.x / devicePixelRatio * 100) / 100;\n      distance.y = Math.round(distance.y / devicePixelRatio * 100) / 100;\n    }\n  },\n  _tryGetDevicePixelRatio: function () {\n    if (hasWindow()) {\n      return getWindow().devicePixelRatio;\n    }\n  },\n  handleEnd: function (e) {\n    this._resetActive();\n\n    this._refreshCursorState(e.originalEvent && e.originalEvent.target);\n\n    this._adjustDistance(e, e.velocity);\n\n    this._eventForUserAction = e;\n    return this._eventHandler(\"end\", e.velocity).done(this._endAction);\n  },\n  handleCancel: function (e) {\n    this._resetActive();\n\n    this._eventForUserAction = e;\n    return this._eventHandler(\"end\", {\n      x: 0,\n      y: 0\n    });\n  },\n  handleStop: function () {\n    this._resetActive();\n\n    this._eventHandler(\"stop\");\n  },\n  handleScroll: function () {\n    this._updateRtlConfig();\n\n    this._scrollAction();\n  },\n  _attachKeyboardHandler: function () {\n    eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\n\n    if (!this.option(\"disabled\") && this.option(\"useKeyboard\")) {\n      eventsEngine.on(this._$element, addEventNamespace(\"keydown\", SCROLLABLE_SIMULATED_KEYBOARD), this._keyDownHandler.bind(this));\n    }\n  },\n  _keyDownHandler: function (e) {\n    clearTimeout(this._updateHandlerTimeout);\n    this._updateHandlerTimeout = setTimeout(() => {\n      if (normalizeKeyName(e) === KEY_CODES.TAB) {\n        this._eachScroller(scroller => {\n          scroller._updateHandler();\n        });\n      }\n    });\n\n    if (!this._$container.is(domAdapter.getActiveElement())) {\n      return;\n    }\n\n    var handled = true;\n\n    switch (normalizeKeyName(e)) {\n      case KEY_CODES.DOWN:\n        this._scrollByLine({\n          y: 1\n        });\n\n        break;\n\n      case KEY_CODES.UP:\n        this._scrollByLine({\n          y: -1\n        });\n\n        break;\n\n      case KEY_CODES.RIGHT:\n        this._scrollByLine({\n          x: 1\n        });\n\n        break;\n\n      case KEY_CODES.LEFT:\n        this._scrollByLine({\n          x: -1\n        });\n\n        break;\n\n      case KEY_CODES.PAGE_DOWN:\n        this._scrollByPage(1);\n\n        break;\n\n      case KEY_CODES.PAGE_UP:\n        this._scrollByPage(-1);\n\n        break;\n\n      case KEY_CODES.HOME:\n        this._scrollToHome();\n\n        break;\n\n      case KEY_CODES.END:\n        this._scrollToEnd();\n\n        break;\n\n      default:\n        handled = false;\n    }\n\n    if (handled) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  },\n  _scrollByLine: function (lines) {\n    var devicePixelRatio = this._tryGetDevicePixelRatio();\n\n    var scrollOffset = SCROLL_LINE_HEIGHT;\n\n    if (devicePixelRatio) {\n      scrollOffset = Math.abs(scrollOffset / devicePixelRatio * 100) / 100;\n    }\n\n    this.scrollBy({\n      top: (lines.y || 0) * -scrollOffset,\n      left: (lines.x || 0) * -scrollOffset\n    });\n  },\n  _scrollByPage: function (page) {\n    var prop = this._wheelProp();\n\n    var dimension = this._dimensionByProp(prop);\n\n    var distance = {};\n    var getter = \"width\" === dimension ? getWidth : getHeight;\n    distance[prop] = page * -getter(this._$container);\n    this.scrollBy(distance);\n  },\n  _dimensionByProp: function (prop) {\n    return \"left\" === prop ? \"width\" : \"height\";\n  },\n  _getPropByDirection: function (direction) {\n    return direction === HORIZONTAL ? \"left\" : \"top\";\n  },\n  _scrollToHome: function () {\n    var prop = this._wheelProp();\n\n    var distance = {};\n    distance[prop] = 0;\n\n    this._component.scrollTo(distance);\n  },\n  _scrollToEnd: function () {\n    var prop = this._wheelProp();\n\n    var dimension = this._dimensionByProp(prop);\n\n    var distance = {};\n    var getter = \"width\" === dimension ? getWidth : getHeight;\n    distance[prop] = getter(this._$content) - getter(this._$container);\n\n    this._component.scrollTo(distance);\n  },\n  createActions: function () {\n    this._startAction = this._createActionHandler(\"onStart\");\n    this._endAction = this._createActionHandler(\"onEnd\");\n    this._updateAction = this._createActionHandler(\"onUpdated\");\n\n    this._createScrollerActions();\n  },\n  _createScrollerActions: function () {\n    this._scrollAction = this._createActionHandler(\"onScroll\");\n    this._bounceAction = this._createActionHandler(\"onBounce\");\n\n    this._eventHandler(\"createActions\", {\n      scroll: this._scrollAction,\n      bounce: this._bounceAction\n    });\n  },\n  _createActionHandler: function (optionName) {\n    var actionHandler = this._createActionByOption(optionName);\n\n    return () => {\n      actionHandler(extend(this._createActionArgs(), arguments));\n    };\n  },\n  _createActionArgs: function () {\n    var {\n      horizontal: scrollerX,\n      vertical: scrollerY\n    } = this._scrollers;\n\n    var offset = this._getScrollOffset();\n\n    this._scrollOffset = {\n      top: scrollerY && offset.top,\n      left: scrollerX && offset.left\n    };\n    return {\n      event: this._eventForUserAction,\n      scrollOffset: this._scrollOffset,\n      reachedLeft: scrollerX && scrollerX._reachedMax(),\n      reachedRight: scrollerX && scrollerX._reachedMin(),\n      reachedTop: scrollerY && scrollerY._reachedMax(),\n      reachedBottom: scrollerY && scrollerY._reachedMin()\n    };\n  },\n\n  _getScrollOffset() {\n    return {\n      top: -this.location().top,\n      left: -this.location().left\n    };\n  },\n\n  _eventHandler: function (eventName) {\n    var args = [].slice.call(arguments).slice(1);\n    var deferreds = map(this._scrollers, scroller => scroller[\"_\" + eventName + \"Handler\"].apply(scroller, args));\n    return when.apply($, deferreds).promise();\n  },\n  location: function () {\n    var location = locate(this._$content);\n    location.top -= this._$container.scrollTop();\n    location.left -= this._$container.scrollLeft();\n    return location;\n  },\n  disabledChanged: function () {\n    this._attachCursorHandlers();\n  },\n  _attachCursorHandlers: function () {\n    eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\n\n    if (!this.option(\"disabled\") && this._isHoverMode()) {\n      eventsEngine.on(this._$element, addEventNamespace(\"mouseenter\", SCROLLABLE_SIMULATED_CURSOR), this._cursorEnterHandler.bind(this));\n      eventsEngine.on(this._$element, addEventNamespace(\"mouseleave\", SCROLLABLE_SIMULATED_CURSOR), this._cursorLeaveHandler.bind(this));\n    }\n  },\n  _isHoverMode: function () {\n    return \"onHover\" === this.option(\"showScrollbar\");\n  },\n  _cursorEnterHandler: function (e) {\n    e = e || {};\n    e.originalEvent = e.originalEvent || {};\n\n    if (activeScrollable || e.originalEvent._hoverHandled) {\n      return;\n    }\n\n    if (hoveredScrollable) {\n      hoveredScrollable._cursorLeaveHandler();\n    }\n\n    hoveredScrollable = this;\n\n    this._eventHandler(\"cursorEnter\");\n\n    e.originalEvent._hoverHandled = true;\n  },\n  _cursorLeaveHandler: function (e) {\n    if (hoveredScrollable !== this || activeScrollable === hoveredScrollable) {\n      return;\n    }\n\n    this._eventHandler(\"cursorLeave\");\n\n    hoveredScrollable = null;\n\n    this._refreshCursorState(e && e.relatedTarget);\n  },\n  _refreshCursorState: function (target) {\n    if (!this._isHoverMode() && (!target || activeScrollable)) {\n      return;\n    }\n\n    var $target = $(target);\n    var $scrollable = $target.closest(\".\".concat(SCROLLABLE_SIMULATED_CLASS, \":not(.dx-state-disabled)\"));\n    var targetScrollable = $scrollable.length && $scrollable.data(SCROLLABLE_STRATEGY);\n\n    if (hoveredScrollable && hoveredScrollable !== targetScrollable) {\n      hoveredScrollable._cursorLeaveHandler();\n    }\n\n    if (targetScrollable) {\n      targetScrollable._cursorEnterHandler();\n    }\n  },\n  update: function () {\n    var result = this._eventHandler(\"update\").done(this._updateAction);\n\n    return when(result, deferUpdate(() => {\n      var allowedDirections = this._allowedDirections();\n\n      deferRender(() => {\n        var touchDirection = allowedDirections.vertical ? \"pan-x\" : \"\";\n        touchDirection = allowedDirections.horizontal ? \"pan-y\" : touchDirection;\n        touchDirection = allowedDirections.vertical && allowedDirections.horizontal ? \"none\" : touchDirection;\n\n        this._$container.css(\"touchAction\", touchDirection);\n      });\n      return when().promise();\n    }));\n  },\n  _allowedDirections: function () {\n    var bounceEnabled = this.option(\"bounceEnabled\");\n    var verticalScroller = this._scrollers[VERTICAL];\n    var horizontalScroller = this._scrollers[HORIZONTAL];\n    return {\n      vertical: verticalScroller && (verticalScroller._minOffset < 0 || bounceEnabled),\n      horizontal: horizontalScroller && (horizontalScroller._minOffset < 0 || bounceEnabled)\n    };\n  },\n  _updateBounds: function () {\n    this._scrollers[HORIZONTAL] && this._scrollers[HORIZONTAL]._updateBounds();\n  },\n  _isHorizontalAndRtlEnabled: function () {\n    return this.option(\"rtlEnabled\") && this.option(\"direction\") !== VERTICAL;\n  },\n  updateRtlPosition: function (needInitializeRtlConfig) {\n    if (needInitializeRtlConfig) {\n      this._rtlConfig = {\n        scrollRight: 0,\n        clientWidth: this._$container.get(0).clientWidth,\n        windowPixelRatio: this._getWindowDevicePixelRatio()\n      };\n    }\n\n    this._updateBounds();\n\n    if (this._isHorizontalAndRtlEnabled()) {\n      deferUpdate(() => {\n        var scrollLeft = this._getMaxOffset().left - this._rtlConfig.scrollRight;\n\n        if (scrollLeft <= 0) {\n          scrollLeft = 0;\n          this._rtlConfig.scrollRight = this._getMaxOffset().left;\n        }\n\n        deferRender(() => {\n          if (this._getScrollOffset().left !== scrollLeft) {\n            this._rtlConfig.skipUpdating = true;\n\n            this._component.scrollTo({\n              left: scrollLeft\n            });\n\n            this._rtlConfig.skipUpdating = false;\n          }\n        });\n      });\n    }\n  },\n  _updateRtlConfig: function () {\n    if (this._isHorizontalAndRtlEnabled() && !this._rtlConfig.skipUpdating) {\n      var {\n        clientWidth: clientWidth,\n        scrollLeft: scrollLeft\n      } = this._$container.get(0);\n\n      var windowPixelRatio = this._getWindowDevicePixelRatio();\n\n      if (this._rtlConfig.windowPixelRatio === windowPixelRatio && this._rtlConfig.clientWidth === clientWidth) {\n        this._rtlConfig.scrollRight = this._getMaxOffset().left - scrollLeft;\n      }\n\n      this._rtlConfig.clientWidth = clientWidth;\n      this._rtlConfig.windowPixelRatio = windowPixelRatio;\n    }\n  },\n  _getWindowDevicePixelRatio: function () {\n    return hasWindow() ? getWindow().devicePixelRatio : 1;\n  },\n  scrollBy: function (distance) {\n    var verticalScroller = this._scrollers[VERTICAL];\n    var horizontalScroller = this._scrollers[HORIZONTAL];\n\n    if (verticalScroller) {\n      distance.top = verticalScroller._boundLocation(distance.top + verticalScroller._location) - verticalScroller._location;\n    }\n\n    if (horizontalScroller) {\n      distance.left = horizontalScroller._boundLocation(distance.left + horizontalScroller._location) - horizontalScroller._location;\n    }\n\n    this._prepareDirections(true);\n\n    this._startAction();\n\n    this._eventHandler(\"scrollBy\", {\n      x: distance.left,\n      y: distance.top\n    });\n\n    this._endAction();\n\n    this._updateRtlConfig();\n  },\n  validate: function (e) {\n    if (isDxMouseWheelEvent(e) && isCommandKeyPressed(e)) {\n      return false;\n    }\n\n    if (this.option(\"disabled\")) {\n      return false;\n    }\n\n    if (this.option(\"bounceEnabled\")) {\n      return true;\n    }\n\n    return isDxMouseWheelEvent(e) ? this._validateWheel(e) : this._validateMove(e);\n  },\n  _validateWheel: function (e) {\n    var scroller = this._scrollers[this._wheelDirection(e)];\n\n    var reachedMin = scroller._reachedMin();\n\n    var reachedMax = scroller._reachedMax();\n\n    var contentGreaterThanContainer = !reachedMin || !reachedMax;\n    var locatedNotAtBound = !reachedMin && !reachedMax;\n    var scrollFromMin = reachedMin && e.delta > 0;\n    var scrollFromMax = reachedMax && e.delta < 0;\n    var validated = contentGreaterThanContainer && (locatedNotAtBound || scrollFromMin || scrollFromMax);\n    validated = validated || void 0 !== this._validateWheelTimer;\n\n    if (validated) {\n      clearTimeout(this._validateWheelTimer);\n      this._validateWheelTimer = setTimeout(() => {\n        this._validateWheelTimer = void 0;\n      }, VALIDATE_WHEEL_TIMEOUT);\n    }\n\n    return validated;\n  },\n  _validateMove: function (e) {\n    if (!this.option(\"scrollByContent\") && !$(e.target).closest(\".\".concat(SCROLLABLE_SCROLLBAR_CLASS)).length) {\n      return false;\n    }\n\n    return this._allowedDirection();\n  },\n  getDirection: function (e) {\n    return isDxMouseWheelEvent(e) ? this._wheelDirection(e) : this._allowedDirection();\n  },\n  _wheelProp: function () {\n    return this._wheelDirection() === HORIZONTAL ? \"left\" : \"top\";\n  },\n  _wheelDirection: function (e) {\n    switch (this.option(\"direction\")) {\n      case HORIZONTAL:\n        return HORIZONTAL;\n\n      case VERTICAL:\n        return VERTICAL;\n\n      default:\n        return e && e.shiftKey ? HORIZONTAL : VERTICAL;\n    }\n  },\n  dispose: function () {\n    this._resetActive();\n\n    if (hoveredScrollable === this) {\n      hoveredScrollable = null;\n    }\n\n    this._eventHandler(\"dispose\");\n\n    this._detachEventHandlers();\n\n    this._$element.removeClass(SCROLLABLE_SIMULATED_CLASS);\n\n    this._eventForUserAction = null;\n    clearTimeout(this._validateWheelTimer);\n    clearTimeout(this._updateHandlerTimeout);\n  },\n  _detachEventHandlers: function () {\n    eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\n    eventsEngine.off(this._$container, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\n  }\n});","map":{"version":3,"sources":["/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.simulated.js"],"names":["getHeight","getWidth","$","domAdapter","eventsEngine","titleize","extend","getWindow","hasWindow","each","map","isDefined","getBoundingRect","resetPosition","move","locate","Class","Animator","isDxMouseWheelEvent","addNamespace","addEventNamespace","normalizeKeyName","isCommandKeyPressed","deferUpdate","deferUpdater","deferRender","deferRenderer","noop","Scrollbar","when","Deferred","SCROLLABLE_SIMULATED","SCROLLABLE_STRATEGY","SCROLLABLE_SIMULATED_CURSOR","SCROLLABLE_SIMULATED_KEYBOARD","SCROLLABLE_SIMULATED_CLASS","SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE","SCROLLABLE_SCROLLBAR_CLASS","VERTICAL","HORIZONTAL","ACCELERATION","OUT_BOUNDS_ACCELERATION","MIN_VELOCITY_LIMIT","FRAME_DURATION","Math","round","SCROLL_LINE_HEIGHT","VALIDATE_WHEEL_TIMEOUT","BOUNCE_MIN_VELOCITY_LIMIT","BOUNCE_DURATION","BOUNCE_FRAMES","BOUNCE_ACCELERATION_SUM","pow","KEY_CODES","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","TAB","InertiaAnimator","inherit","ctor","scroller","callBase","VELOCITY_LIMIT","_isFinished","abs","_velocity","_step","_scrollStep","_acceleration","_inBounds","_complete","_scrollComplete","BounceAnimator","_crossBoundOnNextStep","_move","_bounceLocation","Scroller","options","_initOptions","_initAnimators","_initScrollbar","_location","_topReached","_bottomReached","_axis","direction","_prop","_dimension","_scrollProp","optionName","optionValue","_inertiaAnimator","_bounceAnimator","_scrollbar","appendTo","_$container","_direction","visible","_scrollByThumb","visibilityMode","_visibilityModeNormalize","_scrollbarVisible","expandable","_$scrollbar","$element","mode","delta","prevLocation","_suppressBounce","triggerHandler","type","_bounceEnabled","_boundLocation","location","max","min","_maxOffset","_minOffset","_getScaleRatio","_moveContent","_moveScrollbar","_moveContentByTranslator","_scaleRatio","element","_$element","get","realDimension","_getRealDimension","baseDimension","_getBaseDimension","dimension","dimensionName","translateOffset","minOffset","_maxScrollPropValue","_translateOffset","targetLocation","_$content","moveTo","_hideScrollbar","_completeDeferred","resolve","_scrollToBounds","_bounceAction","_setupBounce","start","boundLocation","bounceDistance","nextLocation","_initHandler","e","_stopScrolling","_prepareThumbScrolling","stop","originalEvent","$target","target","scrollbarClicked","_isScrollbar","_moveToMouseLocation","_thumbScrolling","_isThumb","_crossThumbScrolling","_isAnyThumbScrolling","feedbackOn","_isThumbScrollingHandler","mouseLocation","toUpperCase","offset","_containerToContentRatio","_startHandler","_showScrollbar","_moveHandler","_scrollBy","_scrollByHandler","containerToContentRatio","_endHandler","velocity","_inertiaHandler","_resetThumbScrolling","promise","_suppressInertia","_inertiaEnabled","_stopHandler","_disposeHandler","remove","_updateHandler","_update","_moveToBounds","_resetScaleRatio","_updateLocation","_updateBounds","_updateScrollbar","update","_getMaxOffset","_getMinOffset","_contentSize","_containerSize","containerSize","contentSize","baseContainerSize","baseContentSize","option","scaleRatio","locationChanged","_scrollAction","_createActionsHandler","actions","scroll","bounce","isOverflowHidden","css","containerScrollSize","_validateEvent","_isContent","isThumb","is","_scrollByContent","closest","length","_reachedMin","_reachedMax","_cursorEnterHandler","cursorEnter","_cursorLeaveHandler","cursorLeave","dispose","hoveredScrollable","activeScrollable","SimulatedStrategy","scrollable","_init","_component","container","_$wrapper","$content","bind","_createActionByOption","_isLocked","_isDirection","_allowedDirection","render","addClass","_createScrollers","prop","_attachKeyboardHandler","_attachCursorHandlers","_scrollers","_createScroller","toggleClass","_scrollerOptions","$container","$wrapper","scrollByContent","scrollByThumb","scrollbarVisible","bounceEnabled","inertiaEnabled","isAnyThumbScrolling","_applyScaleRatio","_getPropByDirection","result","_eventHandler","done","isThumbScrollingVertical","isThumbScrollingHorizontal","handleInit","_suppressDirections","_eventForUserAction","_prepareDirections","_eachScroller","isValid","_validDirections","value","callback","handleStart","_startAction","_saveActive","_resetActive","handleMove","cancel","preventDefault","_adjustDistance","distance","x","y","devicePixelRatio","_tryGetDevicePixelRatio","handleEnd","_refreshCursorState","_endAction","handleCancel","handleStop","handleScroll","_updateRtlConfig","off","concat","on","_keyDownHandler","clearTimeout","_updateHandlerTimeout","setTimeout","getActiveElement","handled","_scrollByLine","_scrollByPage","_scrollToHome","_scrollToEnd","stopPropagation","lines","scrollOffset","scrollBy","top","left","page","_wheelProp","_dimensionByProp","getter","scrollTo","createActions","_createActionHandler","_updateAction","_createScrollerActions","actionHandler","_createActionArgs","arguments","horizontal","scrollerX","vertical","scrollerY","_getScrollOffset","_scrollOffset","event","reachedLeft","reachedRight","reachedTop","reachedBottom","eventName","args","slice","call","deferreds","apply","scrollTop","scrollLeft","disabledChanged","_isHoverMode","_hoverHandled","relatedTarget","$scrollable","targetScrollable","data","allowedDirections","_allowedDirections","touchDirection","verticalScroller","horizontalScroller","_isHorizontalAndRtlEnabled","updateRtlPosition","needInitializeRtlConfig","_rtlConfig","scrollRight","clientWidth","windowPixelRatio","_getWindowDevicePixelRatio","skipUpdating","validate","_validateWheel","_validateMove","_wheelDirection","reachedMin","reachedMax","contentGreaterThanContainer","locatedNotAtBound","scrollFromMin","scrollFromMax","validated","_validateWheelTimer","getDirection","shiftKey","_detachEventHandlers","removeClass"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACIA,SADJ,EAEIC,QAFJ,QAGO,uBAHP;AAIA,OAAOC,CAAP,MAAc,qBAAd;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,SACIC,QADJ,QAEO,4BAFP;AAGA,SACIC,MADJ,QAEO,yBAFP;AAGA,SACIC,SADJ,EAEIC,SAFJ,QAGO,yBAHP;AAIA,SACIC,IADJ,EAEIC,GAFJ,QAGO,2BAHP;AAIA,SACIC,SADJ,QAEO,uBAFP;AAGA,SACIC,eADJ,QAEO,2BAFP;AAGA,SACIC,aADJ,EAEIC,IAFJ,EAGIC,MAHJ,QAIO,4BAJP;AAKA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SACIC,mBADJ,EAEIC,YAAY,IAAIC,iBAFpB,EAGIC,gBAHJ,EAIIC,mBAJJ,QAKO,0BALP;AAMA,SACIC,WADJ,EAEIC,YAFJ,EAGIC,WAHJ,EAIIC,aAJJ,EAKIC,IALJ,QAMO,yBANP;AAOA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,SACIC,IADJ,EAEIC,QAFJ,QAGO,2BAHP;AAIA,IAAIC,oBAAoB,GAAG,uBAA3B;AACA,IAAIC,mBAAmB,GAAG,sBAA1B;AACA,IAAIC,2BAA2B,GAAGF,oBAAoB,GAAG,QAAzD;AACA,IAAIG,6BAA6B,GAAGH,oBAAoB,GAAG,UAA3D;AACA,IAAII,0BAA0B,GAAG,yBAAjC;AACA,IAAIC,mCAAmC,GAAG,wCAA1C;AACA,IAAIC,0BAA0B,GAAG,yBAAjC;AACA,IAAIC,QAAQ,GAAG,UAAf;AACA,IAAIC,UAAU,GAAG,YAAjB;AACA,IAAIC,YAAY,GAAG,GAAnB;AACA,IAAIC,uBAAuB,GAAG,EAA9B;AACA,IAAIC,kBAAkB,GAAG,CAAzB;AACA,IAAIC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAW,MAAM,EAAjB,CAArB;AACA,IAAIC,kBAAkB,GAAG,EAAzB;AACA,IAAIC,sBAAsB,GAAG,GAA7B;AACA,IAAIC,yBAAyB,GAAGN,kBAAkB,GAAG,CAArD;AACA,IAAIO,eAAe,GAAG,GAAtB;AACA,IAAIC,aAAa,GAAGD,eAAe,GAAGN,cAAtC;AACA,IAAIQ,uBAAuB,GAAG,CAAC,IAAIP,IAAI,CAACQ,GAAL,CAASZ,YAAT,EAAuBU,aAAvB,CAAL,KAA+C,IAAIV,YAAnD,CAA9B;AACA,IAAIa,SAAS,GAAG;AACZC,EAAAA,OAAO,EAAE,QADG;AAEZC,EAAAA,SAAS,EAAE,UAFC;AAGZC,EAAAA,GAAG,EAAE,KAHO;AAIZC,EAAAA,IAAI,EAAE,MAJM;AAKZC,EAAAA,IAAI,EAAE,WALM;AAMZC,EAAAA,EAAE,EAAE,SANQ;AAOZC,EAAAA,KAAK,EAAE,YAPK;AAQZC,EAAAA,IAAI,EAAE,WARM;AASZC,EAAAA,GAAG,EAAE;AATO,CAAhB;AAWA,IAAIC,eAAe,GAAG9C,QAAQ,CAAC+C,OAAT,CAAiB;AACnCC,EAAAA,IAAI,EAAE,UAASC,QAAT,EAAmB;AACrB,SAAKC,QAAL;AACA,SAAKD,QAAL,GAAgBA,QAAhB;AACH,GAJkC;AAKnCE,EAAAA,cAAc,EAAE1B,kBALmB;AAMnC2B,EAAAA,WAAW,EAAE,YAAW;AACpB,WAAOzB,IAAI,CAAC0B,GAAL,CAAS,KAAKJ,QAAL,CAAcK,SAAvB,KAAqC,KAAKH,cAAjD;AACH,GARkC;AASnCI,EAAAA,KAAK,EAAE,YAAW;AACd,SAAKN,QAAL,CAAcO,WAAd,CAA0B,KAAKP,QAAL,CAAcK,SAAxC;;AACA,SAAKL,QAAL,CAAcK,SAAd,IAA2B,KAAKG,aAAL,EAA3B;AACH,GAZkC;AAanCA,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAO,KAAKR,QAAL,CAAcS,SAAd,KAA4BnC,YAA5B,GAA2CC,uBAAlD;AACH,GAfkC;AAgBnCmC,EAAAA,SAAS,EAAE,YAAW;AAClB,SAAKV,QAAL,CAAcW,eAAd;AACH;AAlBkC,CAAjB,CAAtB;AAoBA,IAAIC,cAAc,GAAGf,eAAe,CAACC,OAAhB,CAAwB;AACzCI,EAAAA,cAAc,EAAEpB,yBADyB;AAEzCqB,EAAAA,WAAW,EAAE,YAAW;AACpB,WAAO,KAAKH,QAAL,CAAca,qBAAd,MAAyC,KAAKZ,QAAL,EAAhD;AACH,GAJwC;AAKzCO,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAOlC,YAAP;AACH,GAPwC;AAQzCoC,EAAAA,SAAS,EAAE,YAAW;AAClB,SAAKV,QAAL,CAAcc,KAAd,CAAoB,KAAKd,QAAL,CAAce,eAAlC;;AACA,SAAKd,QAAL;AACH;AAXwC,CAAxB,CAArB;AAaA,OAAO,IAAIe,QAAQ,GAAGlE,KAAK,CAACgD,OAAN,CAAc;AAChCC,EAAAA,IAAI,EAAE,UAASkB,OAAT,EAAkB;AACpB,SAAKC,YAAL,CAAkBD,OAAlB;;AACA,SAAKE,cAAL;;AACA,SAAKC,cAAL;AACH,GAL+B;AAMhCF,EAAAA,YAAY,EAAE,UAASD,OAAT,EAAkB;AAC5B,SAAKI,SAAL,GAAiB,CAAjB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKC,cAAL,GAAsB,KAAtB;AACA,SAAKC,KAAL,GAAaP,OAAO,CAACQ,SAAR,KAAsBpD,UAAtB,GAAmC,GAAnC,GAAyC,GAAtD;AACA,SAAKqD,KAAL,GAAaT,OAAO,CAACQ,SAAR,KAAsBpD,UAAtB,GAAmC,MAAnC,GAA4C,KAAzD;AACA,SAAKsD,UAAL,GAAkBV,OAAO,CAACQ,SAAR,KAAsBpD,UAAtB,GAAmC,OAAnC,GAA6C,QAA/D;AACA,SAAKuD,WAAL,GAAmBX,OAAO,CAACQ,SAAR,KAAsBpD,UAAtB,GAAmC,YAAnC,GAAkD,WAArE;AACA9B,IAAAA,IAAI,CAAC0E,OAAD,EAAU,CAACY,UAAD,EAAaC,WAAb,KAA6B;AACvC,WAAK,MAAMD,UAAX,IAAyBC,WAAzB;AACH,KAFG,CAAJ;AAGH,GAjB+B;AAkBhCX,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKY,gBAAL,GAAwB,IAAIlC,eAAJ,CAAoB,IAApB,CAAxB;AACA,SAAKmC,eAAL,GAAuB,IAAIpB,cAAJ,CAAmB,IAAnB,CAAvB;AACH,GArB+B;AAsBhCQ,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKa,UAAL,GAAkB,IAAIvE,SAAJ,CAAc1B,CAAC,CAAC,OAAD,CAAD,CAAWkG,QAAX,CAAoB,KAAKC,WAAzB,CAAd,EAAqD;AACnEV,MAAAA,SAAS,EAAE,KAAKW,UADmD;AAEnEC,MAAAA,OAAO,EAAE,KAAKC,cAFqD;AAGnEC,MAAAA,cAAc,EAAE,KAAKC,wBAAL,CAA8B,KAAKC,iBAAnC,CAHmD;AAInEC,MAAAA,UAAU,EAAE,KAAKJ;AAJkD,KAArD,CAAlB;AAMA,SAAKK,WAAL,GAAmB,KAAKV,UAAL,CAAgBW,QAAhB,EAAnB;AACH,GA9B+B;AA+BhCJ,EAAAA,wBAAwB,EAAE,UAASK,IAAT,EAAe;AACrC,WAAO,SAASA,IAAT,GAAgB,UAAhB,GAA6B,UAAUA,IAAV,GAAiB,OAAjB,GAA2BA,IAA/D;AACH,GAjC+B;AAkChCtC,EAAAA,WAAW,EAAE,UAASuC,KAAT,EAAgB;AACzB,QAAIC,YAAY,GAAG,KAAK1B,SAAxB;AACA,SAAKA,SAAL,IAAkByB,KAAlB;;AACA,SAAKE,eAAL;;AACA,SAAKlC,KAAL;;AACA,QAAIpC,IAAI,CAAC0B,GAAL,CAAS2C,YAAY,GAAG,KAAK1B,SAA7B,IAA0C,CAA9C,EAAiD;AAC7C;AACH;;AACDnF,IAAAA,YAAY,CAAC+G,cAAb,CAA4B,KAAKd,WAAjC,EAA8C;AAC1Ce,MAAAA,IAAI,EAAE;AADoC,KAA9C;AAGH,GA7C+B;AA8ChCF,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI,KAAKG,cAAL,IAAuB,KAAK1C,SAAL,CAAe,KAAKY,SAApB,CAA3B,EAA2D;AACvD;AACH;;AACD,SAAKhB,SAAL,GAAiB,CAAjB;AACA,SAAKgB,SAAL,GAAiB,KAAK+B,cAAL,EAAjB;AACH,GApD+B;AAqDhCA,EAAAA,cAAc,EAAE,UAASC,QAAT,EAAmB;AAC/BA,IAAAA,QAAQ,GAAG,KAAK,CAAL,KAAWA,QAAX,GAAsBA,QAAtB,GAAiC,KAAKhC,SAAjD;AACA,WAAO3C,IAAI,CAAC4E,GAAL,CAAS5E,IAAI,CAAC6E,GAAL,CAASF,QAAT,EAAmB,KAAKG,UAAxB,CAAT,EAA8C,KAAKC,UAAnD,CAAP;AACH,GAxD+B;AAyDhC3C,EAAAA,KAAK,EAAE,UAASuC,QAAT,EAAmB;AACtB,SAAKhC,SAAL,GAAiB,KAAK,CAAL,KAAWgC,QAAX,GAAsBA,QAAQ,GAAG,KAAKK,cAAL,EAAjC,GAAyD,KAAKrC,SAA/E;;AACA,SAAKsC,YAAL;;AACA,SAAKC,cAAL;AACH,GA7D+B;AA8DhCD,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAIN,QAAQ,GAAG,KAAKhC,SAApB;;AACA,SAAKc,WAAL,CAAiB,KAAKP,WAAtB,EAAmC,CAACyB,QAAD,GAAY,KAAKK,cAAL,EAA/C;;AACA,SAAKG,wBAAL,CAA8BR,QAA9B;AACH,GAlE+B;AAmEhCK,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAIpH,SAAS,MAAM,CAAC,KAAKwH,WAAzB,EAAsC;AAClC,UAAIC,OAAO,GAAG,KAAKC,SAAL,CAAeC,GAAf,CAAmB,CAAnB,CAAd;;AACA,UAAIC,aAAa,GAAG,KAAKC,iBAAL,CAAuBJ,OAAvB,EAAgC,KAAKpC,UAArC,CAApB;;AACA,UAAIyC,aAAa,GAAG,KAAKC,iBAAL,CAAuBN,OAAvB,EAAgC,KAAKpC,UAArC,CAApB;;AACA,WAAKmC,WAAL,GAAmBpF,IAAI,CAACC,KAAL,CAAWuF,aAAa,GAAGE,aAAhB,GAAgC,GAA3C,IAAkD,GAArE;AACH;;AACD,WAAO,KAAKN,WAAL,IAAoB,CAA3B;AACH,GA3E+B;AA4EhCK,EAAAA,iBAAiB,EAAE,UAASJ,OAAT,EAAkBO,SAAlB,EAA6B;AAC5C,WAAO5F,IAAI,CAACC,KAAL,CAAWjC,eAAe,CAACqH,OAAD,CAAf,CAAyBO,SAAzB,CAAX,CAAP;AACH,GA9E+B;AA+EhCD,EAAAA,iBAAiB,EAAE,UAASN,OAAT,EAAkBO,SAAlB,EAA6B;AAC5C,QAAIC,aAAa,GAAG,WAAWpI,QAAQ,CAACmI,SAAD,CAAvC;AACA,WAAOP,OAAO,CAACQ,aAAD,CAAd;AACH,GAlF+B;AAmFhCV,EAAAA,wBAAwB,EAAE,UAASR,QAAT,EAAmB;AACzC,QAAImB,eAAJ;AACA,QAAIC,SAAS,GAAG,CAAC,KAAKC,mBAAtB;;AACA,QAAIrB,QAAQ,GAAG,CAAf,EAAkB;AACdmB,MAAAA,eAAe,GAAGnB,QAAlB;AACH,KAFD,MAEO,IAAIA,QAAQ,IAAIoB,SAAhB,EAA2B;AAC9BD,MAAAA,eAAe,GAAGnB,QAAQ,GAAGoB,SAA7B;AACH,KAFM,MAEA;AACHD,MAAAA,eAAe,GAAGnB,QAAQ,GAAG,CAA7B;AACH;;AACD,QAAI,KAAKsB,gBAAL,KAA0BH,eAA9B,EAA+C;AAC3C;AACH;;AACD,QAAII,cAAc,GAAG,EAArB;AACAA,IAAAA,cAAc,CAAC,KAAKlD,KAAN,CAAd,GAA6B8C,eAA7B;AACA,SAAKG,gBAAL,GAAwBH,eAAxB;;AACA,QAAI,MAAMA,eAAV,EAA2B;AACvB7H,MAAAA,aAAa,CAAC,KAAKkI,SAAN,CAAb;AACA;AACH;;AACDjI,IAAAA,IAAI,CAAC,KAAKiI,SAAN,EAAiBD,cAAjB,CAAJ;AACH,GAxG+B;AAyGhChB,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAK3B,UAAL,CAAgB6C,MAAhB,CAAuB,KAAKzD,SAA5B;AACH,GA3G+B;AA4GhCV,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI,KAAKF,SAAL,EAAJ,EAAsB;AAClB,WAAKsE,cAAL;;AACA,UAAI,KAAKC,iBAAT,EAA4B;AACxB,aAAKA,iBAAL,CAAuBC,OAAvB;AACH;AACJ;;AACD,SAAKC,eAAL;AACH,GApH+B;AAqHhCA,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI,KAAKzE,SAAL,EAAJ,EAAsB;AAClB;AACH;;AACD,SAAK0E,aAAL;;AACA,SAAKC,YAAL;;AACA,SAAKpD,eAAL,CAAqBqD,KAArB;AACH,GA5H+B;AA6HhCD,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAIE,aAAa,GAAG,KAAKvE,eAAL,GAAuB,KAAKqC,cAAL,EAA3C;;AACA,QAAImC,cAAc,GAAGD,aAAa,GAAG,KAAKjE,SAA1C;AACA,SAAKhB,SAAL,GAAiBkF,cAAc,GAAGtG,uBAAlC;AACH,GAjI+B;AAkIhCwB,EAAAA,SAAS,EAAE,UAAS4C,QAAT,EAAmB;AAC1BA,IAAAA,QAAQ,GAAG,KAAK,CAAL,KAAWA,QAAX,GAAsBA,QAAtB,GAAiC,KAAKhC,SAAjD;AACA,WAAO,KAAK+B,cAAL,CAAoBC,QAApB,MAAkCA,QAAzC;AACH,GArI+B;AAsIhCxC,EAAAA,qBAAqB,EAAE,YAAW;AAC9B,QAAIwC,QAAQ,GAAG,KAAKhC,SAApB;AACA,QAAImE,YAAY,GAAGnC,QAAQ,GAAG,KAAKhD,SAAnC;AACA,WAAOgD,QAAQ,GAAG,KAAKI,UAAhB,IAA8B+B,YAAY,IAAI,KAAK/B,UAAnD,IAAiEJ,QAAQ,GAAG,KAAKG,UAAhB,IAA8BgC,YAAY,IAAI,KAAKhC,UAA3H;AACH,GA1I+B;AA2IhCiC,EAAAA,YAAY,EAAE,UAASC,CAAT,EAAY;AACtB,SAAKC,cAAL;;AACA,SAAKC,sBAAL,CAA4BF,CAA5B;AACH,GA9I+B;AA+IhCC,EAAAA,cAAc,EAAEnI,aAAa,CAAE,YAAW;AACtC,SAAKuH,cAAL;;AACA,SAAKhD,gBAAL,CAAsB8D,IAAtB;;AACA,SAAK7D,eAAL,CAAqB6D,IAArB;AACH,GAJ4B,CA/IG;AAoJhCD,EAAAA,sBAAsB,EAAE,UAASF,CAAT,EAAY;AAChC,QAAI1I,mBAAmB,CAAC0I,CAAC,CAACI,aAAH,CAAvB,EAA0C;AACtC;AACH;;AACD,QAAIC,OAAO,GAAG/J,CAAC,CAAC0J,CAAC,CAACI,aAAF,CAAgBE,MAAjB,CAAf;;AACA,QAAIC,gBAAgB,GAAG,KAAKC,YAAL,CAAkBH,OAAlB,CAAvB;;AACA,QAAIE,gBAAJ,EAAsB;AAClB,WAAKE,oBAAL,CAA0BT,CAA1B;AACH;;AACD,SAAKU,eAAL,GAAuBH,gBAAgB,IAAI,KAAKI,QAAL,CAAcN,OAAd,CAA3C;AACA,SAAKO,oBAAL,GAA4B,CAAC,KAAKF,eAAN,IAAyB,KAAKG,oBAAL,CAA0BR,OAA1B,CAArD;;AACA,QAAI,KAAKK,eAAT,EAA0B;AACtB,WAAKnE,UAAL,CAAgBuE,UAAhB;AACH;AACJ,GAlK+B;AAmKhCC,EAAAA,wBAAwB,EAAE,UAASV,OAAT,EAAkB;AACxC,WAAO,KAAKM,QAAL,CAAcN,OAAd,CAAP;AACH,GArK+B;AAsKhCI,EAAAA,oBAAoB,EAAE,UAAST,CAAT,EAAY;AAC9B,QAAIgB,aAAa,GAAGhB,CAAC,CAAC,SAAS,KAAKlE,KAAL,CAAWmF,WAAX,EAAV,CAAD,GAAuC,KAAK3C,SAAL,CAAe4C,MAAf,GAAwB,KAAKlF,KAA7B,CAA3D;;AACA,QAAI2B,QAAQ,GAAG,KAAKhC,SAAL,GAAiBqF,aAAa,GAAG,KAAKG,wBAAL,EAAjC,GAAmE/K,SAAS,CAAC,KAAKqG,WAAN,CAAT,GAA8B,CAAhH;;AACA,SAAK5B,WAAL,CAAiB,CAAC7B,IAAI,CAACC,KAAL,CAAW0E,QAAX,CAAlB;AACH,GA1K+B;AA2KhCyD,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAKC,cAAL;AACH,GA7K+B;AA8KhCC,EAAAA,YAAY,EAAE,UAASlE,KAAT,EAAgB;AAC1B,QAAI,KAAKwD,oBAAT,EAA+B;AAC3B;AACH;;AACD,QAAI,KAAKF,eAAT,EAA0B;AACtBtD,MAAAA,KAAK,CAAC,KAAKtB,KAAN,CAAL,GAAoB,CAAC9C,IAAI,CAACC,KAAL,CAAWmE,KAAK,CAAC,KAAKtB,KAAN,CAAL,GAAoB,KAAKqF,wBAAL,EAA/B,CAArB;AACH;;AACD,SAAKI,SAAL,CAAenE,KAAf;AACH,GAtL+B;AAuLhCmE,EAAAA,SAAS,EAAE,UAASnE,KAAT,EAAgB;AACvBA,IAAAA,KAAK,GAAGA,KAAK,CAAC,KAAKtB,KAAN,CAAb;;AACA,QAAI,CAAC,KAAKf,SAAL,EAAL,EAAuB;AACnBqC,MAAAA,KAAK,IAAIvE,uBAAT;AACH;;AACD,SAAKgC,WAAL,CAAiBuC,KAAjB;AACH,GA7L+B;AA8LhCoE,EAAAA,gBAAgB,EAAE,UAASpE,KAAT,EAAgB;AAC9B,SAAKmE,SAAL,CAAenE,KAAf;;AACA,SAAKnC,eAAL;AACH,GAjM+B;AAkMhCkG,EAAAA,wBAAwB,EAAE,YAAW;AACjC,WAAO,KAAK5E,UAAL,CAAgBkF,uBAAhB,EAAP;AACH,GApM+B;AAqMhCC,EAAAA,WAAW,EAAE,UAASC,QAAT,EAAmB;AAC5B,SAAKrC,iBAAL,GAAyB,IAAIpH,QAAJ,EAAzB;AACA,SAAKyC,SAAL,GAAiBgH,QAAQ,CAAC,KAAK7F,KAAN,CAAzB;;AACA,SAAK8F,eAAL;;AACA,SAAKC,oBAAL;;AACA,WAAO,KAAKvC,iBAAL,CAAuBwC,OAAvB,EAAP;AACH,GA3M+B;AA4MhCF,EAAAA,eAAe,EAAE,YAAW;AACxB,SAAKG,gBAAL;;AACA,SAAK1F,gBAAL,CAAsBsD,KAAtB;AACH,GA/M+B;AAgNhCoC,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAI,CAAC,KAAKC,eAAN,IAAyB,KAAKtB,eAAlC,EAAmD;AAC/C,WAAK/F,SAAL,GAAiB,CAAjB;AACH;AACJ,GApN+B;AAqNhCkH,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,SAAKnB,eAAL,GAAuB,KAAvB;AACA,SAAKE,oBAAL,GAA4B,KAA5B;AACH,GAxN+B;AAyNhCqB,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAI,KAAKvB,eAAT,EAA0B;AACtB,WAAKzF,eAAL;AACH;;AACD,SAAK4G,oBAAL;;AACA,SAAKrC,eAAL;AACH,GA/N+B;AAgOhC0C,EAAAA,eAAe,EAAE,YAAW;AACxB,SAAKjC,cAAL;;AACA,SAAKhD,WAAL,CAAiBkF,MAAjB;AACH,GAnO+B;AAoOhCC,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKC,OAAL;;AACA,SAAKC,aAAL;AACH,GAvO+B;AAwOhCD,EAAAA,OAAO,EAAE,YAAW;AAChB,SAAKpC,cAAL;;AACA,WAAOtI,WAAW,CAAC,MAAM;AACrB,WAAK4K,gBAAL;;AACA,WAAKC,eAAL;;AACA,WAAKC,aAAL;;AACA,WAAKC,gBAAL;;AACA7K,MAAAA,WAAW,CAAC,MAAM;AACd,aAAKqG,cAAL;;AACA,aAAK3B,UAAL,CAAgBoG,MAAhB;AACH,OAHU,CAAX;AAIH,KATiB,CAAlB;AAUH,GApP+B;AAqPhCJ,EAAAA,gBAAgB,EAAE,YAAW;AACzB,SAAKnE,WAAL,GAAmB,IAAnB;AACH,GAvP+B;AAwPhCoE,EAAAA,eAAe,EAAE,YAAW;AACxB,SAAK7G,SAAL,GAAiB,CAACxE,MAAM,CAAC,KAAKgI,SAAN,CAAN,CAAuB,KAAKnD,KAA5B,IAAqC,KAAKS,WAAL,CAAiB,KAAKP,WAAtB,GAAtC,IAA8E,KAAK8B,cAAL,EAA/F;AACH,GA1P+B;AA2PhCyE,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAK3E,UAAL,GAAkB,KAAK8E,aAAL,EAAlB;AACA,SAAK7E,UAAL,GAAkB,KAAK8E,aAAL,EAAlB;AACH,GA9P+B;AA+PhCD,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAO,CAAP;AACH,GAjQ+B;AAkQhCC,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAK7D,mBAAL,GAA2BhG,IAAI,CAAC4E,GAAL,CAAS,KAAKkF,YAAL,KAAsB,KAAKC,cAAL,EAA/B,EAAsD,CAAtD,CAA3B;AACA,WAAO,CAAC,KAAK/D,mBAAb;AACH,GArQ+B;AAsQhC0D,EAAAA,gBAAgB,EAAE9K,YAAY,CAAE,YAAW;AACvC,QAAIoL,aAAa,GAAG,KAAKD,cAAL,EAApB;;AACA,QAAIE,WAAW,GAAG,KAAKH,YAAL,EAAlB;;AACA,QAAII,iBAAiB,GAAG,KAAKvE,iBAAL,CAAuB,KAAKlC,WAAL,CAAiB8B,GAAjB,CAAqB,CAArB,CAAvB,EAAgD,KAAKtC,UAArD,CAAxB;;AACA,QAAIkH,eAAe,GAAG,KAAKxE,iBAAL,CAAuB,KAAKQ,SAAL,CAAeZ,GAAf,CAAmB,CAAnB,CAAvB,EAA8C,KAAKtC,UAAnD,CAAtB;;AACApE,IAAAA,WAAW,CAAC,MAAM;AACd,WAAK0E,UAAL,CAAgB6G,MAAhB,CAAuB;AACnBJ,QAAAA,aAAa,EAAEA,aADI;AAEnBC,QAAAA,WAAW,EAAEA,WAFM;AAGnBC,QAAAA,iBAAiB,EAAEA,iBAHA;AAInBC,QAAAA,eAAe,EAAEA,eAJE;AAKnBE,QAAAA,UAAU,EAAE,KAAKrF,cAAL;AALO,OAAvB;AAOH,KARU,CAAX;AASH,GAd6B,CAtQE;AAqRhCsE,EAAAA,aAAa,EAAExK,aAAa,CAACF,YAAY,CAACE,aAAa,CAAE,YAAW;AAChE,QAAI6F,QAAQ,GAAG,KAAKD,cAAL,EAAf;;AACA,QAAI4F,eAAe,GAAG3F,QAAQ,KAAK,KAAKhC,SAAxC;AACA,SAAKA,SAAL,GAAiBgC,QAAjB;;AACA,SAAKvC,KAAL;;AACA,QAAIkI,eAAJ,EAAqB;AACjB,WAAKC,aAAL;AACH;AACJ,GARsD,CAAd,CAAb,CArRI;AA8RhCC,EAAAA,qBAAqB,EAAE,UAASC,OAAT,EAAkB;AACrC,SAAKF,aAAL,GAAqBE,OAAO,CAACC,MAA7B;AACA,SAAKjE,aAAL,GAAqBgE,OAAO,CAACE,MAA7B;AACH,GAjS+B;AAkShCtC,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAK9E,UAAL,CAAgB6G,MAAhB,CAAuB,SAAvB,EAAkC,IAAlC;AACH,GApS+B;AAqShC/D,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAK9C,UAAL,CAAgB6G,MAAhB,CAAuB,SAAvB,EAAkC,KAAlC;AACH,GAvS+B;AAwShCL,EAAAA,cAAc,EAAE,YAAW;AACvB,WAAO,KAAKtE,iBAAL,CAAuB,KAAKhC,WAAL,CAAiB8B,GAAjB,CAAqB,CAArB,CAAvB,EAAgD,KAAKtC,UAArD,CAAP;AACH,GA1S+B;AA2ShC6G,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAIc,gBAAgB,GAAG,aAAa,KAAKzE,SAAL,CAAe0E,GAAf,CAAmB,aAAa,KAAK/H,KAAL,CAAWmF,WAAX,EAAhC,CAApC;;AACA,QAAIgC,WAAW,GAAG,KAAKxE,iBAAL,CAAuB,KAAKU,SAAL,CAAeZ,GAAf,CAAmB,CAAnB,CAAvB,EAA8C,KAAKtC,UAAnD,CAAlB;;AACA,QAAI,CAAC2H,gBAAL,EAAuB;AACnB,UAAIE,mBAAmB,GAAG,KAAK3E,SAAL,CAAe,CAAf,EAAkB,WAAW1I,QAAQ,CAAC,KAAKwF,UAAN,CAArC,IAA0D,KAAK+B,cAAL,EAApF;;AACAiF,MAAAA,WAAW,GAAGjK,IAAI,CAAC4E,GAAL,CAASkG,mBAAT,EAA8Bb,WAA9B,CAAd;AACH;;AACD,WAAOA,WAAP;AACH,GAnT+B;AAoThCc,EAAAA,cAAc,EAAE,UAAS/D,CAAT,EAAY;AACxB,QAAIK,OAAO,GAAG/J,CAAC,CAAC0J,CAAC,CAACI,aAAF,CAAgBE,MAAjB,CAAf;AACA,WAAO,KAAKK,QAAL,CAAcN,OAAd,KAA0B,KAAKG,YAAL,CAAkBH,OAAlB,CAA1B,IAAwD,KAAK2D,UAAL,CAAgB3D,OAAhB,CAA/D;AACH,GAvT+B;AAwThCM,EAAAA,QAAQ,EAAE,UAASzD,QAAT,EAAmB;AACzB,WAAO,KAAKN,cAAL,IAAuB,KAAKL,UAAL,CAAgB0H,OAAhB,CAAwB/G,QAAxB,CAA9B;AACH,GA1T+B;AA2ThCsD,EAAAA,YAAY,EAAE,UAAStD,QAAT,EAAmB;AAC7B,WAAO,KAAKN,cAAL,IAAuBM,QAAvB,IAAmCA,QAAQ,CAACgH,EAAT,CAAY,KAAKjH,WAAjB,CAA1C;AACH,GA7T+B;AA8ThC+G,EAAAA,UAAU,EAAE,UAAS9G,QAAT,EAAmB;AAC3B,WAAO,KAAKiH,gBAAL,IAAyB,CAAC,CAACjH,QAAQ,CAACkH,OAAT,CAAiB,KAAK9F,SAAtB,EAAiC+F,MAAnE;AACH,GAhU+B;AAiUhCC,EAAAA,WAAW,EAAE,YAAW;AACpB,WAAOtL,IAAI,CAACC,KAAL,CAAW,KAAK0C,SAAL,GAAiB,KAAKoC,UAAjC,KAAgD,CAAvD;AACH,GAnU+B;AAoUhCwG,EAAAA,WAAW,EAAE,YAAW;AACpB,WAAOvL,IAAI,CAACC,KAAL,CAAW,KAAK0C,SAAL,GAAiB,KAAKmC,UAAjC,KAAgD,CAAvD;AACH,GAtU+B;AAuUhC0G,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,SAAKjC,gBAAL;;AACA,SAAKG,gBAAL;;AACA,SAAKnG,UAAL,CAAgBkI,WAAhB;AACH,GA3U+B;AA4UhCC,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,SAAKnI,UAAL,CAAgBoI,WAAhB;AACH,GA9U+B;AA+UhCC,EAAAA,OAAO,EAAE7M;AA/UuB,CAAd,CAAf;AAiVP,IAAI8M,iBAAJ;AACA,IAAIC,gBAAJ;AACA,OAAO,IAAIC,iBAAiB,GAAG3N,KAAK,CAACgD,OAAN,CAAc;AACzCC,EAAAA,IAAI,EAAE,UAAS2K,UAAT,EAAqB;AACvB,SAAKC,KAAL,CAAWD,UAAX;AACH,GAHwC;AAIzCC,EAAAA,KAAK,EAAE,UAASD,UAAT,EAAqB;AACxB,SAAKE,UAAL,GAAkBF,UAAlB;AACA,SAAK1G,SAAL,GAAiB0G,UAAU,CAAC9H,QAAX,EAAjB;AACA,SAAKT,WAAL,GAAmBnG,CAAC,CAAC0O,UAAU,CAACG,SAAX,EAAD,CAApB;AACA,SAAKC,SAAL,GAAiBJ,UAAU,CAACI,SAA5B;AACA,SAAKjG,SAAL,GAAiB6F,UAAU,CAACK,QAAX,EAAjB;AACA,SAAKjC,MAAL,GAAc4B,UAAU,CAAC5B,MAAX,CAAkBkC,IAAlB,CAAuBN,UAAvB,CAAd;AACA,SAAKO,qBAAL,GAA6BP,UAAU,CAACO,qBAAX,CAAiCD,IAAjC,CAAsCN,UAAtC,CAA7B;AACA,SAAKQ,SAAL,GAAiBR,UAAU,CAACQ,SAAX,CAAqBF,IAArB,CAA0BN,UAA1B,CAAjB;AACA,SAAKS,YAAL,GAAoBT,UAAU,CAACS,YAAX,CAAwBH,IAAxB,CAA6BN,UAA7B,CAApB;AACA,SAAKU,iBAAL,GAAyBV,UAAU,CAACU,iBAAX,CAA6BJ,IAA7B,CAAkCN,UAAlC,CAAzB;AACA,SAAKpC,aAAL,GAAqBoC,UAAU,CAACpC,aAAX,CAAyB0C,IAAzB,CAA8BN,UAA9B,CAArB;AACH,GAhBwC;AAiBzCW,EAAAA,MAAM,EAAE,YAAW;AACf,SAAKrH,SAAL,CAAesH,QAAf,CAAwBrN,0BAAxB;;AACA,SAAKsN,gBAAL;;AACA,QAAI,KAAKzC,MAAL,CAAY,aAAZ,CAAJ,EAAgC;AAC5B,WAAK3G,WAAL,CAAiBqJ,IAAjB,CAAsB,UAAtB,EAAkC,CAAlC;AACH;;AACD,SAAKC,sBAAL;;AACA,SAAKC,qBAAL;AACH,GAzBwC;AA0BzCH,EAAAA,gBAAgB,EAAE,YAAW;AACzB,SAAKI,UAAL,GAAkB,EAAlB;;AACA,QAAI,KAAKR,YAAL,CAAkB9M,UAAlB,CAAJ,EAAmC;AAC/B,WAAKuN,eAAL,CAAqBvN,UAArB;AACH;;AACD,QAAI,KAAK8M,YAAL,CAAkB/M,QAAlB,CAAJ,EAAiC;AAC7B,WAAKwN,eAAL,CAAqBxN,QAArB;AACH;;AACD,SAAK4F,SAAL,CAAe6H,WAAf,CAA2B3N,mCAA3B,EAAgE,aAAa,KAAK4K,MAAL,CAAY,eAAZ,CAA7E;AACH,GAnCwC;AAoCzC8C,EAAAA,eAAe,EAAE,UAASnK,SAAT,EAAoB;AACjC,SAAKkK,UAAL,CAAgBlK,SAAhB,IAA6B,IAAIT,QAAJ,CAAa,KAAK8K,gBAAL,CAAsBrK,SAAtB,CAAb,CAA7B;AACH,GAtCwC;AAuCzCqK,EAAAA,gBAAgB,EAAE,UAASrK,SAAT,EAAoB;AAClC,WAAO;AACHA,MAAAA,SAAS,EAAEA,SADR;AAEHsJ,MAAAA,QAAQ,EAAE,KAAKlG,SAFZ;AAGHkH,MAAAA,UAAU,EAAE,KAAK5J,WAHd;AAIH6J,MAAAA,QAAQ,EAAE,KAAKlB,SAJZ;AAKHlI,MAAAA,QAAQ,EAAE,KAAKoB,SALZ;AAMHiI,MAAAA,eAAe,EAAE,KAAKnD,MAAL,CAAY,iBAAZ,CANd;AAOHoD,MAAAA,aAAa,EAAE,KAAKpD,MAAL,CAAY,eAAZ,CAPZ;AAQHqD,MAAAA,gBAAgB,EAAE,KAAKrD,MAAL,CAAY,eAAZ,CARf;AASHsD,MAAAA,aAAa,EAAE,KAAKtD,MAAL,CAAY,eAAZ,CATZ;AAUHuD,MAAAA,cAAc,EAAE,KAAKvD,MAAL,CAAY,gBAAZ,CAVb;AAWHwD,MAAAA,mBAAmB,EAAE,KAAK/F,oBAAL,CAA0ByE,IAA1B,CAA+B,IAA/B;AAXlB,KAAP;AAaH,GArDwC;AAsDzCuB,EAAAA,gBAAgB,EAAE,UAAS3H,cAAT,EAAyB;AACvC,SAAK,IAAInD,SAAT,IAAsB,KAAKkK,UAA3B,EAAuC;AACnC,UAAIH,IAAI,GAAG,KAAKgB,mBAAL,CAAyB/K,SAAzB,CAAX;;AACA,UAAIhF,SAAS,CAACmI,cAAc,CAAC4G,IAAD,CAAf,CAAb,EAAqC;AACjC,YAAIxL,QAAQ,GAAG,KAAK2L,UAAL,CAAgBlK,SAAhB,CAAf;AACAmD,QAAAA,cAAc,CAAC4G,IAAD,CAAd,IAAwBxL,QAAQ,CAAC0D,cAAT,EAAxB;AACH;AACJ;;AACD,WAAOkB,cAAP;AACH,GA/DwC;AAgEzC2B,EAAAA,oBAAoB,EAAE,UAASR,OAAT,EAAkB;AACpC,QAAI0G,MAAM,GAAG,KAAb;;AACA,SAAKC,aAAL,CAAmB,kBAAnB,EAAuC3G,OAAvC,EAAgD4G,IAAhD,CAAsD,UAASC,wBAAT,EAAmCC,0BAAnC,EAA+D;AACjHJ,MAAAA,MAAM,GAAGG,wBAAwB,IAAIC,0BAArC;AACH,KAFD;;AAGA,WAAOJ,MAAP;AACH,GAtEwC;AAuEzCK,EAAAA,UAAU,EAAE,UAASpH,CAAT,EAAY;AACpB,SAAKqH,mBAAL,CAAyBrH,CAAzB;;AACA,SAAKsH,mBAAL,GAA2BtH,CAA3B;;AACA,SAAKgH,aAAL,CAAmB,MAAnB,EAA2BhH,CAA3B;AACH,GA3EwC;AA4EzCqH,EAAAA,mBAAmB,EAAE,UAASrH,CAAT,EAAY;AAC7B,QAAI1I,mBAAmB,CAAC0I,CAAC,CAACI,aAAH,CAAvB,EAA0C;AACtC,WAAKmH,kBAAL,CAAwB,IAAxB;;AACA;AACH;;AACD,SAAKA,kBAAL;;AACA,SAAKC,aAAL,CAAoB,UAASlN,QAAT,EAAmByB,SAAnB,EAA8B;AAC9C,UAAI0L,OAAO,GAAGnN,QAAQ,CAACyJ,cAAT,CAAwB/D,CAAxB,CAAd;;AACA,WAAK0H,gBAAL,CAAsB3L,SAAtB,IAAmC0L,OAAnC;AACH,KAHD;AAIH,GAtFwC;AAuFzCF,EAAAA,kBAAkB,EAAE,UAASI,KAAT,EAAgB;AAChCA,IAAAA,KAAK,GAAGA,KAAK,IAAI,KAAjB;AACA,SAAKD,gBAAL,GAAwB,EAAxB;AACA,SAAKA,gBAAL,CAAsB/O,UAAtB,IAAoCgP,KAApC;AACA,SAAKD,gBAAL,CAAsBhP,QAAtB,IAAkCiP,KAAlC;AACH,GA5FwC;AA6FzCH,EAAAA,aAAa,EAAE,UAASI,QAAT,EAAmB;AAC9BA,IAAAA,QAAQ,GAAGA,QAAQ,CAACtC,IAAT,CAAc,IAAd,CAAX;AACAzO,IAAAA,IAAI,CAAC,KAAKoP,UAAN,EAAmB,UAASlK,SAAT,EAAoBzB,QAApB,EAA8B;AACjDsN,MAAAA,QAAQ,CAACtN,QAAD,EAAWyB,SAAX,CAAR;AACH,KAFG,CAAJ;AAGH,GAlGwC;AAmGzC8L,EAAAA,WAAW,EAAE,UAAS7H,CAAT,EAAY;AACrB,SAAKsH,mBAAL,GAA2BtH,CAA3B;;AACA,SAAKgH,aAAL,CAAmB,OAAnB,EAA4BC,IAA5B,CAAiC,KAAKa,YAAtC;AACH,GAtGwC;AAuGzCC,EAAAA,WAAW,EAAE,YAAW;AACpBjD,IAAAA,gBAAgB,GAAG,IAAnB;AACH,GAzGwC;AA0GzCkD,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAIlD,gBAAgB,KAAK,IAAzB,EAA+B;AAC3BA,MAAAA,gBAAgB,GAAG,IAAnB;AACH;AACJ,GA9GwC;AA+GzCmD,EAAAA,UAAU,EAAE,UAASjI,CAAT,EAAY;AACpB,QAAI,KAAKwF,SAAL,EAAJ,EAAsB;AAClBxF,MAAAA,CAAC,CAACkI,MAAF,GAAW,IAAX;;AACA,WAAKF,YAAL;;AACA;AACH;;AACD,SAAKD,WAAL;;AACA/H,IAAAA,CAAC,CAACmI,cAAF,IAAoBnI,CAAC,CAACmI,cAAF,EAApB;;AACA,SAAKC,eAAL,CAAqBpI,CAArB,EAAwBA,CAAC,CAAC5C,KAA1B;;AACA,SAAKkK,mBAAL,GAA2BtH,CAA3B;;AACA,SAAKgH,aAAL,CAAmB,MAAnB,EAA2BhH,CAAC,CAAC5C,KAA7B;AACH,GA1HwC;AA2HzCgL,EAAAA,eAAe,EAAE,UAASpI,CAAT,EAAYqI,QAAZ,EAAsB;AACnCA,IAAAA,QAAQ,CAACC,CAAT,IAAc,KAAKZ,gBAAL,CAAsB/O,UAAtB,CAAd;AACA0P,IAAAA,QAAQ,CAACE,CAAT,IAAc,KAAKb,gBAAL,CAAsBhP,QAAtB,CAAd;;AACA,QAAI8P,gBAAgB,GAAG,KAAKC,uBAAL,EAAvB;;AACA,QAAID,gBAAgB,IAAIlR,mBAAmB,CAAC0I,CAAC,CAACI,aAAH,CAA3C,EAA8D;AAC1DiI,MAAAA,QAAQ,CAACC,CAAT,GAAatP,IAAI,CAACC,KAAL,CAAWoP,QAAQ,CAACC,CAAT,GAAaE,gBAAb,GAAgC,GAA3C,IAAkD,GAA/D;AACAH,MAAAA,QAAQ,CAACE,CAAT,GAAavP,IAAI,CAACC,KAAL,CAAWoP,QAAQ,CAACE,CAAT,GAAaC,gBAAb,GAAgC,GAA3C,IAAkD,GAA/D;AACH;AACJ,GAnIwC;AAoIzCC,EAAAA,uBAAuB,EAAE,YAAW;AAChC,QAAI7R,SAAS,EAAb,EAAiB;AACb,aAAOD,SAAS,GAAG6R,gBAAnB;AACH;AACJ,GAxIwC;AAyIzCE,EAAAA,SAAS,EAAE,UAAS1I,CAAT,EAAY;AACnB,SAAKgI,YAAL;;AACA,SAAKW,mBAAL,CAAyB3I,CAAC,CAACI,aAAF,IAAmBJ,CAAC,CAACI,aAAF,CAAgBE,MAA5D;;AACA,SAAK8H,eAAL,CAAqBpI,CAArB,EAAwBA,CAAC,CAAC2B,QAA1B;;AACA,SAAK2F,mBAAL,GAA2BtH,CAA3B;AACA,WAAO,KAAKgH,aAAL,CAAmB,KAAnB,EAA0BhH,CAAC,CAAC2B,QAA5B,EAAsCsF,IAAtC,CAA2C,KAAK2B,UAAhD,CAAP;AACH,GA/IwC;AAgJzCC,EAAAA,YAAY,EAAE,UAAS7I,CAAT,EAAY;AACtB,SAAKgI,YAAL;;AACA,SAAKV,mBAAL,GAA2BtH,CAA3B;AACA,WAAO,KAAKgH,aAAL,CAAmB,KAAnB,EAA0B;AAC7BsB,MAAAA,CAAC,EAAE,CAD0B;AAE7BC,MAAAA,CAAC,EAAE;AAF0B,KAA1B,CAAP;AAIH,GAvJwC;AAwJzCO,EAAAA,UAAU,EAAE,YAAW;AACnB,SAAKd,YAAL;;AACA,SAAKhB,aAAL,CAAmB,MAAnB;AACH,GA3JwC;AA4JzC+B,EAAAA,YAAY,EAAE,YAAW;AACrB,SAAKC,gBAAL;;AACA,SAAKzF,aAAL;AACH,GA/JwC;AAgKzCwC,EAAAA,sBAAsB,EAAE,YAAW;AAC/BvP,IAAAA,YAAY,CAACyS,GAAb,CAAiB,KAAK3K,SAAtB,EAAiC,IAAI4K,MAAJ,CAAW5Q,6BAAX,CAAjC;;AACA,QAAI,CAAC,KAAK8K,MAAL,CAAY,UAAZ,CAAD,IAA4B,KAAKA,MAAL,CAAY,aAAZ,CAAhC,EAA4D;AACxD5M,MAAAA,YAAY,CAAC2S,EAAb,CAAgB,KAAK7K,SAArB,EAAgC9G,iBAAiB,CAAC,SAAD,EAAYc,6BAAZ,CAAjD,EAA6F,KAAK8Q,eAAL,CAAqB9D,IAArB,CAA0B,IAA1B,CAA7F;AACH;AACJ,GArKwC;AAsKzC8D,EAAAA,eAAe,EAAE,UAASpJ,CAAT,EAAY;AACzBqJ,IAAAA,YAAY,CAAC,KAAKC,qBAAN,CAAZ;AACA,SAAKA,qBAAL,GAA6BC,UAAU,CAAC,MAAM;AAC1C,UAAI9R,gBAAgB,CAACuI,CAAD,CAAhB,KAAwBvG,SAAS,CAACS,GAAtC,EAA2C;AACvC,aAAKsN,aAAL,CAAmBlN,QAAQ,IAAI;AAC3BA,UAAAA,QAAQ,CAAC8H,cAAT;AACH,SAFD;AAGH;AACJ,KANsC,CAAvC;;AAOA,QAAI,CAAC,KAAK3F,WAAL,CAAiByH,EAAjB,CAAoB3N,UAAU,CAACiT,gBAAX,EAApB,CAAL,EAAyD;AACrD;AACH;;AACD,QAAIC,OAAO,GAAG,IAAd;;AACA,YAAQhS,gBAAgB,CAACuI,CAAD,CAAxB;AACI,WAAKvG,SAAS,CAACQ,IAAf;AACI,aAAKyP,aAAL,CAAmB;AACfnB,UAAAA,CAAC,EAAE;AADY,SAAnB;;AAGA;;AACJ,WAAK9O,SAAS,CAACM,EAAf;AACI,aAAK2P,aAAL,CAAmB;AACfnB,UAAAA,CAAC,EAAE,CAAC;AADW,SAAnB;;AAGA;;AACJ,WAAK9O,SAAS,CAACO,KAAf;AACI,aAAK0P,aAAL,CAAmB;AACfpB,UAAAA,CAAC,EAAE;AADY,SAAnB;;AAGA;;AACJ,WAAK7O,SAAS,CAACK,IAAf;AACI,aAAK4P,aAAL,CAAmB;AACfpB,UAAAA,CAAC,EAAE,CAAC;AADW,SAAnB;;AAGA;;AACJ,WAAK7O,SAAS,CAACE,SAAf;AACI,aAAKgQ,aAAL,CAAmB,CAAnB;;AACA;;AACJ,WAAKlQ,SAAS,CAACC,OAAf;AACI,aAAKiQ,aAAL,CAAmB,CAAC,CAApB;;AACA;;AACJ,WAAKlQ,SAAS,CAACI,IAAf;AACI,aAAK+P,aAAL;;AACA;;AACJ,WAAKnQ,SAAS,CAACG,GAAf;AACI,aAAKiQ,YAAL;;AACA;;AACJ;AACIJ,QAAAA,OAAO,GAAG,KAAV;AAlCR;;AAoCA,QAAIA,OAAJ,EAAa;AACTzJ,MAAAA,CAAC,CAAC8J,eAAF;AACA9J,MAAAA,CAAC,CAACmI,cAAF;AACH;AACJ,GA3NwC;AA4NzCuB,EAAAA,aAAa,EAAE,UAASK,KAAT,EAAgB;AAC3B,QAAIvB,gBAAgB,GAAG,KAAKC,uBAAL,EAAvB;;AACA,QAAIuB,YAAY,GAAG9Q,kBAAnB;;AACA,QAAIsP,gBAAJ,EAAsB;AAClBwB,MAAAA,YAAY,GAAGhR,IAAI,CAAC0B,GAAL,CAASsP,YAAY,GAAGxB,gBAAf,GAAkC,GAA3C,IAAkD,GAAjE;AACH;;AACD,SAAKyB,QAAL,CAAc;AACVC,MAAAA,GAAG,EAAE,CAACH,KAAK,CAACxB,CAAN,IAAW,CAAZ,IAAiB,CAACyB,YADb;AAEVG,MAAAA,IAAI,EAAE,CAACJ,KAAK,CAACzB,CAAN,IAAW,CAAZ,IAAiB,CAAC0B;AAFd,KAAd;AAIH,GAtOwC;AAuOzCL,EAAAA,aAAa,EAAE,UAASS,IAAT,EAAe;AAC1B,QAAItE,IAAI,GAAG,KAAKuE,UAAL,EAAX;;AACA,QAAIzL,SAAS,GAAG,KAAK0L,gBAAL,CAAsBxE,IAAtB,CAAhB;;AACA,QAAIuC,QAAQ,GAAG,EAAf;AACA,QAAIkC,MAAM,GAAG,YAAY3L,SAAZ,GAAwBvI,QAAxB,GAAmCD,SAAhD;AACAiS,IAAAA,QAAQ,CAACvC,IAAD,CAAR,GAAiBsE,IAAI,GAAG,CAACG,MAAM,CAAC,KAAK9N,WAAN,CAA/B;AACA,SAAKwN,QAAL,CAAc5B,QAAd;AACH,GA9OwC;AA+OzCiC,EAAAA,gBAAgB,EAAE,UAASxE,IAAT,EAAe;AAC7B,WAAO,WAAWA,IAAX,GAAkB,OAAlB,GAA4B,QAAnC;AACH,GAjPwC;AAkPzCgB,EAAAA,mBAAmB,EAAE,UAAS/K,SAAT,EAAoB;AACrC,WAAOA,SAAS,KAAKpD,UAAd,GAA2B,MAA3B,GAAoC,KAA3C;AACH,GApPwC;AAqPzCiR,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAI9D,IAAI,GAAG,KAAKuE,UAAL,EAAX;;AACA,QAAIhC,QAAQ,GAAG,EAAf;AACAA,IAAAA,QAAQ,CAACvC,IAAD,CAAR,GAAiB,CAAjB;;AACA,SAAKZ,UAAL,CAAgBsF,QAAhB,CAAyBnC,QAAzB;AACH,GA1PwC;AA2PzCwB,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAI/D,IAAI,GAAG,KAAKuE,UAAL,EAAX;;AACA,QAAIzL,SAAS,GAAG,KAAK0L,gBAAL,CAAsBxE,IAAtB,CAAhB;;AACA,QAAIuC,QAAQ,GAAG,EAAf;AACA,QAAIkC,MAAM,GAAG,YAAY3L,SAAZ,GAAwBvI,QAAxB,GAAmCD,SAAhD;AACAiS,IAAAA,QAAQ,CAACvC,IAAD,CAAR,GAAiByE,MAAM,CAAC,KAAKpL,SAAN,CAAN,GAAyBoL,MAAM,CAAC,KAAK9N,WAAN,CAAhD;;AACA,SAAKyI,UAAL,CAAgBsF,QAAhB,CAAyBnC,QAAzB;AACH,GAlQwC;AAmQzCoC,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAK3C,YAAL,GAAoB,KAAK4C,oBAAL,CAA0B,SAA1B,CAApB;AACA,SAAK9B,UAAL,GAAkB,KAAK8B,oBAAL,CAA0B,OAA1B,CAAlB;AACA,SAAKC,aAAL,GAAqB,KAAKD,oBAAL,CAA0B,WAA1B,CAArB;;AACA,SAAKE,sBAAL;AACH,GAxQwC;AAyQzCA,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKrH,aAAL,GAAqB,KAAKmH,oBAAL,CAA0B,UAA1B,CAArB;AACA,SAAKjL,aAAL,GAAqB,KAAKiL,oBAAL,CAA0B,UAA1B,CAArB;;AACA,SAAK1D,aAAL,CAAmB,eAAnB,EAAoC;AAChCtD,MAAAA,MAAM,EAAE,KAAKH,aADmB;AAEhCI,MAAAA,MAAM,EAAE,KAAKlE;AAFmB,KAApC;AAIH,GAhRwC;AAiRzCiL,EAAAA,oBAAoB,EAAE,UAASvO,UAAT,EAAqB;AACvC,QAAI0O,aAAa,GAAG,KAAKtF,qBAAL,CAA2BpJ,UAA3B,CAApB;;AACA,WAAO,MAAM;AACT0O,MAAAA,aAAa,CAACnU,MAAM,CAAC,KAAKoU,iBAAL,EAAD,EAA2BC,SAA3B,CAAP,CAAb;AACH,KAFD;AAGH,GAtRwC;AAuRzCD,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,QAAI;AACAE,MAAAA,UAAU,EAAEC,SADZ;AAEAC,MAAAA,QAAQ,EAAEC;AAFV,QAGA,KAAKlF,UAHT;;AAIA,QAAI/E,MAAM,GAAG,KAAKkK,gBAAL,EAAb;;AACA,SAAKC,aAAL,GAAqB;AACjBnB,MAAAA,GAAG,EAAEiB,SAAS,IAAIjK,MAAM,CAACgJ,GADR;AAEjBC,MAAAA,IAAI,EAAEc,SAAS,IAAI/J,MAAM,CAACiJ;AAFT,KAArB;AAIA,WAAO;AACHmB,MAAAA,KAAK,EAAE,KAAKhE,mBADT;AAEH0C,MAAAA,YAAY,EAAE,KAAKqB,aAFhB;AAGHE,MAAAA,WAAW,EAAEN,SAAS,IAAIA,SAAS,CAAC1G,WAAV,EAHvB;AAIHiH,MAAAA,YAAY,EAAEP,SAAS,IAAIA,SAAS,CAAC3G,WAAV,EAJxB;AAKHmH,MAAAA,UAAU,EAAEN,SAAS,IAAIA,SAAS,CAAC5G,WAAV,EALtB;AAMHmH,MAAAA,aAAa,EAAEP,SAAS,IAAIA,SAAS,CAAC7G,WAAV;AANzB,KAAP;AAQH,GAzSwC;;AA0SzC8G,EAAAA,gBAAgB,GAAG;AACf,WAAO;AACHlB,MAAAA,GAAG,EAAE,CAAC,KAAKvM,QAAL,GAAgBuM,GADnB;AAEHC,MAAAA,IAAI,EAAE,CAAC,KAAKxM,QAAL,GAAgBwM;AAFpB,KAAP;AAIH,GA/SwC;;AAgTzCnD,EAAAA,aAAa,EAAE,UAAS2E,SAAT,EAAoB;AAC/B,QAAIC,IAAI,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcf,SAAd,EAAyBc,KAAzB,CAA+B,CAA/B,CAAX;AACA,QAAIE,SAAS,GAAGjV,GAAG,CAAC,KAAKmP,UAAN,EAAkB3L,QAAQ,IAAIA,QAAQ,CAAC,MAAMqR,SAAN,GAAkB,SAAnB,CAAR,CAAsCK,KAAtC,CAA4C1R,QAA5C,EAAsDsR,IAAtD,CAA9B,CAAnB;AACA,WAAO3T,IAAI,CAAC+T,KAAL,CAAW1V,CAAX,EAAcyV,SAAd,EAAyBjK,OAAzB,EAAP;AACH,GApTwC;AAqTzCnE,EAAAA,QAAQ,EAAE,YAAW;AACjB,QAAIA,QAAQ,GAAGxG,MAAM,CAAC,KAAKgI,SAAN,CAArB;AACAxB,IAAAA,QAAQ,CAACuM,GAAT,IAAgB,KAAKzN,WAAL,CAAiBwP,SAAjB,EAAhB;AACAtO,IAAAA,QAAQ,CAACwM,IAAT,IAAiB,KAAK1N,WAAL,CAAiByP,UAAjB,EAAjB;AACA,WAAOvO,QAAP;AACH,GA1TwC;AA2TzCwO,EAAAA,eAAe,EAAE,YAAW;AACxB,SAAKnG,qBAAL;AACH,GA7TwC;AA8TzCA,EAAAA,qBAAqB,EAAE,YAAW;AAC9BxP,IAAAA,YAAY,CAACyS,GAAb,CAAiB,KAAK3K,SAAtB,EAAiC,IAAI4K,MAAJ,CAAW7Q,2BAAX,CAAjC;;AACA,QAAI,CAAC,KAAK+K,MAAL,CAAY,UAAZ,CAAD,IAA4B,KAAKgJ,YAAL,EAAhC,EAAqD;AACjD5V,MAAAA,YAAY,CAAC2S,EAAb,CAAgB,KAAK7K,SAArB,EAAgC9G,iBAAiB,CAAC,YAAD,EAAea,2BAAf,CAAjD,EAA8F,KAAKmM,mBAAL,CAAyBc,IAAzB,CAA8B,IAA9B,CAA9F;AACA9O,MAAAA,YAAY,CAAC2S,EAAb,CAAgB,KAAK7K,SAArB,EAAgC9G,iBAAiB,CAAC,YAAD,EAAea,2BAAf,CAAjD,EAA8F,KAAKqM,mBAAL,CAAyBY,IAAzB,CAA8B,IAA9B,CAA9F;AACH;AACJ,GApUwC;AAqUzC8G,EAAAA,YAAY,EAAE,YAAW;AACrB,WAAO,cAAc,KAAKhJ,MAAL,CAAY,eAAZ,CAArB;AACH,GAvUwC;AAwUzCoB,EAAAA,mBAAmB,EAAE,UAASxE,CAAT,EAAY;AAC7BA,IAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;AACAA,IAAAA,CAAC,CAACI,aAAF,GAAkBJ,CAAC,CAACI,aAAF,IAAmB,EAArC;;AACA,QAAI0E,gBAAgB,IAAI9E,CAAC,CAACI,aAAF,CAAgBiM,aAAxC,EAAuD;AACnD;AACH;;AACD,QAAIxH,iBAAJ,EAAuB;AACnBA,MAAAA,iBAAiB,CAACH,mBAAlB;AACH;;AACDG,IAAAA,iBAAiB,GAAG,IAApB;;AACA,SAAKmC,aAAL,CAAmB,aAAnB;;AACAhH,IAAAA,CAAC,CAACI,aAAF,CAAgBiM,aAAhB,GAAgC,IAAhC;AACH,GApVwC;AAqVzC3H,EAAAA,mBAAmB,EAAE,UAAS1E,CAAT,EAAY;AAC7B,QAAI6E,iBAAiB,KAAK,IAAtB,IAA8BC,gBAAgB,KAAKD,iBAAvD,EAA0E;AACtE;AACH;;AACD,SAAKmC,aAAL,CAAmB,aAAnB;;AACAnC,IAAAA,iBAAiB,GAAG,IAApB;;AACA,SAAK8D,mBAAL,CAAyB3I,CAAC,IAAIA,CAAC,CAACsM,aAAhC;AACH,GA5VwC;AA6VzC3D,EAAAA,mBAAmB,EAAE,UAASrI,MAAT,EAAiB;AAClC,QAAI,CAAC,KAAK8L,YAAL,EAAD,KAAyB,CAAC9L,MAAD,IAAWwE,gBAApC,CAAJ,EAA2D;AACvD;AACH;;AACD,QAAIzE,OAAO,GAAG/J,CAAC,CAACgK,MAAD,CAAf;AACA,QAAIiM,WAAW,GAAGlM,OAAO,CAAC+D,OAAR,CAAgB,IAAI8E,MAAJ,CAAW3Q,0BAAX,EAAuC,0BAAvC,CAAhB,CAAlB;AACA,QAAIiU,gBAAgB,GAAGD,WAAW,CAAClI,MAAZ,IAAsBkI,WAAW,CAACE,IAAZ,CAAiBrU,mBAAjB,CAA7C;;AACA,QAAIyM,iBAAiB,IAAIA,iBAAiB,KAAK2H,gBAA/C,EAAiE;AAC7D3H,MAAAA,iBAAiB,CAACH,mBAAlB;AACH;;AACD,QAAI8H,gBAAJ,EAAsB;AAClBA,MAAAA,gBAAgB,CAAChI,mBAAjB;AACH;AACJ,GA1WwC;AA2WzC7B,EAAAA,MAAM,EAAE,YAAW;AACf,QAAIoE,MAAM,GAAG,KAAKC,aAAL,CAAmB,QAAnB,EAA6BC,IAA7B,CAAkC,KAAK0D,aAAvC,CAAb;;AACA,WAAO1S,IAAI,CAAC8O,MAAD,EAASpP,WAAW,CAAC,MAAM;AAClC,UAAI+U,iBAAiB,GAAG,KAAKC,kBAAL,EAAxB;;AACA9U,MAAAA,WAAW,CAAC,MAAM;AACd,YAAI+U,cAAc,GAAGF,iBAAiB,CAACxB,QAAlB,GAA6B,OAA7B,GAAuC,EAA5D;AACA0B,QAAAA,cAAc,GAAGF,iBAAiB,CAAC1B,UAAlB,GAA+B,OAA/B,GAAyC4B,cAA1D;AACAA,QAAAA,cAAc,GAAGF,iBAAiB,CAACxB,QAAlB,IAA8BwB,iBAAiB,CAAC1B,UAAhD,GAA6D,MAA7D,GAAsE4B,cAAvF;;AACA,aAAKnQ,WAAL,CAAiBoH,GAAjB,CAAqB,aAArB,EAAoC+I,cAApC;AACH,OALU,CAAX;AAMA,aAAO3U,IAAI,GAAG6J,OAAP,EAAP;AACH,KAT8B,CAApB,CAAX;AAUH,GAvXwC;AAwXzC6K,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,QAAIjG,aAAa,GAAG,KAAKtD,MAAL,CAAY,eAAZ,CAApB;AACA,QAAIyJ,gBAAgB,GAAG,KAAK5G,UAAL,CAAgBvN,QAAhB,CAAvB;AACA,QAAIoU,kBAAkB,GAAG,KAAK7G,UAAL,CAAgBtN,UAAhB,CAAzB;AACA,WAAO;AACHuS,MAAAA,QAAQ,EAAE2B,gBAAgB,KAAKA,gBAAgB,CAAC9O,UAAjB,GAA8B,CAA9B,IAAmC2I,aAAxC,CADvB;AAEHsE,MAAAA,UAAU,EAAE8B,kBAAkB,KAAKA,kBAAkB,CAAC/O,UAAnB,GAAgC,CAAhC,IAAqC2I,aAA1C;AAF3B,KAAP;AAIH,GAhYwC;AAiYzCjE,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAKwD,UAAL,CAAgBtN,UAAhB,KAA+B,KAAKsN,UAAL,CAAgBtN,UAAhB,EAA4B8J,aAA5B,EAA/B;AACH,GAnYwC;AAoYzCsK,EAAAA,0BAA0B,EAAE,YAAW;AACnC,WAAO,KAAK3J,MAAL,CAAY,YAAZ,KAA6B,KAAKA,MAAL,CAAY,WAAZ,MAA6B1K,QAAjE;AACH,GAtYwC;AAuYzCsU,EAAAA,iBAAiB,EAAE,UAASC,uBAAT,EAAkC;AACjD,QAAIA,uBAAJ,EAA6B;AACzB,WAAKC,UAAL,GAAkB;AACdC,QAAAA,WAAW,EAAE,CADC;AAEdC,QAAAA,WAAW,EAAE,KAAK3Q,WAAL,CAAiB8B,GAAjB,CAAqB,CAArB,EAAwB6O,WAFvB;AAGdC,QAAAA,gBAAgB,EAAE,KAAKC,0BAAL;AAHJ,OAAlB;AAKH;;AACD,SAAK7K,aAAL;;AACA,QAAI,KAAKsK,0BAAL,EAAJ,EAAuC;AACnCpV,MAAAA,WAAW,CAAC,MAAM;AACd,YAAIuU,UAAU,GAAG,KAAKtJ,aAAL,GAAqBuH,IAArB,GAA4B,KAAK+C,UAAL,CAAgBC,WAA7D;;AACA,YAAIjB,UAAU,IAAI,CAAlB,EAAqB;AACjBA,UAAAA,UAAU,GAAG,CAAb;AACA,eAAKgB,UAAL,CAAgBC,WAAhB,GAA8B,KAAKvK,aAAL,GAAqBuH,IAAnD;AACH;;AACDtS,QAAAA,WAAW,CAAC,MAAM;AACd,cAAI,KAAKuT,gBAAL,GAAwBjB,IAAxB,KAAiC+B,UAArC,EAAiD;AAC7C,iBAAKgB,UAAL,CAAgBK,YAAhB,GAA+B,IAA/B;;AACA,iBAAKrI,UAAL,CAAgBsF,QAAhB,CAAyB;AACrBL,cAAAA,IAAI,EAAE+B;AADe,aAAzB;;AAGA,iBAAKgB,UAAL,CAAgBK,YAAhB,GAA+B,KAA/B;AACH;AACJ,SARU,CAAX;AASH,OAfU,CAAX;AAgBH;AACJ,GAlawC;AAmazCvE,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAI,KAAK+D,0BAAL,MAAqC,CAAC,KAAKG,UAAL,CAAgBK,YAA1D,EAAwE;AACpE,UAAI;AACAH,QAAAA,WAAW,EAAEA,WADb;AAEAlB,QAAAA,UAAU,EAAEA;AAFZ,UAGA,KAAKzP,WAAL,CAAiB8B,GAAjB,CAAqB,CAArB,CAHJ;;AAIA,UAAI8O,gBAAgB,GAAG,KAAKC,0BAAL,EAAvB;;AACA,UAAI,KAAKJ,UAAL,CAAgBG,gBAAhB,KAAqCA,gBAArC,IAAyD,KAAKH,UAAL,CAAgBE,WAAhB,KAAgCA,WAA7F,EAA0G;AACtG,aAAKF,UAAL,CAAgBC,WAAhB,GAA8B,KAAKvK,aAAL,GAAqBuH,IAArB,GAA4B+B,UAA1D;AACH;;AACD,WAAKgB,UAAL,CAAgBE,WAAhB,GAA8BA,WAA9B;AACA,WAAKF,UAAL,CAAgBG,gBAAhB,GAAmCA,gBAAnC;AACH;AACJ,GAhbwC;AAibzCC,EAAAA,0BAA0B,EAAE,YAAW;AACnC,WAAO1W,SAAS,KAAKD,SAAS,GAAG6R,gBAAjB,GAAoC,CAApD;AACH,GAnbwC;AAobzCyB,EAAAA,QAAQ,EAAE,UAAS5B,QAAT,EAAmB;AACzB,QAAIwE,gBAAgB,GAAG,KAAK5G,UAAL,CAAgBvN,QAAhB,CAAvB;AACA,QAAIoU,kBAAkB,GAAG,KAAK7G,UAAL,CAAgBtN,UAAhB,CAAzB;;AACA,QAAIkU,gBAAJ,EAAsB;AAClBxE,MAAAA,QAAQ,CAAC6B,GAAT,GAAe2C,gBAAgB,CAACnP,cAAjB,CAAgC2K,QAAQ,CAAC6B,GAAT,GAAe2C,gBAAgB,CAAClR,SAAhE,IAA6EkR,gBAAgB,CAAClR,SAA7G;AACH;;AACD,QAAImR,kBAAJ,EAAwB;AACpBzE,MAAAA,QAAQ,CAAC8B,IAAT,GAAgB2C,kBAAkB,CAACpP,cAAnB,CAAkC2K,QAAQ,CAAC8B,IAAT,GAAgB2C,kBAAkB,CAACnR,SAArE,IAAkFmR,kBAAkB,CAACnR,SAArH;AACH;;AACD,SAAK4L,kBAAL,CAAwB,IAAxB;;AACA,SAAKO,YAAL;;AACA,SAAKd,aAAL,CAAmB,UAAnB,EAA+B;AAC3BsB,MAAAA,CAAC,EAAED,QAAQ,CAAC8B,IADe;AAE3B5B,MAAAA,CAAC,EAAEF,QAAQ,CAAC6B;AAFe,KAA/B;;AAIA,SAAKtB,UAAL;;AACA,SAAKI,gBAAL;AACH,GArcwC;AAsczCwE,EAAAA,QAAQ,EAAE,UAASxN,CAAT,EAAY;AAClB,QAAI1I,mBAAmB,CAAC0I,CAAD,CAAnB,IAA0BtI,mBAAmB,CAACsI,CAAD,CAAjD,EAAsD;AAClD,aAAO,KAAP;AACH;;AACD,QAAI,KAAKoD,MAAL,CAAY,UAAZ,CAAJ,EAA6B;AACzB,aAAO,KAAP;AACH;;AACD,QAAI,KAAKA,MAAL,CAAY,eAAZ,CAAJ,EAAkC;AAC9B,aAAO,IAAP;AACH;;AACD,WAAO9L,mBAAmB,CAAC0I,CAAD,CAAnB,GAAyB,KAAKyN,cAAL,CAAoBzN,CAApB,CAAzB,GAAkD,KAAK0N,aAAL,CAAmB1N,CAAnB,CAAzD;AACH,GAjdwC;AAkdzCyN,EAAAA,cAAc,EAAE,UAASzN,CAAT,EAAY;AACxB,QAAI1F,QAAQ,GAAG,KAAK2L,UAAL,CAAgB,KAAK0H,eAAL,CAAqB3N,CAArB,CAAhB,CAAf;;AACA,QAAI4N,UAAU,GAAGtT,QAAQ,CAACgK,WAAT,EAAjB;;AACA,QAAIuJ,UAAU,GAAGvT,QAAQ,CAACiK,WAAT,EAAjB;;AACA,QAAIuJ,2BAA2B,GAAG,CAACF,UAAD,IAAe,CAACC,UAAlD;AACA,QAAIE,iBAAiB,GAAG,CAACH,UAAD,IAAe,CAACC,UAAxC;AACA,QAAIG,aAAa,GAAGJ,UAAU,IAAI5N,CAAC,CAAC5C,KAAF,GAAU,CAA5C;AACA,QAAI6Q,aAAa,GAAGJ,UAAU,IAAI7N,CAAC,CAAC5C,KAAF,GAAU,CAA5C;AACA,QAAI8Q,SAAS,GAAGJ,2BAA2B,KAAKC,iBAAiB,IAAIC,aAArB,IAAsCC,aAA3C,CAA3C;AACAC,IAAAA,SAAS,GAAGA,SAAS,IAAI,KAAK,CAAL,KAAW,KAAKC,mBAAzC;;AACA,QAAID,SAAJ,EAAe;AACX7E,MAAAA,YAAY,CAAC,KAAK8E,mBAAN,CAAZ;AACA,WAAKA,mBAAL,GAA2B5E,UAAU,CAAC,MAAM;AACxC,aAAK4E,mBAAL,GAA2B,KAAK,CAAhC;AACH,OAFoC,EAElChV,sBAFkC,CAArC;AAGH;;AACD,WAAO+U,SAAP;AACH,GAnewC;AAoezCR,EAAAA,aAAa,EAAE,UAAS1N,CAAT,EAAY;AACvB,QAAI,CAAC,KAAKoD,MAAL,CAAY,iBAAZ,CAAD,IAAmC,CAAC9M,CAAC,CAAC0J,CAAC,CAACM,MAAH,CAAD,CAAY8D,OAAZ,CAAoB,IAAI8E,MAAJ,CAAWzQ,0BAAX,CAApB,EAA4D4L,MAApG,EAA4G;AACxG,aAAO,KAAP;AACH;;AACD,WAAO,KAAKqB,iBAAL,EAAP;AACH,GAzewC;AA0ezC0I,EAAAA,YAAY,EAAE,UAASpO,CAAT,EAAY;AACtB,WAAO1I,mBAAmB,CAAC0I,CAAD,CAAnB,GAAyB,KAAK2N,eAAL,CAAqB3N,CAArB,CAAzB,GAAmD,KAAK0F,iBAAL,EAA1D;AACH,GA5ewC;AA6ezC2E,EAAAA,UAAU,EAAE,YAAW;AACnB,WAAO,KAAKsD,eAAL,OAA2BhV,UAA3B,GAAwC,MAAxC,GAAiD,KAAxD;AACH,GA/ewC;AAgfzCgV,EAAAA,eAAe,EAAE,UAAS3N,CAAT,EAAY;AACzB,YAAQ,KAAKoD,MAAL,CAAY,WAAZ,CAAR;AACI,WAAKzK,UAAL;AACI,eAAOA,UAAP;;AACJ,WAAKD,QAAL;AACI,eAAOA,QAAP;;AACJ;AACI,eAAOsH,CAAC,IAAIA,CAAC,CAACqO,QAAP,GAAkB1V,UAAlB,GAA+BD,QAAtC;AANR;AAQH,GAzfwC;AA0fzCkM,EAAAA,OAAO,EAAE,YAAW;AAChB,SAAKoD,YAAL;;AACA,QAAInD,iBAAiB,KAAK,IAA1B,EAAgC;AAC5BA,MAAAA,iBAAiB,GAAG,IAApB;AACH;;AACD,SAAKmC,aAAL,CAAmB,SAAnB;;AACA,SAAKsH,oBAAL;;AACA,SAAKhQ,SAAL,CAAeiQ,WAAf,CAA2BhW,0BAA3B;;AACA,SAAK+O,mBAAL,GAA2B,IAA3B;AACA+B,IAAAA,YAAY,CAAC,KAAK8E,mBAAN,CAAZ;AACA9E,IAAAA,YAAY,CAAC,KAAKC,qBAAN,CAAZ;AACH,GArgBwC;AAsgBzCgF,EAAAA,oBAAoB,EAAE,YAAW;AAC7B9X,IAAAA,YAAY,CAACyS,GAAb,CAAiB,KAAK3K,SAAtB,EAAiC,IAAI4K,MAAJ,CAAW7Q,2BAAX,CAAjC;AACA7B,IAAAA,YAAY,CAACyS,GAAb,CAAiB,KAAKxM,WAAtB,EAAmC,IAAIyM,MAAJ,CAAW5Q,6BAAX,CAAnC;AACH;AAzgBwC,CAAd,CAAxB","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scroll_view/ui.scrollable.simulated.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getHeight,\r\n    getWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    titleize\r\n} from \"../../core/utils/inflector\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport {\r\n    each,\r\n    map\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../core/utils/position\";\r\nimport {\r\n    resetPosition,\r\n    move,\r\n    locate\r\n} from \"../../animation/translator\";\r\nimport Class from \"../../core/class\";\r\nimport Animator from \"./animator\";\r\nimport {\r\n    isDxMouseWheelEvent,\r\n    addNamespace as addEventNamespace,\r\n    normalizeKeyName,\r\n    isCommandKeyPressed\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    deferUpdate,\r\n    deferUpdater,\r\n    deferRender,\r\n    deferRenderer,\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport Scrollbar from \"./ui.scrollbar\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nvar SCROLLABLE_SIMULATED = \"dxSimulatedScrollable\";\r\nvar SCROLLABLE_STRATEGY = \"dxScrollableStrategy\";\r\nvar SCROLLABLE_SIMULATED_CURSOR = SCROLLABLE_SIMULATED + \"Cursor\";\r\nvar SCROLLABLE_SIMULATED_KEYBOARD = SCROLLABLE_SIMULATED + \"Keyboard\";\r\nvar SCROLLABLE_SIMULATED_CLASS = \"dx-scrollable-simulated\";\r\nvar SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE = \"dx-scrollable-scrollbars-alwaysvisible\";\r\nvar SCROLLABLE_SCROLLBAR_CLASS = \"dx-scrollable-scrollbar\";\r\nvar VERTICAL = \"vertical\";\r\nvar HORIZONTAL = \"horizontal\";\r\nvar ACCELERATION = .92;\r\nvar OUT_BOUNDS_ACCELERATION = .5;\r\nvar MIN_VELOCITY_LIMIT = 1;\r\nvar FRAME_DURATION = Math.round(1e3 / 60);\r\nvar SCROLL_LINE_HEIGHT = 40;\r\nvar VALIDATE_WHEEL_TIMEOUT = 500;\r\nvar BOUNCE_MIN_VELOCITY_LIMIT = MIN_VELOCITY_LIMIT / 5;\r\nvar BOUNCE_DURATION = 400;\r\nvar BOUNCE_FRAMES = BOUNCE_DURATION / FRAME_DURATION;\r\nvar BOUNCE_ACCELERATION_SUM = (1 - Math.pow(ACCELERATION, BOUNCE_FRAMES)) / (1 - ACCELERATION);\r\nvar KEY_CODES = {\r\n    PAGE_UP: \"pageUp\",\r\n    PAGE_DOWN: \"pageDown\",\r\n    END: \"end\",\r\n    HOME: \"home\",\r\n    LEFT: \"leftArrow\",\r\n    UP: \"upArrow\",\r\n    RIGHT: \"rightArrow\",\r\n    DOWN: \"downArrow\",\r\n    TAB: \"tab\"\r\n};\r\nvar InertiaAnimator = Animator.inherit({\r\n    ctor: function(scroller) {\r\n        this.callBase();\r\n        this.scroller = scroller\r\n    },\r\n    VELOCITY_LIMIT: MIN_VELOCITY_LIMIT,\r\n    _isFinished: function() {\r\n        return Math.abs(this.scroller._velocity) <= this.VELOCITY_LIMIT\r\n    },\r\n    _step: function() {\r\n        this.scroller._scrollStep(this.scroller._velocity);\r\n        this.scroller._velocity *= this._acceleration()\r\n    },\r\n    _acceleration: function() {\r\n        return this.scroller._inBounds() ? ACCELERATION : OUT_BOUNDS_ACCELERATION\r\n    },\r\n    _complete: function() {\r\n        this.scroller._scrollComplete()\r\n    }\r\n});\r\nvar BounceAnimator = InertiaAnimator.inherit({\r\n    VELOCITY_LIMIT: BOUNCE_MIN_VELOCITY_LIMIT,\r\n    _isFinished: function() {\r\n        return this.scroller._crossBoundOnNextStep() || this.callBase()\r\n    },\r\n    _acceleration: function() {\r\n        return ACCELERATION\r\n    },\r\n    _complete: function() {\r\n        this.scroller._move(this.scroller._bounceLocation);\r\n        this.callBase()\r\n    }\r\n});\r\nexport var Scroller = Class.inherit({\r\n    ctor: function(options) {\r\n        this._initOptions(options);\r\n        this._initAnimators();\r\n        this._initScrollbar()\r\n    },\r\n    _initOptions: function(options) {\r\n        this._location = 0;\r\n        this._topReached = false;\r\n        this._bottomReached = false;\r\n        this._axis = options.direction === HORIZONTAL ? \"x\" : \"y\";\r\n        this._prop = options.direction === HORIZONTAL ? \"left\" : \"top\";\r\n        this._dimension = options.direction === HORIZONTAL ? \"width\" : \"height\";\r\n        this._scrollProp = options.direction === HORIZONTAL ? \"scrollLeft\" : \"scrollTop\";\r\n        each(options, (optionName, optionValue) => {\r\n            this[\"_\" + optionName] = optionValue\r\n        })\r\n    },\r\n    _initAnimators: function() {\r\n        this._inertiaAnimator = new InertiaAnimator(this);\r\n        this._bounceAnimator = new BounceAnimator(this)\r\n    },\r\n    _initScrollbar: function() {\r\n        this._scrollbar = new Scrollbar($(\"<div>\").appendTo(this._$container), {\r\n            direction: this._direction,\r\n            visible: this._scrollByThumb,\r\n            visibilityMode: this._visibilityModeNormalize(this._scrollbarVisible),\r\n            expandable: this._scrollByThumb\r\n        });\r\n        this._$scrollbar = this._scrollbar.$element()\r\n    },\r\n    _visibilityModeNormalize: function(mode) {\r\n        return true === mode ? \"onScroll\" : false === mode ? \"never\" : mode\r\n    },\r\n    _scrollStep: function(delta) {\r\n        var prevLocation = this._location;\r\n        this._location += delta;\r\n        this._suppressBounce();\r\n        this._move();\r\n        if (Math.abs(prevLocation - this._location) < 1) {\r\n            return\r\n        }\r\n        eventsEngine.triggerHandler(this._$container, {\r\n            type: \"scroll\"\r\n        })\r\n    },\r\n    _suppressBounce: function() {\r\n        if (this._bounceEnabled || this._inBounds(this._location)) {\r\n            return\r\n        }\r\n        this._velocity = 0;\r\n        this._location = this._boundLocation()\r\n    },\r\n    _boundLocation: function(location) {\r\n        location = void 0 !== location ? location : this._location;\r\n        return Math.max(Math.min(location, this._maxOffset), this._minOffset)\r\n    },\r\n    _move: function(location) {\r\n        this._location = void 0 !== location ? location * this._getScaleRatio() : this._location;\r\n        this._moveContent();\r\n        this._moveScrollbar()\r\n    },\r\n    _moveContent: function() {\r\n        var location = this._location;\r\n        this._$container[this._scrollProp](-location / this._getScaleRatio());\r\n        this._moveContentByTranslator(location)\r\n    },\r\n    _getScaleRatio: function() {\r\n        if (hasWindow() && !this._scaleRatio) {\r\n            var element = this._$element.get(0);\r\n            var realDimension = this._getRealDimension(element, this._dimension);\r\n            var baseDimension = this._getBaseDimension(element, this._dimension);\r\n            this._scaleRatio = Math.round(realDimension / baseDimension * 100) / 100\r\n        }\r\n        return this._scaleRatio || 1\r\n    },\r\n    _getRealDimension: function(element, dimension) {\r\n        return Math.round(getBoundingRect(element)[dimension])\r\n    },\r\n    _getBaseDimension: function(element, dimension) {\r\n        var dimensionName = \"offset\" + titleize(dimension);\r\n        return element[dimensionName]\r\n    },\r\n    _moveContentByTranslator: function(location) {\r\n        var translateOffset;\r\n        var minOffset = -this._maxScrollPropValue;\r\n        if (location > 0) {\r\n            translateOffset = location\r\n        } else if (location <= minOffset) {\r\n            translateOffset = location - minOffset\r\n        } else {\r\n            translateOffset = location % 1\r\n        }\r\n        if (this._translateOffset === translateOffset) {\r\n            return\r\n        }\r\n        var targetLocation = {};\r\n        targetLocation[this._prop] = translateOffset;\r\n        this._translateOffset = translateOffset;\r\n        if (0 === translateOffset) {\r\n            resetPosition(this._$content);\r\n            return\r\n        }\r\n        move(this._$content, targetLocation)\r\n    },\r\n    _moveScrollbar: function() {\r\n        this._scrollbar.moveTo(this._location)\r\n    },\r\n    _scrollComplete: function() {\r\n        if (this._inBounds()) {\r\n            this._hideScrollbar();\r\n            if (this._completeDeferred) {\r\n                this._completeDeferred.resolve()\r\n            }\r\n        }\r\n        this._scrollToBounds()\r\n    },\r\n    _scrollToBounds: function() {\r\n        if (this._inBounds()) {\r\n            return\r\n        }\r\n        this._bounceAction();\r\n        this._setupBounce();\r\n        this._bounceAnimator.start()\r\n    },\r\n    _setupBounce: function() {\r\n        var boundLocation = this._bounceLocation = this._boundLocation();\r\n        var bounceDistance = boundLocation - this._location;\r\n        this._velocity = bounceDistance / BOUNCE_ACCELERATION_SUM\r\n    },\r\n    _inBounds: function(location) {\r\n        location = void 0 !== location ? location : this._location;\r\n        return this._boundLocation(location) === location\r\n    },\r\n    _crossBoundOnNextStep: function() {\r\n        var location = this._location;\r\n        var nextLocation = location + this._velocity;\r\n        return location < this._minOffset && nextLocation >= this._minOffset || location > this._maxOffset && nextLocation <= this._maxOffset\r\n    },\r\n    _initHandler: function(e) {\r\n        this._stopScrolling();\r\n        this._prepareThumbScrolling(e)\r\n    },\r\n    _stopScrolling: deferRenderer((function() {\r\n        this._hideScrollbar();\r\n        this._inertiaAnimator.stop();\r\n        this._bounceAnimator.stop()\r\n    })),\r\n    _prepareThumbScrolling: function(e) {\r\n        if (isDxMouseWheelEvent(e.originalEvent)) {\r\n            return\r\n        }\r\n        var $target = $(e.originalEvent.target);\r\n        var scrollbarClicked = this._isScrollbar($target);\r\n        if (scrollbarClicked) {\r\n            this._moveToMouseLocation(e)\r\n        }\r\n        this._thumbScrolling = scrollbarClicked || this._isThumb($target);\r\n        this._crossThumbScrolling = !this._thumbScrolling && this._isAnyThumbScrolling($target);\r\n        if (this._thumbScrolling) {\r\n            this._scrollbar.feedbackOn()\r\n        }\r\n    },\r\n    _isThumbScrollingHandler: function($target) {\r\n        return this._isThumb($target)\r\n    },\r\n    _moveToMouseLocation: function(e) {\r\n        var mouseLocation = e[\"page\" + this._axis.toUpperCase()] - this._$element.offset()[this._prop];\r\n        var location = this._location + mouseLocation / this._containerToContentRatio() - getHeight(this._$container) / 2;\r\n        this._scrollStep(-Math.round(location))\r\n    },\r\n    _startHandler: function() {\r\n        this._showScrollbar()\r\n    },\r\n    _moveHandler: function(delta) {\r\n        if (this._crossThumbScrolling) {\r\n            return\r\n        }\r\n        if (this._thumbScrolling) {\r\n            delta[this._axis] = -Math.round(delta[this._axis] / this._containerToContentRatio())\r\n        }\r\n        this._scrollBy(delta)\r\n    },\r\n    _scrollBy: function(delta) {\r\n        delta = delta[this._axis];\r\n        if (!this._inBounds()) {\r\n            delta *= OUT_BOUNDS_ACCELERATION\r\n        }\r\n        this._scrollStep(delta)\r\n    },\r\n    _scrollByHandler: function(delta) {\r\n        this._scrollBy(delta);\r\n        this._scrollComplete()\r\n    },\r\n    _containerToContentRatio: function() {\r\n        return this._scrollbar.containerToContentRatio()\r\n    },\r\n    _endHandler: function(velocity) {\r\n        this._completeDeferred = new Deferred;\r\n        this._velocity = velocity[this._axis];\r\n        this._inertiaHandler();\r\n        this._resetThumbScrolling();\r\n        return this._completeDeferred.promise()\r\n    },\r\n    _inertiaHandler: function() {\r\n        this._suppressInertia();\r\n        this._inertiaAnimator.start()\r\n    },\r\n    _suppressInertia: function() {\r\n        if (!this._inertiaEnabled || this._thumbScrolling) {\r\n            this._velocity = 0\r\n        }\r\n    },\r\n    _resetThumbScrolling: function() {\r\n        this._thumbScrolling = false;\r\n        this._crossThumbScrolling = false\r\n    },\r\n    _stopHandler: function() {\r\n        if (this._thumbScrolling) {\r\n            this._scrollComplete()\r\n        }\r\n        this._resetThumbScrolling();\r\n        this._scrollToBounds()\r\n    },\r\n    _disposeHandler: function() {\r\n        this._stopScrolling();\r\n        this._$scrollbar.remove()\r\n    },\r\n    _updateHandler: function() {\r\n        this._update();\r\n        this._moveToBounds()\r\n    },\r\n    _update: function() {\r\n        this._stopScrolling();\r\n        return deferUpdate(() => {\r\n            this._resetScaleRatio();\r\n            this._updateLocation();\r\n            this._updateBounds();\r\n            this._updateScrollbar();\r\n            deferRender(() => {\r\n                this._moveScrollbar();\r\n                this._scrollbar.update()\r\n            })\r\n        })\r\n    },\r\n    _resetScaleRatio: function() {\r\n        this._scaleRatio = null\r\n    },\r\n    _updateLocation: function() {\r\n        this._location = (locate(this._$content)[this._prop] - this._$container[this._scrollProp]()) * this._getScaleRatio()\r\n    },\r\n    _updateBounds: function() {\r\n        this._maxOffset = this._getMaxOffset();\r\n        this._minOffset = this._getMinOffset()\r\n    },\r\n    _getMaxOffset: function() {\r\n        return 0\r\n    },\r\n    _getMinOffset: function() {\r\n        this._maxScrollPropValue = Math.max(this._contentSize() - this._containerSize(), 0);\r\n        return -this._maxScrollPropValue\r\n    },\r\n    _updateScrollbar: deferUpdater((function() {\r\n        var containerSize = this._containerSize();\r\n        var contentSize = this._contentSize();\r\n        var baseContainerSize = this._getBaseDimension(this._$container.get(0), this._dimension);\r\n        var baseContentSize = this._getBaseDimension(this._$content.get(0), this._dimension);\r\n        deferRender(() => {\r\n            this._scrollbar.option({\r\n                containerSize: containerSize,\r\n                contentSize: contentSize,\r\n                baseContainerSize: baseContainerSize,\r\n                baseContentSize: baseContentSize,\r\n                scaleRatio: this._getScaleRatio()\r\n            })\r\n        })\r\n    })),\r\n    _moveToBounds: deferRenderer(deferUpdater(deferRenderer((function() {\r\n        var location = this._boundLocation();\r\n        var locationChanged = location !== this._location;\r\n        this._location = location;\r\n        this._move();\r\n        if (locationChanged) {\r\n            this._scrollAction()\r\n        }\r\n    })))),\r\n    _createActionsHandler: function(actions) {\r\n        this._scrollAction = actions.scroll;\r\n        this._bounceAction = actions.bounce\r\n    },\r\n    _showScrollbar: function() {\r\n        this._scrollbar.option(\"visible\", true)\r\n    },\r\n    _hideScrollbar: function() {\r\n        this._scrollbar.option(\"visible\", false)\r\n    },\r\n    _containerSize: function() {\r\n        return this._getRealDimension(this._$container.get(0), this._dimension)\r\n    },\r\n    _contentSize: function() {\r\n        var isOverflowHidden = \"hidden\" === this._$content.css(\"overflow\" + this._axis.toUpperCase());\r\n        var contentSize = this._getRealDimension(this._$content.get(0), this._dimension);\r\n        if (!isOverflowHidden) {\r\n            var containerScrollSize = this._$content[0][\"scroll\" + titleize(this._dimension)] * this._getScaleRatio();\r\n            contentSize = Math.max(containerScrollSize, contentSize)\r\n        }\r\n        return contentSize\r\n    },\r\n    _validateEvent: function(e) {\r\n        var $target = $(e.originalEvent.target);\r\n        return this._isThumb($target) || this._isScrollbar($target) || this._isContent($target)\r\n    },\r\n    _isThumb: function($element) {\r\n        return this._scrollByThumb && this._scrollbar.isThumb($element)\r\n    },\r\n    _isScrollbar: function($element) {\r\n        return this._scrollByThumb && $element && $element.is(this._$scrollbar)\r\n    },\r\n    _isContent: function($element) {\r\n        return this._scrollByContent && !!$element.closest(this._$element).length\r\n    },\r\n    _reachedMin: function() {\r\n        return Math.round(this._location - this._minOffset) <= 0\r\n    },\r\n    _reachedMax: function() {\r\n        return Math.round(this._location - this._maxOffset) >= 0\r\n    },\r\n    _cursorEnterHandler: function() {\r\n        this._resetScaleRatio();\r\n        this._updateScrollbar();\r\n        this._scrollbar.cursorEnter()\r\n    },\r\n    _cursorLeaveHandler: function() {\r\n        this._scrollbar.cursorLeave()\r\n    },\r\n    dispose: noop\r\n});\r\nvar hoveredScrollable;\r\nvar activeScrollable;\r\nexport var SimulatedStrategy = Class.inherit({\r\n    ctor: function(scrollable) {\r\n        this._init(scrollable)\r\n    },\r\n    _init: function(scrollable) {\r\n        this._component = scrollable;\r\n        this._$element = scrollable.$element();\r\n        this._$container = $(scrollable.container());\r\n        this._$wrapper = scrollable._$wrapper;\r\n        this._$content = scrollable.$content();\r\n        this.option = scrollable.option.bind(scrollable);\r\n        this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\r\n        this._isLocked = scrollable._isLocked.bind(scrollable);\r\n        this._isDirection = scrollable._isDirection.bind(scrollable);\r\n        this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\r\n        this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable)\r\n    },\r\n    render: function() {\r\n        this._$element.addClass(SCROLLABLE_SIMULATED_CLASS);\r\n        this._createScrollers();\r\n        if (this.option(\"useKeyboard\")) {\r\n            this._$container.prop(\"tabIndex\", 0)\r\n        }\r\n        this._attachKeyboardHandler();\r\n        this._attachCursorHandlers()\r\n    },\r\n    _createScrollers: function() {\r\n        this._scrollers = {};\r\n        if (this._isDirection(HORIZONTAL)) {\r\n            this._createScroller(HORIZONTAL)\r\n        }\r\n        if (this._isDirection(VERTICAL)) {\r\n            this._createScroller(VERTICAL)\r\n        }\r\n        this._$element.toggleClass(SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE, \"always\" === this.option(\"showScrollbar\"))\r\n    },\r\n    _createScroller: function(direction) {\r\n        this._scrollers[direction] = new Scroller(this._scrollerOptions(direction))\r\n    },\r\n    _scrollerOptions: function(direction) {\r\n        return {\r\n            direction: direction,\r\n            $content: this._$content,\r\n            $container: this._$container,\r\n            $wrapper: this._$wrapper,\r\n            $element: this._$element,\r\n            scrollByContent: this.option(\"scrollByContent\"),\r\n            scrollByThumb: this.option(\"scrollByThumb\"),\r\n            scrollbarVisible: this.option(\"showScrollbar\"),\r\n            bounceEnabled: this.option(\"bounceEnabled\"),\r\n            inertiaEnabled: this.option(\"inertiaEnabled\"),\r\n            isAnyThumbScrolling: this._isAnyThumbScrolling.bind(this)\r\n        }\r\n    },\r\n    _applyScaleRatio: function(targetLocation) {\r\n        for (var direction in this._scrollers) {\r\n            var prop = this._getPropByDirection(direction);\r\n            if (isDefined(targetLocation[prop])) {\r\n                var scroller = this._scrollers[direction];\r\n                targetLocation[prop] *= scroller._getScaleRatio()\r\n            }\r\n        }\r\n        return targetLocation\r\n    },\r\n    _isAnyThumbScrolling: function($target) {\r\n        var result = false;\r\n        this._eventHandler(\"isThumbScrolling\", $target).done((function(isThumbScrollingVertical, isThumbScrollingHorizontal) {\r\n            result = isThumbScrollingVertical || isThumbScrollingHorizontal\r\n        }));\r\n        return result\r\n    },\r\n    handleInit: function(e) {\r\n        this._suppressDirections(e);\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"init\", e)\r\n    },\r\n    _suppressDirections: function(e) {\r\n        if (isDxMouseWheelEvent(e.originalEvent)) {\r\n            this._prepareDirections(true);\r\n            return\r\n        }\r\n        this._prepareDirections();\r\n        this._eachScroller((function(scroller, direction) {\r\n            var isValid = scroller._validateEvent(e);\r\n            this._validDirections[direction] = isValid\r\n        }))\r\n    },\r\n    _prepareDirections: function(value) {\r\n        value = value || false;\r\n        this._validDirections = {};\r\n        this._validDirections[HORIZONTAL] = value;\r\n        this._validDirections[VERTICAL] = value\r\n    },\r\n    _eachScroller: function(callback) {\r\n        callback = callback.bind(this);\r\n        each(this._scrollers, (function(direction, scroller) {\r\n            callback(scroller, direction)\r\n        }))\r\n    },\r\n    handleStart: function(e) {\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"start\").done(this._startAction)\r\n    },\r\n    _saveActive: function() {\r\n        activeScrollable = this\r\n    },\r\n    _resetActive: function() {\r\n        if (activeScrollable === this) {\r\n            activeScrollable = null\r\n        }\r\n    },\r\n    handleMove: function(e) {\r\n        if (this._isLocked()) {\r\n            e.cancel = true;\r\n            this._resetActive();\r\n            return\r\n        }\r\n        this._saveActive();\r\n        e.preventDefault && e.preventDefault();\r\n        this._adjustDistance(e, e.delta);\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"move\", e.delta)\r\n    },\r\n    _adjustDistance: function(e, distance) {\r\n        distance.x *= this._validDirections[HORIZONTAL];\r\n        distance.y *= this._validDirections[VERTICAL];\r\n        var devicePixelRatio = this._tryGetDevicePixelRatio();\r\n        if (devicePixelRatio && isDxMouseWheelEvent(e.originalEvent)) {\r\n            distance.x = Math.round(distance.x / devicePixelRatio * 100) / 100;\r\n            distance.y = Math.round(distance.y / devicePixelRatio * 100) / 100\r\n        }\r\n    },\r\n    _tryGetDevicePixelRatio: function() {\r\n        if (hasWindow()) {\r\n            return getWindow().devicePixelRatio\r\n        }\r\n    },\r\n    handleEnd: function(e) {\r\n        this._resetActive();\r\n        this._refreshCursorState(e.originalEvent && e.originalEvent.target);\r\n        this._adjustDistance(e, e.velocity);\r\n        this._eventForUserAction = e;\r\n        return this._eventHandler(\"end\", e.velocity).done(this._endAction)\r\n    },\r\n    handleCancel: function(e) {\r\n        this._resetActive();\r\n        this._eventForUserAction = e;\r\n        return this._eventHandler(\"end\", {\r\n            x: 0,\r\n            y: 0\r\n        })\r\n    },\r\n    handleStop: function() {\r\n        this._resetActive();\r\n        this._eventHandler(\"stop\")\r\n    },\r\n    handleScroll: function() {\r\n        this._updateRtlConfig();\r\n        this._scrollAction()\r\n    },\r\n    _attachKeyboardHandler: function() {\r\n        eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\r\n        if (!this.option(\"disabled\") && this.option(\"useKeyboard\")) {\r\n            eventsEngine.on(this._$element, addEventNamespace(\"keydown\", SCROLLABLE_SIMULATED_KEYBOARD), this._keyDownHandler.bind(this))\r\n        }\r\n    },\r\n    _keyDownHandler: function(e) {\r\n        clearTimeout(this._updateHandlerTimeout);\r\n        this._updateHandlerTimeout = setTimeout(() => {\r\n            if (normalizeKeyName(e) === KEY_CODES.TAB) {\r\n                this._eachScroller(scroller => {\r\n                    scroller._updateHandler()\r\n                })\r\n            }\r\n        });\r\n        if (!this._$container.is(domAdapter.getActiveElement())) {\r\n            return\r\n        }\r\n        var handled = true;\r\n        switch (normalizeKeyName(e)) {\r\n            case KEY_CODES.DOWN:\r\n                this._scrollByLine({\r\n                    y: 1\r\n                });\r\n                break;\r\n            case KEY_CODES.UP:\r\n                this._scrollByLine({\r\n                    y: -1\r\n                });\r\n                break;\r\n            case KEY_CODES.RIGHT:\r\n                this._scrollByLine({\r\n                    x: 1\r\n                });\r\n                break;\r\n            case KEY_CODES.LEFT:\r\n                this._scrollByLine({\r\n                    x: -1\r\n                });\r\n                break;\r\n            case KEY_CODES.PAGE_DOWN:\r\n                this._scrollByPage(1);\r\n                break;\r\n            case KEY_CODES.PAGE_UP:\r\n                this._scrollByPage(-1);\r\n                break;\r\n            case KEY_CODES.HOME:\r\n                this._scrollToHome();\r\n                break;\r\n            case KEY_CODES.END:\r\n                this._scrollToEnd();\r\n                break;\r\n            default:\r\n                handled = false\r\n        }\r\n        if (handled) {\r\n            e.stopPropagation();\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    _scrollByLine: function(lines) {\r\n        var devicePixelRatio = this._tryGetDevicePixelRatio();\r\n        var scrollOffset = SCROLL_LINE_HEIGHT;\r\n        if (devicePixelRatio) {\r\n            scrollOffset = Math.abs(scrollOffset / devicePixelRatio * 100) / 100\r\n        }\r\n        this.scrollBy({\r\n            top: (lines.y || 0) * -scrollOffset,\r\n            left: (lines.x || 0) * -scrollOffset\r\n        })\r\n    },\r\n    _scrollByPage: function(page) {\r\n        var prop = this._wheelProp();\r\n        var dimension = this._dimensionByProp(prop);\r\n        var distance = {};\r\n        var getter = \"width\" === dimension ? getWidth : getHeight;\r\n        distance[prop] = page * -getter(this._$container);\r\n        this.scrollBy(distance)\r\n    },\r\n    _dimensionByProp: function(prop) {\r\n        return \"left\" === prop ? \"width\" : \"height\"\r\n    },\r\n    _getPropByDirection: function(direction) {\r\n        return direction === HORIZONTAL ? \"left\" : \"top\"\r\n    },\r\n    _scrollToHome: function() {\r\n        var prop = this._wheelProp();\r\n        var distance = {};\r\n        distance[prop] = 0;\r\n        this._component.scrollTo(distance)\r\n    },\r\n    _scrollToEnd: function() {\r\n        var prop = this._wheelProp();\r\n        var dimension = this._dimensionByProp(prop);\r\n        var distance = {};\r\n        var getter = \"width\" === dimension ? getWidth : getHeight;\r\n        distance[prop] = getter(this._$content) - getter(this._$container);\r\n        this._component.scrollTo(distance)\r\n    },\r\n    createActions: function() {\r\n        this._startAction = this._createActionHandler(\"onStart\");\r\n        this._endAction = this._createActionHandler(\"onEnd\");\r\n        this._updateAction = this._createActionHandler(\"onUpdated\");\r\n        this._createScrollerActions()\r\n    },\r\n    _createScrollerActions: function() {\r\n        this._scrollAction = this._createActionHandler(\"onScroll\");\r\n        this._bounceAction = this._createActionHandler(\"onBounce\");\r\n        this._eventHandler(\"createActions\", {\r\n            scroll: this._scrollAction,\r\n            bounce: this._bounceAction\r\n        })\r\n    },\r\n    _createActionHandler: function(optionName) {\r\n        var actionHandler = this._createActionByOption(optionName);\r\n        return () => {\r\n            actionHandler(extend(this._createActionArgs(), arguments))\r\n        }\r\n    },\r\n    _createActionArgs: function() {\r\n        var {\r\n            horizontal: scrollerX,\r\n            vertical: scrollerY\r\n        } = this._scrollers;\r\n        var offset = this._getScrollOffset();\r\n        this._scrollOffset = {\r\n            top: scrollerY && offset.top,\r\n            left: scrollerX && offset.left\r\n        };\r\n        return {\r\n            event: this._eventForUserAction,\r\n            scrollOffset: this._scrollOffset,\r\n            reachedLeft: scrollerX && scrollerX._reachedMax(),\r\n            reachedRight: scrollerX && scrollerX._reachedMin(),\r\n            reachedTop: scrollerY && scrollerY._reachedMax(),\r\n            reachedBottom: scrollerY && scrollerY._reachedMin()\r\n        }\r\n    },\r\n    _getScrollOffset() {\r\n        return {\r\n            top: -this.location().top,\r\n            left: -this.location().left\r\n        }\r\n    },\r\n    _eventHandler: function(eventName) {\r\n        var args = [].slice.call(arguments).slice(1);\r\n        var deferreds = map(this._scrollers, scroller => scroller[\"_\" + eventName + \"Handler\"].apply(scroller, args));\r\n        return when.apply($, deferreds).promise()\r\n    },\r\n    location: function() {\r\n        var location = locate(this._$content);\r\n        location.top -= this._$container.scrollTop();\r\n        location.left -= this._$container.scrollLeft();\r\n        return location\r\n    },\r\n    disabledChanged: function() {\r\n        this._attachCursorHandlers()\r\n    },\r\n    _attachCursorHandlers: function() {\r\n        eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\r\n        if (!this.option(\"disabled\") && this._isHoverMode()) {\r\n            eventsEngine.on(this._$element, addEventNamespace(\"mouseenter\", SCROLLABLE_SIMULATED_CURSOR), this._cursorEnterHandler.bind(this));\r\n            eventsEngine.on(this._$element, addEventNamespace(\"mouseleave\", SCROLLABLE_SIMULATED_CURSOR), this._cursorLeaveHandler.bind(this))\r\n        }\r\n    },\r\n    _isHoverMode: function() {\r\n        return \"onHover\" === this.option(\"showScrollbar\")\r\n    },\r\n    _cursorEnterHandler: function(e) {\r\n        e = e || {};\r\n        e.originalEvent = e.originalEvent || {};\r\n        if (activeScrollable || e.originalEvent._hoverHandled) {\r\n            return\r\n        }\r\n        if (hoveredScrollable) {\r\n            hoveredScrollable._cursorLeaveHandler()\r\n        }\r\n        hoveredScrollable = this;\r\n        this._eventHandler(\"cursorEnter\");\r\n        e.originalEvent._hoverHandled = true\r\n    },\r\n    _cursorLeaveHandler: function(e) {\r\n        if (hoveredScrollable !== this || activeScrollable === hoveredScrollable) {\r\n            return\r\n        }\r\n        this._eventHandler(\"cursorLeave\");\r\n        hoveredScrollable = null;\r\n        this._refreshCursorState(e && e.relatedTarget)\r\n    },\r\n    _refreshCursorState: function(target) {\r\n        if (!this._isHoverMode() && (!target || activeScrollable)) {\r\n            return\r\n        }\r\n        var $target = $(target);\r\n        var $scrollable = $target.closest(\".\".concat(SCROLLABLE_SIMULATED_CLASS, \":not(.dx-state-disabled)\"));\r\n        var targetScrollable = $scrollable.length && $scrollable.data(SCROLLABLE_STRATEGY);\r\n        if (hoveredScrollable && hoveredScrollable !== targetScrollable) {\r\n            hoveredScrollable._cursorLeaveHandler()\r\n        }\r\n        if (targetScrollable) {\r\n            targetScrollable._cursorEnterHandler()\r\n        }\r\n    },\r\n    update: function() {\r\n        var result = this._eventHandler(\"update\").done(this._updateAction);\r\n        return when(result, deferUpdate(() => {\r\n            var allowedDirections = this._allowedDirections();\r\n            deferRender(() => {\r\n                var touchDirection = allowedDirections.vertical ? \"pan-x\" : \"\";\r\n                touchDirection = allowedDirections.horizontal ? \"pan-y\" : touchDirection;\r\n                touchDirection = allowedDirections.vertical && allowedDirections.horizontal ? \"none\" : touchDirection;\r\n                this._$container.css(\"touchAction\", touchDirection)\r\n            });\r\n            return when().promise()\r\n        }))\r\n    },\r\n    _allowedDirections: function() {\r\n        var bounceEnabled = this.option(\"bounceEnabled\");\r\n        var verticalScroller = this._scrollers[VERTICAL];\r\n        var horizontalScroller = this._scrollers[HORIZONTAL];\r\n        return {\r\n            vertical: verticalScroller && (verticalScroller._minOffset < 0 || bounceEnabled),\r\n            horizontal: horizontalScroller && (horizontalScroller._minOffset < 0 || bounceEnabled)\r\n        }\r\n    },\r\n    _updateBounds: function() {\r\n        this._scrollers[HORIZONTAL] && this._scrollers[HORIZONTAL]._updateBounds()\r\n    },\r\n    _isHorizontalAndRtlEnabled: function() {\r\n        return this.option(\"rtlEnabled\") && this.option(\"direction\") !== VERTICAL\r\n    },\r\n    updateRtlPosition: function(needInitializeRtlConfig) {\r\n        if (needInitializeRtlConfig) {\r\n            this._rtlConfig = {\r\n                scrollRight: 0,\r\n                clientWidth: this._$container.get(0).clientWidth,\r\n                windowPixelRatio: this._getWindowDevicePixelRatio()\r\n            }\r\n        }\r\n        this._updateBounds();\r\n        if (this._isHorizontalAndRtlEnabled()) {\r\n            deferUpdate(() => {\r\n                var scrollLeft = this._getMaxOffset().left - this._rtlConfig.scrollRight;\r\n                if (scrollLeft <= 0) {\r\n                    scrollLeft = 0;\r\n                    this._rtlConfig.scrollRight = this._getMaxOffset().left\r\n                }\r\n                deferRender(() => {\r\n                    if (this._getScrollOffset().left !== scrollLeft) {\r\n                        this._rtlConfig.skipUpdating = true;\r\n                        this._component.scrollTo({\r\n                            left: scrollLeft\r\n                        });\r\n                        this._rtlConfig.skipUpdating = false\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    },\r\n    _updateRtlConfig: function() {\r\n        if (this._isHorizontalAndRtlEnabled() && !this._rtlConfig.skipUpdating) {\r\n            var {\r\n                clientWidth: clientWidth,\r\n                scrollLeft: scrollLeft\r\n            } = this._$container.get(0);\r\n            var windowPixelRatio = this._getWindowDevicePixelRatio();\r\n            if (this._rtlConfig.windowPixelRatio === windowPixelRatio && this._rtlConfig.clientWidth === clientWidth) {\r\n                this._rtlConfig.scrollRight = this._getMaxOffset().left - scrollLeft\r\n            }\r\n            this._rtlConfig.clientWidth = clientWidth;\r\n            this._rtlConfig.windowPixelRatio = windowPixelRatio\r\n        }\r\n    },\r\n    _getWindowDevicePixelRatio: function() {\r\n        return hasWindow() ? getWindow().devicePixelRatio : 1\r\n    },\r\n    scrollBy: function(distance) {\r\n        var verticalScroller = this._scrollers[VERTICAL];\r\n        var horizontalScroller = this._scrollers[HORIZONTAL];\r\n        if (verticalScroller) {\r\n            distance.top = verticalScroller._boundLocation(distance.top + verticalScroller._location) - verticalScroller._location\r\n        }\r\n        if (horizontalScroller) {\r\n            distance.left = horizontalScroller._boundLocation(distance.left + horizontalScroller._location) - horizontalScroller._location\r\n        }\r\n        this._prepareDirections(true);\r\n        this._startAction();\r\n        this._eventHandler(\"scrollBy\", {\r\n            x: distance.left,\r\n            y: distance.top\r\n        });\r\n        this._endAction();\r\n        this._updateRtlConfig()\r\n    },\r\n    validate: function(e) {\r\n        if (isDxMouseWheelEvent(e) && isCommandKeyPressed(e)) {\r\n            return false\r\n        }\r\n        if (this.option(\"disabled\")) {\r\n            return false\r\n        }\r\n        if (this.option(\"bounceEnabled\")) {\r\n            return true\r\n        }\r\n        return isDxMouseWheelEvent(e) ? this._validateWheel(e) : this._validateMove(e)\r\n    },\r\n    _validateWheel: function(e) {\r\n        var scroller = this._scrollers[this._wheelDirection(e)];\r\n        var reachedMin = scroller._reachedMin();\r\n        var reachedMax = scroller._reachedMax();\r\n        var contentGreaterThanContainer = !reachedMin || !reachedMax;\r\n        var locatedNotAtBound = !reachedMin && !reachedMax;\r\n        var scrollFromMin = reachedMin && e.delta > 0;\r\n        var scrollFromMax = reachedMax && e.delta < 0;\r\n        var validated = contentGreaterThanContainer && (locatedNotAtBound || scrollFromMin || scrollFromMax);\r\n        validated = validated || void 0 !== this._validateWheelTimer;\r\n        if (validated) {\r\n            clearTimeout(this._validateWheelTimer);\r\n            this._validateWheelTimer = setTimeout(() => {\r\n                this._validateWheelTimer = void 0\r\n            }, VALIDATE_WHEEL_TIMEOUT)\r\n        }\r\n        return validated\r\n    },\r\n    _validateMove: function(e) {\r\n        if (!this.option(\"scrollByContent\") && !$(e.target).closest(\".\".concat(SCROLLABLE_SCROLLBAR_CLASS)).length) {\r\n            return false\r\n        }\r\n        return this._allowedDirection()\r\n    },\r\n    getDirection: function(e) {\r\n        return isDxMouseWheelEvent(e) ? this._wheelDirection(e) : this._allowedDirection()\r\n    },\r\n    _wheelProp: function() {\r\n        return this._wheelDirection() === HORIZONTAL ? \"left\" : \"top\"\r\n    },\r\n    _wheelDirection: function(e) {\r\n        switch (this.option(\"direction\")) {\r\n            case HORIZONTAL:\r\n                return HORIZONTAL;\r\n            case VERTICAL:\r\n                return VERTICAL;\r\n            default:\r\n                return e && e.shiftKey ? HORIZONTAL : VERTICAL\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._resetActive();\r\n        if (hoveredScrollable === this) {\r\n            hoveredScrollable = null\r\n        }\r\n        this._eventHandler(\"dispose\");\r\n        this._detachEventHandlers();\r\n        this._$element.removeClass(SCROLLABLE_SIMULATED_CLASS);\r\n        this._eventForUserAction = null;\r\n        clearTimeout(this._validateWheelTimer);\r\n        clearTimeout(this._updateHandlerTimeout)\r\n    },\r\n    _detachEventHandlers: function() {\r\n        eventsEngine.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\r\n        eventsEngine.off(this._$container, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD))\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}