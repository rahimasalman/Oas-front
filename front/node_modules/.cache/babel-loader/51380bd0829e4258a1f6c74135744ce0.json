{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/list/ui.list.edit.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { isTouchEvent } from \"../../events/utils/index\";\nimport { extend } from \"../../core/utils/extend\";\nimport GroupedEditStrategy from \"./ui.list.edit.strategy.grouped\";\nimport localizationMessage from \"../../localization/message\";\nimport EditProvider from \"./ui.list.edit.provider\";\nimport { ListBase } from \"./ui.list.base\";\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\nvar LIST_ITEM_RESPONSE_WAIT_CLASS = \"dx-list-item-response-wait\";\nvar ListEdit = ListBase.inherit({\n  _supportedKeys() {\n    var that = this;\n    var parent = this.callBase();\n\n    var moveFocusedItem = (e, moveUp) => {\n      var editStrategy = this._editStrategy;\n      var focusedElement = this.option(\"focusedElement\");\n      var focusedItemIndex = editStrategy.getNormalizedIndex(focusedElement);\n\n      var isLastIndexFocused = focusedItemIndex === this._getLastItemIndex();\n\n      if (isLastIndexFocused && this._isDataSourceLoading()) {\n        return;\n      }\n\n      if (e.shiftKey && that.option(\"itemDragging.allowReordering\")) {\n        var nextItemIndex = focusedItemIndex + (moveUp ? -1 : 1);\n        var $nextItem = editStrategy.getItemElement(nextItemIndex);\n        this.reorderItem(focusedElement, $nextItem);\n        this.scrollToItem(focusedElement);\n        e.preventDefault();\n      } else {\n        var editProvider = this._editProvider;\n        var isInternalMoving = editProvider.handleKeyboardEvents(focusedItemIndex, moveUp);\n\n        if (!isInternalMoving) {\n          moveUp ? parent.upArrow(e) : parent.downArrow(e);\n        }\n      }\n    };\n\n    return extend({}, parent, {\n      del: e => {\n        if (that.option(\"allowItemDeleting\")) {\n          e.preventDefault();\n          that.deleteItem(that.option(\"focusedElement\"));\n        }\n      },\n      upArrow: e => moveFocusedItem(e, true),\n      downArrow: e => moveFocusedItem(e),\n      enter: function (e) {\n        if (!this._editProvider.handleEnterPressing(e)) {\n          parent.enter.apply(this, arguments);\n        }\n      },\n      space: function (e) {\n        if (!this._editProvider.handleEnterPressing(e)) {\n          parent.space.apply(this, arguments);\n        }\n      }\n    });\n  },\n\n  _updateSelection() {\n    this._editProvider.afterItemsRendered();\n\n    this.callBase();\n  },\n\n  _getLastItemIndex() {\n    return this._itemElements().length - 1;\n  },\n\n  _refreshItemElements() {\n    this.callBase();\n\n    var excludedSelectors = this._editProvider.getExcludedItemSelectors();\n\n    if (excludedSelectors.length) {\n      this._itemElementsCache = this._itemElementsCache.not(excludedSelectors);\n    }\n  },\n\n  _isItemStrictEquals: function (item1, item2) {\n    var privateKey = item1 && item1.__dx_key__;\n\n    if (privateKey && !this.key() && this._selection.isItemSelected(privateKey)) {\n      return false;\n    }\n\n    return this.callBase(item1, item2);\n  },\n\n  _getDefaultOptions() {\n    return extend(this.callBase(), {\n      showSelectionControls: false,\n      selectionMode: \"none\",\n      selectAllMode: \"page\",\n      onSelectAllValueChanged: null,\n      selectAllText: localizationMessage.format(\"dxList-selectAll\"),\n      menuItems: [],\n      menuMode: \"context\",\n      allowItemDeleting: false,\n      itemDeleteMode: \"static\",\n      itemDragging: {}\n    });\n  },\n\n  _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: _device => \"ios\" === _device.platform,\n      options: {\n        menuMode: \"slide\",\n        itemDeleteMode: \"slideItem\"\n      }\n    }, {\n      device: {\n        platform: \"android\"\n      },\n      options: {\n        itemDeleteMode: \"swipe\"\n      }\n    }]);\n  },\n\n  _init() {\n    this.callBase();\n\n    this._initEditProvider();\n  },\n\n  _initDataSource() {\n    this.callBase();\n\n    if (!this._isPageSelectAll()) {\n      this._dataSource && this._dataSource.requireTotalCount(true);\n    }\n  },\n\n  _isPageSelectAll() {\n    return \"page\" === this.option(\"selectAllMode\");\n  },\n\n  _initEditProvider() {\n    this._editProvider = new EditProvider(this);\n  },\n\n  _disposeEditProvider() {\n    if (this._editProvider) {\n      this._editProvider.dispose();\n    }\n  },\n\n  _refreshEditProvider() {\n    this._disposeEditProvider();\n\n    this._initEditProvider();\n  },\n\n  _initEditStrategy() {\n    if (this.option(\"grouped\")) {\n      this._editStrategy = new GroupedEditStrategy(this);\n    } else {\n      this.callBase();\n    }\n  },\n\n  _initMarkup() {\n    this._refreshEditProvider();\n\n    this.callBase();\n  },\n\n  _renderItems() {\n    this.callBase(...arguments);\n\n    this._editProvider.afterItemsRendered();\n  },\n\n  _selectedItemClass: () => LIST_ITEM_SELECTED_CLASS,\n  _itemResponseWaitClass: () => LIST_ITEM_RESPONSE_WAIT_CLASS,\n\n  _itemClickHandler(e) {\n    var $itemElement = $(e.currentTarget);\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    var handledByEditProvider = this._editProvider.handleClick($itemElement, e);\n\n    if (handledByEditProvider) {\n      return;\n    }\n\n    this._saveSelectionChangeEvent(e);\n\n    this.callBase(...arguments);\n  },\n\n  _shouldFireContextMenuEvent() {\n    return this.callBase(...arguments) || this._editProvider.contextMenuHandlerExists();\n  },\n\n  _itemHoldHandler(e) {\n    var $itemElement = $(e.currentTarget);\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    var handledByEditProvider = isTouchEvent(e) && this._editProvider.handleContextMenu($itemElement, e);\n\n    if (handledByEditProvider) {\n      e.handledByEditProvider = true;\n      return;\n    }\n\n    this.callBase(...arguments);\n  },\n\n  _getItemContainer: function (changeData) {\n    if (this.option(\"grouped\")) {\n      var _this$_editStrategy$g;\n\n      var groupIndex = null === (_this$_editStrategy$g = this._editStrategy.getIndexByItemData(changeData)) || void 0 === _this$_editStrategy$g ? void 0 : _this$_editStrategy$g.group;\n      return this._getGroupContainerByIndex(groupIndex);\n    } else {\n      return this.callBase(changeData);\n    }\n  },\n\n  _itemContextMenuHandler(e) {\n    var $itemElement = $(e.currentTarget);\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    var handledByEditProvider = !e.handledByEditProvider && this._editProvider.handleContextMenu($itemElement, e);\n\n    if (handledByEditProvider) {\n      e.preventDefault();\n      return;\n    }\n\n    this.callBase(...arguments);\n  },\n\n  _postprocessRenderItem(args) {\n    this.callBase(...arguments);\n\n    this._editProvider.modifyItemElement(args);\n  },\n\n  _clean() {\n    this._disposeEditProvider();\n\n    this.callBase();\n  },\n\n  focusListItem(index) {\n    var $item = this._editStrategy.getItemElement(index);\n\n    this.option(\"focusedElement\", $item);\n    this.focus();\n    this.scrollToItem(this.option(\"focusedElement\"));\n  },\n\n  _optionChanged(args) {\n    switch (args.name) {\n      case \"selectAllMode\":\n        this._initDataSource();\n\n        this._dataSource.pageIndex(0);\n\n        this._dataSource.load();\n\n        break;\n\n      case \"grouped\":\n        this._clearSelectedItems();\n\n        delete this._renderingGroupIndex;\n\n        this._initEditStrategy();\n\n        this.callBase(args);\n        break;\n\n      case \"showSelectionControls\":\n      case \"menuItems\":\n      case \"menuMode\":\n      case \"allowItemDeleting\":\n      case \"itemDeleteMode\":\n      case \"itemDragging\":\n      case \"selectAllText\":\n        this._invalidate();\n\n        break;\n\n      case \"onSelectAllValueChanged\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n\n  selectAll() {\n    return this._selection.selectAll(this._isPageSelectAll());\n  },\n\n  unselectAll() {\n    return this._selection.deselectAll(this._isPageSelectAll());\n  },\n\n  isSelectAll() {\n    return this._selection.getSelectAllState(this._isPageSelectAll());\n  },\n\n  getFlatIndexByItemElement(itemElement) {\n    return this._itemElements().index(itemElement);\n  },\n\n  getItemElementByFlatIndex(flatIndex) {\n    var $itemElements = this._itemElements();\n\n    if (flatIndex < 0 || flatIndex >= $itemElements.length) {\n      return $();\n    }\n\n    return $itemElements.eq(flatIndex);\n  },\n\n  getItemByIndex(index) {\n    return this._editStrategy.getItemDataByIndex(index);\n  }\n\n});\nexport default ListEdit;","map":{"version":3,"sources":["/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/devextreme/esm/ui/list/ui.list.edit.js"],"names":["$","isTouchEvent","extend","GroupedEditStrategy","localizationMessage","EditProvider","ListBase","LIST_ITEM_SELECTED_CLASS","LIST_ITEM_RESPONSE_WAIT_CLASS","ListEdit","inherit","_supportedKeys","that","parent","callBase","moveFocusedItem","e","moveUp","editStrategy","_editStrategy","focusedElement","option","focusedItemIndex","getNormalizedIndex","isLastIndexFocused","_getLastItemIndex","_isDataSourceLoading","shiftKey","nextItemIndex","$nextItem","getItemElement","reorderItem","scrollToItem","preventDefault","editProvider","_editProvider","isInternalMoving","handleKeyboardEvents","upArrow","downArrow","del","deleteItem","enter","handleEnterPressing","apply","arguments","space","_updateSelection","afterItemsRendered","_itemElements","length","_refreshItemElements","excludedSelectors","getExcludedItemSelectors","_itemElementsCache","not","_isItemStrictEquals","item1","item2","privateKey","__dx_key__","key","_selection","isItemSelected","_getDefaultOptions","showSelectionControls","selectionMode","selectAllMode","onSelectAllValueChanged","selectAllText","format","menuItems","menuMode","allowItemDeleting","itemDeleteMode","itemDragging","_defaultOptionsRules","concat","device","_device","platform","options","_init","_initEditProvider","_initDataSource","_isPageSelectAll","_dataSource","requireTotalCount","_disposeEditProvider","dispose","_refreshEditProvider","_initEditStrategy","_initMarkup","_renderItems","_selectedItemClass","_itemResponseWaitClass","_itemClickHandler","$itemElement","currentTarget","is","handledByEditProvider","handleClick","_saveSelectionChangeEvent","_shouldFireContextMenuEvent","contextMenuHandlerExists","_itemHoldHandler","handleContextMenu","_getItemContainer","changeData","_this$_editStrategy$g","groupIndex","getIndexByItemData","group","_getGroupContainerByIndex","_itemContextMenuHandler","_postprocessRenderItem","args","modifyItemElement","_clean","focusListItem","index","$item","focus","_optionChanged","name","pageIndex","load","_clearSelectedItems","_renderingGroupIndex","_invalidate","selectAll","unselectAll","deselectAll","isSelectAll","getSelectAllState","getFlatIndexByItemElement","itemElement","getItemElementByFlatIndex","flatIndex","$itemElements","eq","getItemByIndex","getItemDataByIndex"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/list/ui.list.edit.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    isTouchEvent\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport GroupedEditStrategy from \"./ui.list.edit.strategy.grouped\";\r\nimport localizationMessage from \"../../localization/message\";\r\nimport EditProvider from \"./ui.list.edit.provider\";\r\nimport {\r\n    ListBase\r\n} from \"./ui.list.base\";\r\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\r\nvar LIST_ITEM_RESPONSE_WAIT_CLASS = \"dx-list-item-response-wait\";\r\nvar ListEdit = ListBase.inherit({\r\n    _supportedKeys() {\r\n        var that = this;\r\n        var parent = this.callBase();\r\n        var moveFocusedItem = (e, moveUp) => {\r\n            var editStrategy = this._editStrategy;\r\n            var focusedElement = this.option(\"focusedElement\");\r\n            var focusedItemIndex = editStrategy.getNormalizedIndex(focusedElement);\r\n            var isLastIndexFocused = focusedItemIndex === this._getLastItemIndex();\r\n            if (isLastIndexFocused && this._isDataSourceLoading()) {\r\n                return\r\n            }\r\n            if (e.shiftKey && that.option(\"itemDragging.allowReordering\")) {\r\n                var nextItemIndex = focusedItemIndex + (moveUp ? -1 : 1);\r\n                var $nextItem = editStrategy.getItemElement(nextItemIndex);\r\n                this.reorderItem(focusedElement, $nextItem);\r\n                this.scrollToItem(focusedElement);\r\n                e.preventDefault()\r\n            } else {\r\n                var editProvider = this._editProvider;\r\n                var isInternalMoving = editProvider.handleKeyboardEvents(focusedItemIndex, moveUp);\r\n                if (!isInternalMoving) {\r\n                    moveUp ? parent.upArrow(e) : parent.downArrow(e)\r\n                }\r\n            }\r\n        };\r\n        return extend({}, parent, {\r\n            del: e => {\r\n                if (that.option(\"allowItemDeleting\")) {\r\n                    e.preventDefault();\r\n                    that.deleteItem(that.option(\"focusedElement\"))\r\n                }\r\n            },\r\n            upArrow: e => moveFocusedItem(e, true),\r\n            downArrow: e => moveFocusedItem(e),\r\n            enter: function(e) {\r\n                if (!this._editProvider.handleEnterPressing(e)) {\r\n                    parent.enter.apply(this, arguments)\r\n                }\r\n            },\r\n            space: function(e) {\r\n                if (!this._editProvider.handleEnterPressing(e)) {\r\n                    parent.space.apply(this, arguments)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _updateSelection() {\r\n        this._editProvider.afterItemsRendered();\r\n        this.callBase()\r\n    },\r\n    _getLastItemIndex() {\r\n        return this._itemElements().length - 1\r\n    },\r\n    _refreshItemElements() {\r\n        this.callBase();\r\n        var excludedSelectors = this._editProvider.getExcludedItemSelectors();\r\n        if (excludedSelectors.length) {\r\n            this._itemElementsCache = this._itemElementsCache.not(excludedSelectors)\r\n        }\r\n    },\r\n    _isItemStrictEquals: function(item1, item2) {\r\n        var privateKey = item1 && item1.__dx_key__;\r\n        if (privateKey && !this.key() && this._selection.isItemSelected(privateKey)) {\r\n            return false\r\n        }\r\n        return this.callBase(item1, item2)\r\n    },\r\n    _getDefaultOptions() {\r\n        return extend(this.callBase(), {\r\n            showSelectionControls: false,\r\n            selectionMode: \"none\",\r\n            selectAllMode: \"page\",\r\n            onSelectAllValueChanged: null,\r\n            selectAllText: localizationMessage.format(\"dxList-selectAll\"),\r\n            menuItems: [],\r\n            menuMode: \"context\",\r\n            allowItemDeleting: false,\r\n            itemDeleteMode: \"static\",\r\n            itemDragging: {}\r\n        })\r\n    },\r\n    _defaultOptionsRules() {\r\n        return this.callBase().concat([{\r\n            device: _device => \"ios\" === _device.platform,\r\n            options: {\r\n                menuMode: \"slide\",\r\n                itemDeleteMode: \"slideItem\"\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"android\"\r\n            },\r\n            options: {\r\n                itemDeleteMode: \"swipe\"\r\n            }\r\n        }])\r\n    },\r\n    _init() {\r\n        this.callBase();\r\n        this._initEditProvider()\r\n    },\r\n    _initDataSource() {\r\n        this.callBase();\r\n        if (!this._isPageSelectAll()) {\r\n            this._dataSource && this._dataSource.requireTotalCount(true)\r\n        }\r\n    },\r\n    _isPageSelectAll() {\r\n        return \"page\" === this.option(\"selectAllMode\")\r\n    },\r\n    _initEditProvider() {\r\n        this._editProvider = new EditProvider(this)\r\n    },\r\n    _disposeEditProvider() {\r\n        if (this._editProvider) {\r\n            this._editProvider.dispose()\r\n        }\r\n    },\r\n    _refreshEditProvider() {\r\n        this._disposeEditProvider();\r\n        this._initEditProvider()\r\n    },\r\n    _initEditStrategy() {\r\n        if (this.option(\"grouped\")) {\r\n            this._editStrategy = new GroupedEditStrategy(this)\r\n        } else {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _initMarkup() {\r\n        this._refreshEditProvider();\r\n        this.callBase()\r\n    },\r\n    _renderItems() {\r\n        this.callBase(...arguments);\r\n        this._editProvider.afterItemsRendered()\r\n    },\r\n    _selectedItemClass: () => LIST_ITEM_SELECTED_CLASS,\r\n    _itemResponseWaitClass: () => LIST_ITEM_RESPONSE_WAIT_CLASS,\r\n    _itemClickHandler(e) {\r\n        var $itemElement = $(e.currentTarget);\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        var handledByEditProvider = this._editProvider.handleClick($itemElement, e);\r\n        if (handledByEditProvider) {\r\n            return\r\n        }\r\n        this._saveSelectionChangeEvent(e);\r\n        this.callBase(...arguments)\r\n    },\r\n    _shouldFireContextMenuEvent() {\r\n        return this.callBase(...arguments) || this._editProvider.contextMenuHandlerExists()\r\n    },\r\n    _itemHoldHandler(e) {\r\n        var $itemElement = $(e.currentTarget);\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        var handledByEditProvider = isTouchEvent(e) && this._editProvider.handleContextMenu($itemElement, e);\r\n        if (handledByEditProvider) {\r\n            e.handledByEditProvider = true;\r\n            return\r\n        }\r\n        this.callBase(...arguments)\r\n    },\r\n    _getItemContainer: function(changeData) {\r\n        if (this.option(\"grouped\")) {\r\n            var _this$_editStrategy$g;\r\n            var groupIndex = null === (_this$_editStrategy$g = this._editStrategy.getIndexByItemData(changeData)) || void 0 === _this$_editStrategy$g ? void 0 : _this$_editStrategy$g.group;\r\n            return this._getGroupContainerByIndex(groupIndex)\r\n        } else {\r\n            return this.callBase(changeData)\r\n        }\r\n    },\r\n    _itemContextMenuHandler(e) {\r\n        var $itemElement = $(e.currentTarget);\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        var handledByEditProvider = !e.handledByEditProvider && this._editProvider.handleContextMenu($itemElement, e);\r\n        if (handledByEditProvider) {\r\n            e.preventDefault();\r\n            return\r\n        }\r\n        this.callBase(...arguments)\r\n    },\r\n    _postprocessRenderItem(args) {\r\n        this.callBase(...arguments);\r\n        this._editProvider.modifyItemElement(args)\r\n    },\r\n    _clean() {\r\n        this._disposeEditProvider();\r\n        this.callBase()\r\n    },\r\n    focusListItem(index) {\r\n        var $item = this._editStrategy.getItemElement(index);\r\n        this.option(\"focusedElement\", $item);\r\n        this.focus();\r\n        this.scrollToItem(this.option(\"focusedElement\"))\r\n    },\r\n    _optionChanged(args) {\r\n        switch (args.name) {\r\n            case \"selectAllMode\":\r\n                this._initDataSource();\r\n                this._dataSource.pageIndex(0);\r\n                this._dataSource.load();\r\n                break;\r\n            case \"grouped\":\r\n                this._clearSelectedItems();\r\n                delete this._renderingGroupIndex;\r\n                this._initEditStrategy();\r\n                this.callBase(args);\r\n                break;\r\n            case \"showSelectionControls\":\r\n            case \"menuItems\":\r\n            case \"menuMode\":\r\n            case \"allowItemDeleting\":\r\n            case \"itemDeleteMode\":\r\n            case \"itemDragging\":\r\n            case \"selectAllText\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onSelectAllValueChanged\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    selectAll() {\r\n        return this._selection.selectAll(this._isPageSelectAll())\r\n    },\r\n    unselectAll() {\r\n        return this._selection.deselectAll(this._isPageSelectAll())\r\n    },\r\n    isSelectAll() {\r\n        return this._selection.getSelectAllState(this._isPageSelectAll())\r\n    },\r\n    getFlatIndexByItemElement(itemElement) {\r\n        return this._itemElements().index(itemElement)\r\n    },\r\n    getItemElementByFlatIndex(flatIndex) {\r\n        var $itemElements = this._itemElements();\r\n        if (flatIndex < 0 || flatIndex >= $itemElements.length) {\r\n            return $()\r\n        }\r\n        return $itemElements.eq(flatIndex)\r\n    },\r\n    getItemByIndex(index) {\r\n        return this._editStrategy.getItemDataByIndex(index)\r\n    }\r\n});\r\nexport default ListEdit;\r\n"]},"metadata":{},"sourceType":"module"}