{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/box.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport eventsEngine from \"../events/core/events_engine\";\nimport registerComponent from \"../core/component_registrator\";\nimport { extend } from \"../core/utils/extend\";\nimport { noop } from \"../core/utils/common\";\nimport { hasWindow } from \"../core/utils/window\";\nimport { dasherize } from \"../core/utils/inflector\";\nimport { isDefined } from \"../core/utils/type\";\nimport { normalizeStyleProp, styleProp, stylePropPrefix } from \"../core/utils/style\";\nimport { each } from \"../core/utils/iterator\";\nimport { getWidth, setWidth, getHeight, setHeight } from \"../core/utils/size\";\nimport CollectionWidgetItem from \"./collection/item\";\nimport CollectionWidget from \"./collection/ui.collection_widget.edit\";\nvar BOX_CLASS = \"dx-box\";\nvar BOX_SELECTOR = \".dx-box\";\nvar BOX_ITEM_CLASS = \"dx-box-item\";\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\nvar MINSIZE_MAP = {\n  row: \"minWidth\",\n  col: \"minHeight\"\n};\nvar MAXSIZE_MAP = {\n  row: \"maxWidth\",\n  col: \"maxHeight\"\n};\nvar SHRINK = 1;\nvar FLEX_JUSTIFY_CONTENT_MAP = {\n  start: \"flex-start\",\n  end: \"flex-end\",\n  center: \"center\",\n  \"space-between\": \"space-between\",\n  \"space-around\": \"space-around\"\n};\nvar FLEX_ALIGN_ITEMS_MAP = {\n  start: \"flex-start\",\n  end: \"flex-end\",\n  center: \"center\",\n  stretch: \"stretch\"\n};\nvar FLEX_DIRECTION_MAP = {\n  row: \"row\",\n  col: \"column\"\n};\n\nvar setFlexProp = (element, prop, value) => {\n  value = normalizeStyleProp(prop, value);\n  element.style[styleProp(prop)] = value;\n\n  if (!hasWindow()) {\n    if (\"\" === value || !isDefined(value)) {\n      return;\n    }\n\n    var cssName = dasherize(prop);\n    var styleExpr = cssName + \": \" + value + \";\";\n\n    if (!element.attributes.style) {\n      element.setAttribute(\"style\", styleExpr);\n    } else if (element.attributes.style.value.indexOf(styleExpr) < 0) {\n      element.attributes.style.value += \" \" + styleExpr;\n    }\n  }\n};\n\nvar BOX_EVENTNAMESPACE = \"dxBox\";\nvar UPDATE_EVENT = \"dxupdate.\" + BOX_EVENTNAMESPACE;\nvar FALLBACK_BOX_ITEM = \"dx-box-fallback-item\";\nvar FALLBACK_WRAP_MAP = {\n  row: \"nowrap\",\n  col: \"normal\"\n};\nvar FALLBACK_MAIN_SIZE_MAP = {\n  row: {\n    name: \"width\",\n    getter: getWidth,\n    setter: setWidth\n  },\n  col: {\n    name: \"height\",\n    getter: getHeight,\n    setter: setHeight\n  }\n};\nvar FALLBACK_CROSS_SIZE_MAP = {\n  row: FALLBACK_MAIN_SIZE_MAP.col,\n  col: FALLBACK_MAIN_SIZE_MAP.row\n};\nvar FALLBACK_PRE_MARGIN_MAP = {\n  row: \"marginLeft\",\n  col: \"marginTop\"\n};\nvar FALLBACK_POST_MARGIN_MAP = {\n  row: \"marginRight\",\n  col: \"marginBottom\"\n};\nvar FALLBACK_CROSS_PRE_MARGIN_MAP = {\n  row: \"marginTop\",\n  col: \"marginLeft\"\n};\nvar FALLBACK_CROSS_POST_MARGIN_MAP = {\n  row: \"marginBottom\",\n  col: \"marginRight\"\n};\nvar MARGINS_RTL_FLIP_MAP = {\n  marginLeft: \"marginRight\",\n  marginRight: \"marginLeft\"\n};\n\nclass BoxItem extends CollectionWidgetItem {\n  _renderVisible(value, oldValue) {\n    super._renderVisible(value);\n\n    if (isDefined(oldValue)) {\n      this._options.fireItemStateChangedAction({\n        name: \"visible\",\n        state: value,\n        oldState: oldValue\n      });\n    }\n  }\n\n}\n\nclass FlexLayoutStrategy {\n  constructor($element, option) {\n    this._$element = $element;\n    this._option = option;\n    this.initSize = noop;\n    this.update = noop;\n  }\n\n  renderBox() {\n    this._$element.css({\n      display: stylePropPrefix(\"flexDirection\") + \"flex\"\n    });\n\n    setFlexProp(this._$element.get(0), \"flexDirection\", FLEX_DIRECTION_MAP[this._option(\"direction\")]);\n  }\n\n  renderAlign() {\n    this._$element.css({\n      justifyContent: this._normalizedAlign()\n    });\n  }\n\n  _normalizedAlign() {\n    var align = this._option(\"align\");\n\n    return align in FLEX_JUSTIFY_CONTENT_MAP ? FLEX_JUSTIFY_CONTENT_MAP[align] : align;\n  }\n\n  renderCrossAlign() {\n    this._$element.css({\n      alignItems: this._normalizedCrossAlign()\n    });\n  }\n\n  _normalizedCrossAlign() {\n    var crossAlign = this._option(\"crossAlign\");\n\n    return crossAlign in FLEX_ALIGN_ITEMS_MAP ? FLEX_ALIGN_ITEMS_MAP[crossAlign] : crossAlign;\n  }\n\n  renderItems($items) {\n    var flexPropPrefix = stylePropPrefix(\"flexDirection\");\n\n    var direction = this._option(\"direction\");\n\n    each($items, function () {\n      var $item = $(this);\n      var item = $item.data(BOX_ITEM_DATA_KEY);\n      $item.css({\n        display: flexPropPrefix + \"flex\"\n      }).css(MAXSIZE_MAP[direction], item.maxSize || \"none\").css(MINSIZE_MAP[direction], item.minSize || \"0\");\n      setFlexProp($item.get(0), \"flexBasis\", item.baseSize || 0);\n      setFlexProp($item.get(0), \"flexGrow\", item.ratio);\n      setFlexProp($item.get(0), \"flexShrink\", isDefined(item.shrink) ? item.shrink : SHRINK);\n      $item.children().each((_, itemContent) => {\n        $(itemContent).css({\n          width: \"auto\",\n          height: \"auto\",\n          display: stylePropPrefix(\"flexDirection\") + \"flex\",\n          flexBasis: 0\n        });\n        setFlexProp(itemContent, \"flexGrow\", 1);\n        setFlexProp(itemContent, \"flexDirection\", $(itemContent)[0].style.flexDirection || \"column\");\n      });\n    });\n  }\n\n}\n\nclass FallbackLayoutStrategy {\n  constructor($element, option) {\n    this._$element = $element;\n    this._option = option;\n  }\n\n  renderBox() {\n    this._$element.css({\n      fontSize: 0,\n      whiteSpace: FALLBACK_WRAP_MAP[this._option(\"direction\")],\n      verticalAlign: \"top\"\n    });\n\n    eventsEngine.off(this._$element, UPDATE_EVENT);\n    eventsEngine.on(this._$element, UPDATE_EVENT, this.update.bind(this));\n  }\n\n  renderAlign() {\n    var $items = this._$items;\n\n    if (!$items) {\n      return;\n    }\n\n    var align = this._option(\"align\");\n\n    var totalItemSize = this.totalItemSize;\n\n    var direction = this._option(\"direction\");\n\n    var boxSize = FALLBACK_MAIN_SIZE_MAP[direction].getter(this._$element);\n    var freeSpace = boxSize - totalItemSize;\n    var shift = 0;\n\n    this._setItemsMargins($items, direction, 0);\n\n    switch (align) {\n      case \"start\":\n        break;\n\n      case \"end\":\n        shift = freeSpace;\n        $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\n        break;\n\n      case \"center\":\n        shift = .5 * freeSpace;\n        $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\n        $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\n        break;\n\n      case \"space-between\":\n        shift = .5 * freeSpace / ($items.length - 1);\n\n        this._setItemsMargins($items, direction, shift);\n\n        $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), 0);\n        $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), 0);\n        break;\n\n      case \"space-around\":\n        shift = .5 * freeSpace / $items.length;\n\n        this._setItemsMargins($items, direction, shift);\n\n    }\n  }\n\n  _setItemsMargins($items, direction, shift) {\n    $items.css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift).css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\n  }\n\n  renderCrossAlign() {\n    var $items = this._$items;\n\n    if (!$items) {\n      return;\n    }\n\n    var crossAlign = this._option(\"crossAlign\");\n\n    var direction = this._option(\"direction\");\n\n    var size = FALLBACK_CROSS_SIZE_MAP[direction].getter(this._$element);\n    var that = this;\n\n    switch (crossAlign) {\n      case \"start\":\n        break;\n\n      case \"end\":\n        each($items, function () {\n          var $item = $(this);\n          var itemSize = FALLBACK_CROSS_SIZE_MAP[direction].getter($item);\n          var shift = size - itemSize;\n          $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift);\n        });\n        break;\n\n      case \"center\":\n        each($items, function () {\n          var $item = $(this);\n          var itemSize = FALLBACK_CROSS_SIZE_MAP[direction].getter($item);\n          var shift = .5 * (size - itemSize);\n          $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), shift);\n        });\n        break;\n\n      case \"stretch\":\n        $items.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), 0).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), 0).css(FALLBACK_CROSS_SIZE_MAP[direction].name, \"100%\");\n    }\n  }\n\n  _chooseMarginSide(value) {\n    if (!this._option(\"rtlEnabled\")) {\n      return value;\n    }\n\n    return MARGINS_RTL_FLIP_MAP[value] || value;\n  }\n\n  renderItems($items) {\n    this._$items = $items;\n\n    var direction = this._option(\"direction\");\n\n    var totalRatio = 0;\n    var totalWeightedShrink = 0;\n    var totalBaseSize = 0;\n    each($items, (_, item) => {\n      var $item = $(item);\n      $item.css({\n        display: \"inline-block\",\n        verticalAlign: \"top\"\n      });\n      FALLBACK_MAIN_SIZE_MAP[direction].setter($item, \"auto\");\n      $item.removeClass(FALLBACK_BOX_ITEM);\n      var itemData = $item.data(BOX_ITEM_DATA_KEY);\n      var ratio = itemData.ratio || 0;\n\n      var size = this._baseSize($item);\n\n      var shrink = isDefined(itemData.shrink) ? itemData.shrink : SHRINK;\n      totalRatio += ratio;\n      totalWeightedShrink += shrink * size;\n      totalBaseSize += size;\n    });\n    var freeSpaceSize = this._boxSize() - totalBaseSize;\n\n    var itemSize = $item => {\n      var itemData = $item.data(BOX_ITEM_DATA_KEY);\n\n      var size = this._baseSize($item);\n\n      var factor = freeSpaceSize >= 0 ? itemData.ratio || 0 : (isDefined(itemData.shrink) ? itemData.shrink : SHRINK) * size;\n      var totalFactor = freeSpaceSize >= 0 ? totalRatio : totalWeightedShrink;\n      var shift = totalFactor ? Math.round(freeSpaceSize * factor / totalFactor) : 0;\n      return size + shift;\n    };\n\n    var totalItemSize = 0;\n    each($items, (_, item) => {\n      var $item = $(item);\n      var itemData = $(item).data(BOX_ITEM_DATA_KEY);\n      var size = itemSize($item);\n      totalItemSize += size;\n      $item.css(MAXSIZE_MAP[direction], itemData.maxSize || \"none\").css(MINSIZE_MAP[direction], itemData.minSize || \"0\").css(FALLBACK_MAIN_SIZE_MAP[direction].name, size);\n      $item.addClass(FALLBACK_BOX_ITEM);\n    });\n    this.totalItemSize = totalItemSize;\n  }\n\n  _baseSize(item) {\n    var itemData = $(item).data(BOX_ITEM_DATA_KEY);\n    return null == itemData.baseSize ? 0 : \"auto\" === itemData.baseSize ? this._contentSize(item) : this._parseSize(itemData.baseSize);\n  }\n\n  _contentSize(item) {\n    return FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")].getter($(item));\n  }\n\n  _parseSize(size) {\n    return String(size).match(/.+%$/) ? .01 * parseFloat(size) * this._boxSizeValue : size;\n  }\n\n  _boxSize(value) {\n    if (!arguments.length) {\n      this._boxSizeValue = this._boxSizeValue || this._totalBaseSize();\n      return this._boxSizeValue;\n    }\n\n    this._boxSizeValue = value;\n  }\n\n  _totalBaseSize() {\n    var result = 0;\n    each(this._$items, (_, item) => {\n      result += this._baseSize(item);\n    });\n    return result;\n  }\n\n  initSize() {\n    this._boxSize(FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")].getter(this._$element));\n  }\n\n  update() {\n    if (!this._$items || this._$element.is(\":hidden\")) {\n      return;\n    }\n\n    this._$items.detach();\n\n    this.initSize();\n\n    this._$element.append(this._$items);\n\n    this.renderItems(this._$items);\n    this.renderAlign();\n    this.renderCrossAlign();\n\n    var element = this._$element.get(0);\n\n    this._$items.find(BOX_SELECTOR).each(function () {\n      if (element === $(this).parent().closest(BOX_SELECTOR).get(0)) {\n        eventsEngine.triggerHandler(this, UPDATE_EVENT);\n      }\n    });\n  }\n\n}\n\nclass Box extends CollectionWidget {\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      direction: \"row\",\n      align: \"start\",\n      crossAlign: \"stretch\",\n      activeStateEnabled: false,\n      focusStateEnabled: false,\n      onItemStateChanged: void 0,\n      _layoutStrategy: \"flex\",\n      _queue: void 0\n    });\n  }\n\n  _itemClass() {\n    return BOX_ITEM_CLASS;\n  }\n\n  _itemDataKey() {\n    return BOX_ITEM_DATA_KEY;\n  }\n\n  _itemElements() {\n    return this._itemContainer().children(this._itemSelector());\n  }\n\n  _init() {\n    super._init();\n\n    this.$element().addClass(\"\".concat(BOX_CLASS, \"-\").concat(this.option(\"_layoutStrategy\")));\n\n    this._initLayout();\n\n    this._initBoxQueue();\n  }\n\n  _initLayout() {\n    this._layout = \"fallback\" === this.option(\"_layoutStrategy\") ? new FallbackLayoutStrategy(this.$element(), this.option.bind(this)) : new FlexLayoutStrategy(this.$element(), this.option.bind(this));\n  }\n\n  _initBoxQueue() {\n    this._queue = this.option(\"_queue\") || [];\n  }\n\n  _queueIsNotEmpty() {\n    return this.option(\"_queue\") ? false : !!this._queue.length;\n  }\n\n  _pushItemToQueue($item, config) {\n    this._queue.push({\n      $item: $item,\n      config: config\n    });\n  }\n\n  _shiftItemFromQueue() {\n    return this._queue.shift();\n  }\n\n  _initMarkup() {\n    this.$element().addClass(BOX_CLASS);\n\n    this._layout.renderBox();\n\n    super._initMarkup();\n\n    this._renderAlign();\n\n    this._renderActions();\n  }\n\n  _renderActions() {\n    this._onItemStateChanged = this._createActionByOption(\"onItemStateChanged\");\n  }\n\n  _renderAlign() {\n    this._layout.renderAlign();\n\n    this._layout.renderCrossAlign();\n  }\n\n  _renderItems(items) {\n    this._layout.initSize();\n\n    super._renderItems(items);\n\n    while (this._queueIsNotEmpty()) {\n      var item = this._shiftItemFromQueue();\n\n      this._createComponent(item.$item, Box, extend({\n        _layoutStrategy: this.option(\"_layoutStrategy\"),\n        itemTemplate: this.option(\"itemTemplate\"),\n        itemHoldTimeout: this.option(\"itemHoldTimeout\"),\n        onItemHold: this.option(\"onItemHold\"),\n        onItemClick: this.option(\"onItemClick\"),\n        onItemContextMenu: this.option(\"onItemContextMenu\"),\n        onItemRendered: this.option(\"onItemRendered\"),\n        _queue: this._queue\n      }, item.config));\n    }\n\n    this._layout.renderItems(this._itemElements());\n\n    clearTimeout(this._updateTimer);\n    this._updateTimer = setTimeout(() => {\n      if (!this._isUpdated) {\n        this._layout.update();\n      }\n\n      this._isUpdated = false;\n      this._updateTimer = null;\n    });\n  }\n\n  _renderItemContent(args) {\n    var $itemNode = args.itemData && args.itemData.node;\n\n    if ($itemNode) {\n      return this._renderItemContentByNode(args, $itemNode);\n    }\n\n    return super._renderItemContent(args);\n  }\n\n  _postprocessRenderItem(args) {\n    var boxConfig = args.itemData.box;\n\n    if (!boxConfig) {\n      return;\n    }\n\n    this._pushItemToQueue(args.itemContent, boxConfig);\n  }\n\n  _createItemByTemplate(itemTemplate, args) {\n    if (args.itemData.box) {\n      return itemTemplate.source ? itemTemplate.source() : $();\n    }\n\n    return super._createItemByTemplate(itemTemplate, args);\n  }\n\n  _visibilityChanged(visible) {\n    if (visible) {\n      this._dimensionChanged();\n    }\n  }\n\n  _dimensionChanged() {\n    if (this._updateTimer) {\n      return;\n    }\n\n    this._isUpdated = true;\n\n    this._layout.update();\n  }\n\n  _dispose() {\n    clearTimeout(this._updateTimer);\n\n    super._dispose.apply(this, arguments);\n  }\n\n  _itemOptionChanged(item, property, value, oldValue) {\n    if (\"visible\" === property) {\n      this._onItemStateChanged({\n        name: property,\n        state: value,\n        oldState: false !== oldValue\n      });\n    }\n\n    super._itemOptionChanged(item, property, value);\n  }\n\n  _optionChanged(args) {\n    switch (args.name) {\n      case \"_layoutStrategy\":\n      case \"_queue\":\n      case \"direction\":\n        this._invalidate();\n\n        break;\n\n      case \"align\":\n        this._layout.renderAlign();\n\n        break;\n\n      case \"crossAlign\":\n        this._layout.renderCrossAlign();\n\n        break;\n\n      default:\n        super._optionChanged(args);\n\n    }\n  }\n\n  _itemOptions() {\n    var options = super._itemOptions();\n\n    options.fireItemStateChangedAction = e => {\n      this._onItemStateChanged(e);\n    };\n\n    return options;\n  }\n\n  repaint() {\n    this._dimensionChanged();\n  }\n\n}\n\nBox.ItemClass = BoxItem;\nregisterComponent(\"dxBox\", Box);\nexport default Box;","map":{"version":3,"sources":["/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/devextreme/esm/ui/box.js"],"names":["$","eventsEngine","registerComponent","extend","noop","hasWindow","dasherize","isDefined","normalizeStyleProp","styleProp","stylePropPrefix","each","getWidth","setWidth","getHeight","setHeight","CollectionWidgetItem","CollectionWidget","BOX_CLASS","BOX_SELECTOR","BOX_ITEM_CLASS","BOX_ITEM_DATA_KEY","MINSIZE_MAP","row","col","MAXSIZE_MAP","SHRINK","FLEX_JUSTIFY_CONTENT_MAP","start","end","center","FLEX_ALIGN_ITEMS_MAP","stretch","FLEX_DIRECTION_MAP","setFlexProp","element","prop","value","style","cssName","styleExpr","attributes","setAttribute","indexOf","BOX_EVENTNAMESPACE","UPDATE_EVENT","FALLBACK_BOX_ITEM","FALLBACK_WRAP_MAP","FALLBACK_MAIN_SIZE_MAP","name","getter","setter","FALLBACK_CROSS_SIZE_MAP","FALLBACK_PRE_MARGIN_MAP","FALLBACK_POST_MARGIN_MAP","FALLBACK_CROSS_PRE_MARGIN_MAP","FALLBACK_CROSS_POST_MARGIN_MAP","MARGINS_RTL_FLIP_MAP","marginLeft","marginRight","BoxItem","_renderVisible","oldValue","_options","fireItemStateChangedAction","state","oldState","FlexLayoutStrategy","constructor","$element","option","_$element","_option","initSize","update","renderBox","css","display","get","renderAlign","justifyContent","_normalizedAlign","align","renderCrossAlign","alignItems","_normalizedCrossAlign","crossAlign","renderItems","$items","flexPropPrefix","direction","$item","item","data","maxSize","minSize","baseSize","ratio","shrink","children","_","itemContent","width","height","flexBasis","flexDirection","FallbackLayoutStrategy","fontSize","whiteSpace","verticalAlign","off","on","bind","_$items","totalItemSize","boxSize","freeSpace","shift","_setItemsMargins","first","_chooseMarginSide","last","length","size","that","itemSize","totalRatio","totalWeightedShrink","totalBaseSize","removeClass","itemData","_baseSize","freeSpaceSize","_boxSize","factor","totalFactor","Math","round","addClass","_contentSize","_parseSize","String","match","parseFloat","_boxSizeValue","arguments","_totalBaseSize","result","is","detach","append","find","parent","closest","triggerHandler","Box","_getDefaultOptions","activeStateEnabled","focusStateEnabled","onItemStateChanged","_layoutStrategy","_queue","_itemClass","_itemDataKey","_itemElements","_itemContainer","_itemSelector","_init","concat","_initLayout","_initBoxQueue","_layout","_queueIsNotEmpty","_pushItemToQueue","config","push","_shiftItemFromQueue","_initMarkup","_renderAlign","_renderActions","_onItemStateChanged","_createActionByOption","_renderItems","items","_createComponent","itemTemplate","itemHoldTimeout","onItemHold","onItemClick","onItemContextMenu","onItemRendered","clearTimeout","_updateTimer","setTimeout","_isUpdated","_renderItemContent","args","$itemNode","node","_renderItemContentByNode","_postprocessRenderItem","boxConfig","box","_createItemByTemplate","source","_visibilityChanged","visible","_dimensionChanged","_dispose","apply","_itemOptionChanged","property","_optionChanged","_invalidate","_itemOptions","options","e","repaint","ItemClass"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/box.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    noop\r\n} from \"../core/utils/common\";\r\nimport {\r\n    hasWindow\r\n} from \"../core/utils/window\";\r\nimport {\r\n    dasherize\r\n} from \"../core/utils/inflector\";\r\nimport {\r\n    isDefined\r\n} from \"../core/utils/type\";\r\nimport {\r\n    normalizeStyleProp,\r\n    styleProp,\r\n    stylePropPrefix\r\n} from \"../core/utils/style\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    getWidth,\r\n    setWidth,\r\n    getHeight,\r\n    setHeight\r\n} from \"../core/utils/size\";\r\nimport CollectionWidgetItem from \"./collection/item\";\r\nimport CollectionWidget from \"./collection/ui.collection_widget.edit\";\r\nvar BOX_CLASS = \"dx-box\";\r\nvar BOX_SELECTOR = \".dx-box\";\r\nvar BOX_ITEM_CLASS = \"dx-box-item\";\r\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\r\nvar MINSIZE_MAP = {\r\n    row: \"minWidth\",\r\n    col: \"minHeight\"\r\n};\r\nvar MAXSIZE_MAP = {\r\n    row: \"maxWidth\",\r\n    col: \"maxHeight\"\r\n};\r\nvar SHRINK = 1;\r\nvar FLEX_JUSTIFY_CONTENT_MAP = {\r\n    start: \"flex-start\",\r\n    end: \"flex-end\",\r\n    center: \"center\",\r\n    \"space-between\": \"space-between\",\r\n    \"space-around\": \"space-around\"\r\n};\r\nvar FLEX_ALIGN_ITEMS_MAP = {\r\n    start: \"flex-start\",\r\n    end: \"flex-end\",\r\n    center: \"center\",\r\n    stretch: \"stretch\"\r\n};\r\nvar FLEX_DIRECTION_MAP = {\r\n    row: \"row\",\r\n    col: \"column\"\r\n};\r\nvar setFlexProp = (element, prop, value) => {\r\n    value = normalizeStyleProp(prop, value);\r\n    element.style[styleProp(prop)] = value;\r\n    if (!hasWindow()) {\r\n        if (\"\" === value || !isDefined(value)) {\r\n            return\r\n        }\r\n        var cssName = dasherize(prop);\r\n        var styleExpr = cssName + \": \" + value + \";\";\r\n        if (!element.attributes.style) {\r\n            element.setAttribute(\"style\", styleExpr)\r\n        } else if (element.attributes.style.value.indexOf(styleExpr) < 0) {\r\n            element.attributes.style.value += \" \" + styleExpr\r\n        }\r\n    }\r\n};\r\nvar BOX_EVENTNAMESPACE = \"dxBox\";\r\nvar UPDATE_EVENT = \"dxupdate.\" + BOX_EVENTNAMESPACE;\r\nvar FALLBACK_BOX_ITEM = \"dx-box-fallback-item\";\r\nvar FALLBACK_WRAP_MAP = {\r\n    row: \"nowrap\",\r\n    col: \"normal\"\r\n};\r\nvar FALLBACK_MAIN_SIZE_MAP = {\r\n    row: {\r\n        name: \"width\",\r\n        getter: getWidth,\r\n        setter: setWidth\r\n    },\r\n    col: {\r\n        name: \"height\",\r\n        getter: getHeight,\r\n        setter: setHeight\r\n    }\r\n};\r\nvar FALLBACK_CROSS_SIZE_MAP = {\r\n    row: FALLBACK_MAIN_SIZE_MAP.col,\r\n    col: FALLBACK_MAIN_SIZE_MAP.row\r\n};\r\nvar FALLBACK_PRE_MARGIN_MAP = {\r\n    row: \"marginLeft\",\r\n    col: \"marginTop\"\r\n};\r\nvar FALLBACK_POST_MARGIN_MAP = {\r\n    row: \"marginRight\",\r\n    col: \"marginBottom\"\r\n};\r\nvar FALLBACK_CROSS_PRE_MARGIN_MAP = {\r\n    row: \"marginTop\",\r\n    col: \"marginLeft\"\r\n};\r\nvar FALLBACK_CROSS_POST_MARGIN_MAP = {\r\n    row: \"marginBottom\",\r\n    col: \"marginRight\"\r\n};\r\nvar MARGINS_RTL_FLIP_MAP = {\r\n    marginLeft: \"marginRight\",\r\n    marginRight: \"marginLeft\"\r\n};\r\nclass BoxItem extends CollectionWidgetItem {\r\n    _renderVisible(value, oldValue) {\r\n        super._renderVisible(value);\r\n        if (isDefined(oldValue)) {\r\n            this._options.fireItemStateChangedAction({\r\n                name: \"visible\",\r\n                state: value,\r\n                oldState: oldValue\r\n            })\r\n        }\r\n    }\r\n}\r\nclass FlexLayoutStrategy {\r\n    constructor($element, option) {\r\n        this._$element = $element;\r\n        this._option = option;\r\n        this.initSize = noop;\r\n        this.update = noop\r\n    }\r\n    renderBox() {\r\n        this._$element.css({\r\n            display: stylePropPrefix(\"flexDirection\") + \"flex\"\r\n        });\r\n        setFlexProp(this._$element.get(0), \"flexDirection\", FLEX_DIRECTION_MAP[this._option(\"direction\")])\r\n    }\r\n    renderAlign() {\r\n        this._$element.css({\r\n            justifyContent: this._normalizedAlign()\r\n        })\r\n    }\r\n    _normalizedAlign() {\r\n        var align = this._option(\"align\");\r\n        return align in FLEX_JUSTIFY_CONTENT_MAP ? FLEX_JUSTIFY_CONTENT_MAP[align] : align\r\n    }\r\n    renderCrossAlign() {\r\n        this._$element.css({\r\n            alignItems: this._normalizedCrossAlign()\r\n        })\r\n    }\r\n    _normalizedCrossAlign() {\r\n        var crossAlign = this._option(\"crossAlign\");\r\n        return crossAlign in FLEX_ALIGN_ITEMS_MAP ? FLEX_ALIGN_ITEMS_MAP[crossAlign] : crossAlign\r\n    }\r\n    renderItems($items) {\r\n        var flexPropPrefix = stylePropPrefix(\"flexDirection\");\r\n        var direction = this._option(\"direction\");\r\n        each($items, (function() {\r\n            var $item = $(this);\r\n            var item = $item.data(BOX_ITEM_DATA_KEY);\r\n            $item.css({\r\n                display: flexPropPrefix + \"flex\"\r\n            }).css(MAXSIZE_MAP[direction], item.maxSize || \"none\").css(MINSIZE_MAP[direction], item.minSize || \"0\");\r\n            setFlexProp($item.get(0), \"flexBasis\", item.baseSize || 0);\r\n            setFlexProp($item.get(0), \"flexGrow\", item.ratio);\r\n            setFlexProp($item.get(0), \"flexShrink\", isDefined(item.shrink) ? item.shrink : SHRINK);\r\n            $item.children().each((_, itemContent) => {\r\n                $(itemContent).css({\r\n                    width: \"auto\",\r\n                    height: \"auto\",\r\n                    display: stylePropPrefix(\"flexDirection\") + \"flex\",\r\n                    flexBasis: 0\r\n                });\r\n                setFlexProp(itemContent, \"flexGrow\", 1);\r\n                setFlexProp(itemContent, \"flexDirection\", $(itemContent)[0].style.flexDirection || \"column\")\r\n            })\r\n        }))\r\n    }\r\n}\r\nclass FallbackLayoutStrategy {\r\n    constructor($element, option) {\r\n        this._$element = $element;\r\n        this._option = option\r\n    }\r\n    renderBox() {\r\n        this._$element.css({\r\n            fontSize: 0,\r\n            whiteSpace: FALLBACK_WRAP_MAP[this._option(\"direction\")],\r\n            verticalAlign: \"top\"\r\n        });\r\n        eventsEngine.off(this._$element, UPDATE_EVENT);\r\n        eventsEngine.on(this._$element, UPDATE_EVENT, this.update.bind(this))\r\n    }\r\n    renderAlign() {\r\n        var $items = this._$items;\r\n        if (!$items) {\r\n            return\r\n        }\r\n        var align = this._option(\"align\");\r\n        var totalItemSize = this.totalItemSize;\r\n        var direction = this._option(\"direction\");\r\n        var boxSize = FALLBACK_MAIN_SIZE_MAP[direction].getter(this._$element);\r\n        var freeSpace = boxSize - totalItemSize;\r\n        var shift = 0;\r\n        this._setItemsMargins($items, direction, 0);\r\n        switch (align) {\r\n            case \"start\":\r\n                break;\r\n            case \"end\":\r\n                shift = freeSpace;\r\n                $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\r\n                break;\r\n            case \"center\":\r\n                shift = .5 * freeSpace;\r\n                $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\r\n                $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\r\n                break;\r\n            case \"space-between\":\r\n                shift = .5 * freeSpace / ($items.length - 1);\r\n                this._setItemsMargins($items, direction, shift);\r\n                $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), 0);\r\n                $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), 0);\r\n                break;\r\n            case \"space-around\":\r\n                shift = .5 * freeSpace / $items.length;\r\n                this._setItemsMargins($items, direction, shift)\r\n        }\r\n    }\r\n    _setItemsMargins($items, direction, shift) {\r\n        $items.css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift).css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift)\r\n    }\r\n    renderCrossAlign() {\r\n        var $items = this._$items;\r\n        if (!$items) {\r\n            return\r\n        }\r\n        var crossAlign = this._option(\"crossAlign\");\r\n        var direction = this._option(\"direction\");\r\n        var size = FALLBACK_CROSS_SIZE_MAP[direction].getter(this._$element);\r\n        var that = this;\r\n        switch (crossAlign) {\r\n            case \"start\":\r\n                break;\r\n            case \"end\":\r\n                each($items, (function() {\r\n                    var $item = $(this);\r\n                    var itemSize = FALLBACK_CROSS_SIZE_MAP[direction].getter($item);\r\n                    var shift = size - itemSize;\r\n                    $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift)\r\n                }));\r\n                break;\r\n            case \"center\":\r\n                each($items, (function() {\r\n                    var $item = $(this);\r\n                    var itemSize = FALLBACK_CROSS_SIZE_MAP[direction].getter($item);\r\n                    var shift = .5 * (size - itemSize);\r\n                    $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), shift)\r\n                }));\r\n                break;\r\n            case \"stretch\":\r\n                $items.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), 0).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), 0).css(FALLBACK_CROSS_SIZE_MAP[direction].name, \"100%\")\r\n        }\r\n    }\r\n    _chooseMarginSide(value) {\r\n        if (!this._option(\"rtlEnabled\")) {\r\n            return value\r\n        }\r\n        return MARGINS_RTL_FLIP_MAP[value] || value\r\n    }\r\n    renderItems($items) {\r\n        this._$items = $items;\r\n        var direction = this._option(\"direction\");\r\n        var totalRatio = 0;\r\n        var totalWeightedShrink = 0;\r\n        var totalBaseSize = 0;\r\n        each($items, (_, item) => {\r\n            var $item = $(item);\r\n            $item.css({\r\n                display: \"inline-block\",\r\n                verticalAlign: \"top\"\r\n            });\r\n            FALLBACK_MAIN_SIZE_MAP[direction].setter($item, \"auto\");\r\n            $item.removeClass(FALLBACK_BOX_ITEM);\r\n            var itemData = $item.data(BOX_ITEM_DATA_KEY);\r\n            var ratio = itemData.ratio || 0;\r\n            var size = this._baseSize($item);\r\n            var shrink = isDefined(itemData.shrink) ? itemData.shrink : SHRINK;\r\n            totalRatio += ratio;\r\n            totalWeightedShrink += shrink * size;\r\n            totalBaseSize += size\r\n        });\r\n        var freeSpaceSize = this._boxSize() - totalBaseSize;\r\n        var itemSize = $item => {\r\n            var itemData = $item.data(BOX_ITEM_DATA_KEY);\r\n            var size = this._baseSize($item);\r\n            var factor = freeSpaceSize >= 0 ? itemData.ratio || 0 : (isDefined(itemData.shrink) ? itemData.shrink : SHRINK) * size;\r\n            var totalFactor = freeSpaceSize >= 0 ? totalRatio : totalWeightedShrink;\r\n            var shift = totalFactor ? Math.round(freeSpaceSize * factor / totalFactor) : 0;\r\n            return size + shift\r\n        };\r\n        var totalItemSize = 0;\r\n        each($items, (_, item) => {\r\n            var $item = $(item);\r\n            var itemData = $(item).data(BOX_ITEM_DATA_KEY);\r\n            var size = itemSize($item);\r\n            totalItemSize += size;\r\n            $item.css(MAXSIZE_MAP[direction], itemData.maxSize || \"none\").css(MINSIZE_MAP[direction], itemData.minSize || \"0\").css(FALLBACK_MAIN_SIZE_MAP[direction].name, size);\r\n            $item.addClass(FALLBACK_BOX_ITEM)\r\n        });\r\n        this.totalItemSize = totalItemSize\r\n    }\r\n    _baseSize(item) {\r\n        var itemData = $(item).data(BOX_ITEM_DATA_KEY);\r\n        return null == itemData.baseSize ? 0 : \"auto\" === itemData.baseSize ? this._contentSize(item) : this._parseSize(itemData.baseSize)\r\n    }\r\n    _contentSize(item) {\r\n        return FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")].getter($(item))\r\n    }\r\n    _parseSize(size) {\r\n        return String(size).match(/.+%$/) ? .01 * parseFloat(size) * this._boxSizeValue : size\r\n    }\r\n    _boxSize(value) {\r\n        if (!arguments.length) {\r\n            this._boxSizeValue = this._boxSizeValue || this._totalBaseSize();\r\n            return this._boxSizeValue\r\n        }\r\n        this._boxSizeValue = value\r\n    }\r\n    _totalBaseSize() {\r\n        var result = 0;\r\n        each(this._$items, (_, item) => {\r\n            result += this._baseSize(item)\r\n        });\r\n        return result\r\n    }\r\n    initSize() {\r\n        this._boxSize(FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")].getter(this._$element))\r\n    }\r\n    update() {\r\n        if (!this._$items || this._$element.is(\":hidden\")) {\r\n            return\r\n        }\r\n        this._$items.detach();\r\n        this.initSize();\r\n        this._$element.append(this._$items);\r\n        this.renderItems(this._$items);\r\n        this.renderAlign();\r\n        this.renderCrossAlign();\r\n        var element = this._$element.get(0);\r\n        this._$items.find(BOX_SELECTOR).each((function() {\r\n            if (element === $(this).parent().closest(BOX_SELECTOR).get(0)) {\r\n                eventsEngine.triggerHandler(this, UPDATE_EVENT)\r\n            }\r\n        }))\r\n    }\r\n}\r\nclass Box extends CollectionWidget {\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            direction: \"row\",\r\n            align: \"start\",\r\n            crossAlign: \"stretch\",\r\n            activeStateEnabled: false,\r\n            focusStateEnabled: false,\r\n            onItemStateChanged: void 0,\r\n            _layoutStrategy: \"flex\",\r\n            _queue: void 0\r\n        })\r\n    }\r\n    _itemClass() {\r\n        return BOX_ITEM_CLASS\r\n    }\r\n    _itemDataKey() {\r\n        return BOX_ITEM_DATA_KEY\r\n    }\r\n    _itemElements() {\r\n        return this._itemContainer().children(this._itemSelector())\r\n    }\r\n    _init() {\r\n        super._init();\r\n        this.$element().addClass(\"\".concat(BOX_CLASS, \"-\").concat(this.option(\"_layoutStrategy\")));\r\n        this._initLayout();\r\n        this._initBoxQueue()\r\n    }\r\n    _initLayout() {\r\n        this._layout = \"fallback\" === this.option(\"_layoutStrategy\") ? new FallbackLayoutStrategy(this.$element(), this.option.bind(this)) : new FlexLayoutStrategy(this.$element(), this.option.bind(this))\r\n    }\r\n    _initBoxQueue() {\r\n        this._queue = this.option(\"_queue\") || []\r\n    }\r\n    _queueIsNotEmpty() {\r\n        return this.option(\"_queue\") ? false : !!this._queue.length\r\n    }\r\n    _pushItemToQueue($item, config) {\r\n        this._queue.push({\r\n            $item: $item,\r\n            config: config\r\n        })\r\n    }\r\n    _shiftItemFromQueue() {\r\n        return this._queue.shift()\r\n    }\r\n    _initMarkup() {\r\n        this.$element().addClass(BOX_CLASS);\r\n        this._layout.renderBox();\r\n        super._initMarkup();\r\n        this._renderAlign();\r\n        this._renderActions()\r\n    }\r\n    _renderActions() {\r\n        this._onItemStateChanged = this._createActionByOption(\"onItemStateChanged\")\r\n    }\r\n    _renderAlign() {\r\n        this._layout.renderAlign();\r\n        this._layout.renderCrossAlign()\r\n    }\r\n    _renderItems(items) {\r\n        this._layout.initSize();\r\n        super._renderItems(items);\r\n        while (this._queueIsNotEmpty()) {\r\n            var item = this._shiftItemFromQueue();\r\n            this._createComponent(item.$item, Box, extend({\r\n                _layoutStrategy: this.option(\"_layoutStrategy\"),\r\n                itemTemplate: this.option(\"itemTemplate\"),\r\n                itemHoldTimeout: this.option(\"itemHoldTimeout\"),\r\n                onItemHold: this.option(\"onItemHold\"),\r\n                onItemClick: this.option(\"onItemClick\"),\r\n                onItemContextMenu: this.option(\"onItemContextMenu\"),\r\n                onItemRendered: this.option(\"onItemRendered\"),\r\n                _queue: this._queue\r\n            }, item.config))\r\n        }\r\n        this._layout.renderItems(this._itemElements());\r\n        clearTimeout(this._updateTimer);\r\n        this._updateTimer = setTimeout(() => {\r\n            if (!this._isUpdated) {\r\n                this._layout.update()\r\n            }\r\n            this._isUpdated = false;\r\n            this._updateTimer = null\r\n        })\r\n    }\r\n    _renderItemContent(args) {\r\n        var $itemNode = args.itemData && args.itemData.node;\r\n        if ($itemNode) {\r\n            return this._renderItemContentByNode(args, $itemNode)\r\n        }\r\n        return super._renderItemContent(args)\r\n    }\r\n    _postprocessRenderItem(args) {\r\n        var boxConfig = args.itemData.box;\r\n        if (!boxConfig) {\r\n            return\r\n        }\r\n        this._pushItemToQueue(args.itemContent, boxConfig)\r\n    }\r\n    _createItemByTemplate(itemTemplate, args) {\r\n        if (args.itemData.box) {\r\n            return itemTemplate.source ? itemTemplate.source() : $()\r\n        }\r\n        return super._createItemByTemplate(itemTemplate, args)\r\n    }\r\n    _visibilityChanged(visible) {\r\n        if (visible) {\r\n            this._dimensionChanged()\r\n        }\r\n    }\r\n    _dimensionChanged() {\r\n        if (this._updateTimer) {\r\n            return\r\n        }\r\n        this._isUpdated = true;\r\n        this._layout.update()\r\n    }\r\n    _dispose() {\r\n        clearTimeout(this._updateTimer);\r\n        super._dispose.apply(this, arguments)\r\n    }\r\n    _itemOptionChanged(item, property, value, oldValue) {\r\n        if (\"visible\" === property) {\r\n            this._onItemStateChanged({\r\n                name: property,\r\n                state: value,\r\n                oldState: false !== oldValue\r\n            })\r\n        }\r\n        super._itemOptionChanged(item, property, value)\r\n    }\r\n    _optionChanged(args) {\r\n        switch (args.name) {\r\n            case \"_layoutStrategy\":\r\n            case \"_queue\":\r\n            case \"direction\":\r\n                this._invalidate();\r\n                break;\r\n            case \"align\":\r\n                this._layout.renderAlign();\r\n                break;\r\n            case \"crossAlign\":\r\n                this._layout.renderCrossAlign();\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _itemOptions() {\r\n        var options = super._itemOptions();\r\n        options.fireItemStateChangedAction = e => {\r\n            this._onItemStateChanged(e)\r\n        };\r\n        return options\r\n    }\r\n    repaint() {\r\n        this._dimensionChanged()\r\n    }\r\n}\r\nBox.ItemClass = BoxItem;\r\nregisterComponent(\"dxBox\", Box);\r\nexport default Box;\r\n"]},"metadata":{},"sourceType":"module"}