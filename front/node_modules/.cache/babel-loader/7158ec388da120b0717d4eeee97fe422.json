{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/responsive_box.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth } from \"../core/utils/size\";\nimport $ from \"../core/renderer\";\nimport eventsEngine from \"../events/core/events_engine\";\nimport { grep, noop } from \"../core/utils/common\";\nimport { isDefined, isPlainObject, isEmptyObject } from \"../core/utils/type\";\nimport errors from \"./widget/ui.errors\";\nimport { getWindow, defaultScreenFactorFunc, hasWindow } from \"../core/utils/window\";\nvar window = getWindow();\nimport { each, map } from \"../core/utils/iterator\";\nimport { extend } from \"../core/utils/extend\";\nimport registerComponent from \"../core/component_registrator\";\nimport Box from \"./box\";\nimport CollectionWidget from \"./collection/ui.collection_widget.edit\";\nvar RESPONSIVE_BOX_CLASS = \"dx-responsivebox\";\nvar SCREEN_SIZE_CLASS_PREFIX = RESPONSIVE_BOX_CLASS + \"-screen-\";\nvar BOX_ITEM_CLASS = \"dx-box-item\";\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\nvar HD_SCREEN_WIDTH = 1920;\nvar ResponsiveBox = CollectionWidget.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      rows: [],\n      cols: [],\n      screenByWidth: null,\n      singleColumnScreen: \"\",\n      height: \"100%\",\n      width: \"100%\",\n      activeStateEnabled: false,\n      focusStateEnabled: false,\n      onItemStateChanged: void 0,\n      onLayoutChanged: null,\n      currentScreenFactor: void 0,\n      _layoutStrategy: void 0\n    });\n  },\n  _init: function () {\n    if (!this.option(\"screenByWidth\")) {\n      this._options.silent(\"screenByWidth\", defaultScreenFactorFunc);\n    }\n\n    this.callBase();\n\n    this._initLayoutChangedAction();\n  },\n  _initLayoutChangedAction: function () {\n    this._layoutChangedAction = this._createActionByOption(\"onLayoutChanged\", {\n      excludeValidators: [\"disabled\", \"readonly\"]\n    });\n  },\n  _itemClass: function () {\n    return BOX_ITEM_CLASS;\n  },\n  _itemDataKey: function () {\n    return BOX_ITEM_DATA_KEY;\n  },\n  _initMarkup: function () {\n    this.callBase();\n    this.$element().addClass(RESPONSIVE_BOX_CLASS);\n\n    this._updateRootBox();\n  },\n  _updateRootBox: function () {\n    clearTimeout(this._updateTimer);\n    this._updateTimer = setTimeout(function () {\n      if (this._$root) {\n        eventsEngine.triggerHandler(this._$root, \"dxupdate\");\n      }\n    }.bind(this));\n  },\n  _renderItems: function () {\n    this._setScreenSize();\n\n    this._screenItems = this._itemsByScreen();\n\n    this._prepareGrid();\n\n    this._spreadItems();\n\n    this._layoutItems();\n\n    this._linkNodeToItem();\n  },\n  _itemOptionChanged: function (item) {\n    var $item = this._findItemElementByItem(item);\n\n    if (!$item.length) {\n      return;\n    }\n\n    this._refreshItem($item, item);\n\n    this._clearItemNodeTemplates();\n\n    this._update(true);\n  },\n  _setScreenSize: function () {\n    var currentScreen = this._getCurrentScreen();\n\n    this._removeScreenSizeClass();\n\n    this.$element().addClass(SCREEN_SIZE_CLASS_PREFIX + currentScreen);\n    this.option(\"currentScreenFactor\", currentScreen);\n  },\n  _removeScreenSizeClass: function () {\n    var currentScreenFactor = this.option(\"currentScreenFactor\");\n    currentScreenFactor && this.$element().removeClass(SCREEN_SIZE_CLASS_PREFIX + currentScreenFactor);\n  },\n  _prepareGrid: function () {\n    var grid = this._grid = [];\n\n    this._prepareRowsAndCols();\n\n    each(this._rows, function () {\n      var row = [];\n      grid.push(row);\n      each(this._cols, function () {\n        row.push(this._createEmptyCell());\n      }.bind(this));\n    }.bind(this));\n  },\n  getSingleColumnRows: function () {\n    var rows = this.option(\"rows\");\n    var screenItemsLength = this._screenItems.length;\n\n    if (rows.length) {\n      var filteredRows = this._filterByScreen(rows);\n\n      var result = [];\n\n      for (var i = 0; i < screenItemsLength; i++) {\n        var sizeConfig = this._defaultSizeConfig();\n\n        if (i < filteredRows.length && isDefined(filteredRows[i].shrink)) {\n          sizeConfig.shrink = filteredRows[i].shrink;\n        }\n\n        result.push(sizeConfig);\n      }\n\n      return result;\n    } else {\n      return this._defaultSizeConfig(screenItemsLength);\n    }\n  },\n  _prepareRowsAndCols: function () {\n    if (this._isSingleColumnScreen()) {\n      this._prepareSingleColumnScreenItems();\n\n      this._rows = this.getSingleColumnRows();\n      this._cols = this._defaultSizeConfig(1);\n    } else {\n      this._rows = this._sizesByScreen(this.option(\"rows\"));\n      this._cols = this._sizesByScreen(this.option(\"cols\"));\n    }\n  },\n  _isSingleColumnScreen: function () {\n    return this._screenRegExp().test(this.option(\"singleColumnScreen\")) || !this.option(\"rows\").length || !this.option(\"cols\").length;\n  },\n  _prepareSingleColumnScreenItems: function () {\n    this._screenItems.sort(function (item1, item2) {\n      return item1.location.row - item2.location.row || item1.location.col - item2.location.col;\n    });\n\n    each(this._screenItems, function (index, item) {\n      extend(item.location, {\n        row: index,\n        col: 0,\n        rowspan: 1,\n        colspan: 1\n      });\n    });\n  },\n  _sizesByScreen: function (sizeConfigs) {\n    return map(this._filterByScreen(sizeConfigs), function (sizeConfig) {\n      return extend(this._defaultSizeConfig(), sizeConfig);\n    }.bind(this));\n  },\n  _createDefaultSizeConfig: function () {\n    return {\n      ratio: 1,\n      baseSize: 0,\n      minSize: 0,\n      maxSize: 0\n    };\n  },\n  _defaultSizeConfig: function (size) {\n    var defaultSizeConfig = this._createDefaultSizeConfig();\n\n    if (!arguments.length) {\n      return defaultSizeConfig;\n    }\n\n    var result = [];\n\n    for (var i = 0; i < size; i++) {\n      result.push(defaultSizeConfig);\n    }\n\n    return result;\n  },\n  _filterByScreen: function (items) {\n    var screenRegExp = this._screenRegExp();\n\n    return grep(items, function (item) {\n      return !item.screen || screenRegExp.test(item.screen);\n    });\n  },\n  _screenRegExp: function () {\n    var screen = this._getCurrentScreen();\n\n    return new RegExp(\"(^|\\\\s)\" + screen + \"($|\\\\s)\", \"i\");\n  },\n  _getCurrentScreen: function () {\n    var width = this._screenWidth();\n\n    return this.option(\"screenByWidth\")(width);\n  },\n  _screenWidth: function () {\n    return hasWindow() ? getWidth(window) : HD_SCREEN_WIDTH;\n  },\n  _createEmptyCell: function () {\n    return {\n      item: {},\n      location: {\n        colspan: 1,\n        rowspan: 1\n      }\n    };\n  },\n  _spreadItems: function () {\n    each(this._screenItems, function (_, itemInfo) {\n      var location = itemInfo.location || {};\n      var itemCol = location.col;\n      var itemRow = location.row;\n      var row = this._grid[itemRow];\n      var itemCell = row && row[itemCol];\n\n      this._occupyCells(itemCell, itemInfo);\n    }.bind(this));\n  },\n  _itemsByScreen: function () {\n    return this.option(\"items\").reduce((result, item) => {\n      var locations = item.location || {};\n      locations = isPlainObject(locations) ? [locations] : locations;\n\n      this._filterByScreen(locations).forEach(location => {\n        result.push({\n          item: item,\n          location: extend({\n            rowspan: 1,\n            colspan: 1\n          }, location)\n        });\n      });\n\n      return result;\n    }, []);\n  },\n  _occupyCells: function (itemCell, itemInfo) {\n    if (!itemCell || this._isItemCellOccupied(itemCell, itemInfo)) {\n      return;\n    }\n\n    extend(itemCell, itemInfo);\n\n    this._markSpanningCell(itemCell);\n  },\n  _isItemCellOccupied: function (itemCell, itemInfo) {\n    if (!isEmptyObject(itemCell.item)) {\n      return true;\n    }\n\n    var result = false;\n\n    this._loopOverSpanning(itemInfo.location, function (cell) {\n      result = result || !isEmptyObject(cell.item);\n    });\n\n    return result;\n  },\n  _loopOverSpanning: function (location, callback) {\n    var rowEnd = location.row + location.rowspan - 1;\n    var colEnd = location.col + location.colspan - 1;\n    var boundRowEnd = Math.min(rowEnd, this._rows.length - 1);\n    var boundColEnd = Math.min(colEnd, this._cols.length - 1);\n    location.rowspan -= rowEnd - boundRowEnd;\n    location.colspan -= colEnd - boundColEnd;\n\n    for (var rowIndex = location.row; rowIndex <= boundRowEnd; rowIndex++) {\n      for (var colIndex = location.col; colIndex <= boundColEnd; colIndex++) {\n        if (rowIndex !== location.row || colIndex !== location.col) {\n          callback(this._grid[rowIndex][colIndex]);\n        }\n      }\n    }\n  },\n  _markSpanningCell: function (itemCell) {\n    this._loopOverSpanning(itemCell.location, function (cell) {\n      extend(cell, {\n        item: itemCell.item,\n        spanningCell: itemCell\n      });\n    });\n  },\n  _linkNodeToItem: function () {\n    each(this._itemElements(), function (_, itemNode) {\n      var $item = $(itemNode);\n      var item = $item.data(BOX_ITEM_DATA_KEY);\n\n      if (!item.box) {\n        item.node = $item.children();\n      }\n    });\n  },\n  _layoutItems: function () {\n    var rowsCount = this._grid.length;\n    var colsCount = rowsCount && this._grid[0].length;\n\n    if (!rowsCount && !colsCount) {\n      return;\n    }\n\n    var result = this._layoutBlock({\n      direction: \"col\",\n      row: {\n        start: 0,\n        end: rowsCount - 1\n      },\n      col: {\n        start: 0,\n        end: colsCount - 1\n      }\n    });\n\n    var rootBox = this._prepareBoxConfig(result.box || {\n      direction: \"row\",\n      items: [extend(result, {\n        ratio: 1\n      })]\n    });\n\n    extend(rootBox, this._rootBoxConfig(rootBox.items));\n    this._$root = $(\"<div>\").appendTo(this._itemContainer());\n\n    this._createComponent(this._$root, Box, rootBox);\n  },\n  _rootBoxConfig: function (items) {\n    var rootItems = each(items, function (index, item) {\n      this._needApplyAutoBaseSize(item) && extend(item, {\n        baseSize: \"auto\"\n      });\n    }.bind(this));\n    return extend({\n      width: \"100%\",\n      height: \"100%\",\n      items: rootItems,\n      itemTemplate: this._getTemplateByOption(\"itemTemplate\"),\n      itemHoldTimeout: this.option(\"itemHoldTimeout\"),\n      onItemHold: this._createActionByOption(\"onItemHold\"),\n      onItemClick: this._createActionByOption(\"onItemClick\"),\n      onItemContextMenu: this._createActionByOption(\"onItemContextMenu\"),\n      onItemRendered: this._createActionByOption(\"onItemRendered\")\n    }, {\n      _layoutStrategy: this.option(\"_layoutStrategy\")\n    });\n  },\n  _needApplyAutoBaseSize: function (item) {\n    return !item.baseSize && (!item.minSize || \"auto\" === item.minSize) && (!item.maxSize || \"auto\" === item.maxSize);\n  },\n  _prepareBoxConfig: function (config) {\n    return extend(config || {}, {\n      crossAlign: \"stretch\",\n      onItemStateChanged: this.option(\"onItemStateChanged\")\n    });\n  },\n  _layoutBlock: function (options) {\n    if (this._isSingleItem(options)) {\n      return this._itemByCell(options.row.start, options.col.start);\n    }\n\n    return this._layoutDirection(options);\n  },\n  _isSingleItem: function (options) {\n    var firstCellLocation = this._grid[options.row.start][options.col.start].location;\n    var isItemRowSpanned = options.row.end - options.row.start === firstCellLocation.rowspan - 1;\n    var isItemColSpanned = options.col.end - options.col.start === firstCellLocation.colspan - 1;\n    return isItemRowSpanned && isItemColSpanned;\n  },\n  _itemByCell: function (rowIndex, colIndex) {\n    var itemCell = this._grid[rowIndex][colIndex];\n    return itemCell.spanningCell ? null : itemCell.item;\n  },\n  _layoutDirection: function (options) {\n    var items = [];\n    var direction = options.direction;\n\n    var crossDirection = this._crossDirection(direction);\n\n    var block;\n\n    while (block = this._nextBlock(options)) {\n      if (this._isBlockIndivisible(options.prevBlockOptions, block)) {\n        throw errors.Error(\"E1025\");\n      }\n\n      var item = this._layoutBlock({\n        direction: crossDirection,\n        row: block.row,\n        col: block.col,\n        prevBlockOptions: options\n      });\n\n      if (item) {\n        extend(item, this._blockSize(block, crossDirection));\n        items.push(item);\n      }\n\n      options[crossDirection].start = block[crossDirection].end + 1;\n    }\n\n    return {\n      box: this._prepareBoxConfig({\n        direction: direction,\n        items: items\n      })\n    };\n  },\n  _isBlockIndivisible: function (options, block) {\n    return options && options.col.start === block.col.start && options.col.end === block.col.end && options.row.start === block.row.start && options.row.end === block.row.end;\n  },\n  _crossDirection: function (direction) {\n    return \"col\" === direction ? \"row\" : \"col\";\n  },\n  _nextBlock: function (options) {\n    var direction = options.direction;\n\n    var crossDirection = this._crossDirection(direction);\n\n    var startIndex = options[direction].start;\n    var endIndex = options[direction].end;\n    var crossStartIndex = options[crossDirection].start;\n\n    if (crossStartIndex > options[crossDirection].end) {\n      return null;\n    }\n\n    var crossSpan = 1;\n\n    for (var crossIndex = crossStartIndex; crossIndex < crossStartIndex + crossSpan; crossIndex++) {\n      var lineCrossSpan = 1;\n\n      for (var index = startIndex; index <= endIndex; index++) {\n        var cell = this._cellByDirection(direction, index, crossIndex);\n\n        lineCrossSpan = Math.max(lineCrossSpan, cell.location[crossDirection + \"span\"]);\n      }\n\n      var lineCrossEndIndex = crossIndex + lineCrossSpan;\n      var crossEndIndex = crossStartIndex + crossSpan;\n\n      if (lineCrossEndIndex > crossEndIndex) {\n        crossSpan += lineCrossEndIndex - crossEndIndex;\n      }\n    }\n\n    var result = {};\n    result[direction] = {\n      start: startIndex,\n      end: endIndex\n    };\n    result[crossDirection] = {\n      start: crossStartIndex,\n      end: crossStartIndex + crossSpan - 1\n    };\n    return result;\n  },\n  _cellByDirection: function (direction, index, crossIndex) {\n    return \"col\" === direction ? this._grid[crossIndex][index] : this._grid[index][crossIndex];\n  },\n  _blockSize: function (block, direction) {\n    var defaultMinSize = \"row\" === direction ? \"auto\" : 0;\n    var sizeConfigs = \"row\" === direction ? this._rows : this._cols;\n    var result = extend(this._createDefaultSizeConfig(), {\n      ratio: 0\n    });\n\n    for (var index = block[direction].start; index <= block[direction].end; index++) {\n      var sizeConfig = sizeConfigs[index];\n      result.ratio += sizeConfig.ratio;\n      result.baseSize += sizeConfig.baseSize;\n      result.minSize += sizeConfig.minSize;\n      result.maxSize += sizeConfig.maxSize;\n\n      if (isDefined(sizeConfig.shrink)) {\n        result.shrink = sizeConfig.shrink;\n      }\n    }\n\n    result.minSize = result.minSize ? result.minSize : defaultMinSize;\n    result.maxSize = result.maxSize ? result.maxSize : \"auto\";\n    this._isSingleColumnScreen() && (result.baseSize = \"auto\");\n    return result;\n  },\n  _update: function (forceRemoveRoot) {\n    var $existingRoot = this._$root;\n\n    this._renderItems();\n\n    if ($existingRoot) {\n      if (forceRemoveRoot) {\n        $existingRoot.remove();\n      } else {\n        $existingRoot.detach();\n\n        this._saveAssistantRoot($existingRoot);\n      }\n    }\n\n    this._layoutChangedAction();\n\n    this._updateRootBox();\n  },\n  _saveAssistantRoot: function ($root) {\n    this._assistantRoots = this._assistantRoots || [];\n\n    this._assistantRoots.push($root);\n  },\n  _dispose: function () {\n    clearTimeout(this._updateTimer);\n\n    this._clearItemNodeTemplates();\n\n    this._cleanUnusedRoots();\n\n    this.callBase.apply(this, arguments);\n  },\n  _cleanUnusedRoots: function () {\n    if (!this._assistantRoots) {\n      return;\n    }\n\n    each(this._assistantRoots, function (_, item) {\n      $(item).remove();\n    });\n  },\n  _clearItemNodeTemplates: function () {\n    each(this.option(\"items\"), function () {\n      delete this.node;\n    });\n  },\n  _toggleVisibility: function (visible) {\n    this.callBase(visible);\n\n    if (visible) {\n      this._updateRootBox();\n    }\n  },\n  _attachClickEvent: noop,\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"rows\":\n      case \"cols\":\n      case \"screenByWidth\":\n      case \"_layoutStrategy\":\n      case \"singleColumnScreen\":\n        this._clearItemNodeTemplates();\n\n        this._invalidate();\n\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._update();\n\n        break;\n\n      case \"onLayoutChanged\":\n        this._initLayoutChangedAction();\n\n        break;\n\n      case \"itemTemplate\":\n        this._clearItemNodeTemplates();\n\n        this.callBase(args);\n        break;\n\n      case \"currentScreenFactor\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _dimensionChanged: function () {\n    if (this._getCurrentScreen() !== this.option(\"currentScreenFactor\")) {\n      this._update();\n    }\n  },\n  repaint: function () {\n    this._update();\n  }\n});\nregisterComponent(\"dxResponsiveBox\", ResponsiveBox);\nexport default ResponsiveBox;","map":{"version":3,"sources":["/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/devextreme/esm/ui/responsive_box.js"],"names":["getWidth","$","eventsEngine","grep","noop","isDefined","isPlainObject","isEmptyObject","errors","getWindow","defaultScreenFactorFunc","hasWindow","window","each","map","extend","registerComponent","Box","CollectionWidget","RESPONSIVE_BOX_CLASS","SCREEN_SIZE_CLASS_PREFIX","BOX_ITEM_CLASS","BOX_ITEM_DATA_KEY","HD_SCREEN_WIDTH","ResponsiveBox","inherit","_getDefaultOptions","callBase","rows","cols","screenByWidth","singleColumnScreen","height","width","activeStateEnabled","focusStateEnabled","onItemStateChanged","onLayoutChanged","currentScreenFactor","_layoutStrategy","_init","option","_options","silent","_initLayoutChangedAction","_layoutChangedAction","_createActionByOption","excludeValidators","_itemClass","_itemDataKey","_initMarkup","$element","addClass","_updateRootBox","clearTimeout","_updateTimer","setTimeout","_$root","triggerHandler","bind","_renderItems","_setScreenSize","_screenItems","_itemsByScreen","_prepareGrid","_spreadItems","_layoutItems","_linkNodeToItem","_itemOptionChanged","item","$item","_findItemElementByItem","length","_refreshItem","_clearItemNodeTemplates","_update","currentScreen","_getCurrentScreen","_removeScreenSizeClass","removeClass","grid","_grid","_prepareRowsAndCols","_rows","row","push","_cols","_createEmptyCell","getSingleColumnRows","screenItemsLength","filteredRows","_filterByScreen","result","i","sizeConfig","_defaultSizeConfig","shrink","_isSingleColumnScreen","_prepareSingleColumnScreenItems","_sizesByScreen","_screenRegExp","test","sort","item1","item2","location","col","index","rowspan","colspan","sizeConfigs","_createDefaultSizeConfig","ratio","baseSize","minSize","maxSize","size","defaultSizeConfig","arguments","items","screenRegExp","screen","RegExp","_screenWidth","_","itemInfo","itemCol","itemRow","itemCell","_occupyCells","reduce","locations","forEach","_isItemCellOccupied","_markSpanningCell","_loopOverSpanning","cell","callback","rowEnd","colEnd","boundRowEnd","Math","min","boundColEnd","rowIndex","colIndex","spanningCell","_itemElements","itemNode","data","box","node","children","rowsCount","colsCount","_layoutBlock","direction","start","end","rootBox","_prepareBoxConfig","_rootBoxConfig","appendTo","_itemContainer","_createComponent","rootItems","_needApplyAutoBaseSize","itemTemplate","_getTemplateByOption","itemHoldTimeout","onItemHold","onItemClick","onItemContextMenu","onItemRendered","config","crossAlign","options","_isSingleItem","_itemByCell","_layoutDirection","firstCellLocation","isItemRowSpanned","isItemColSpanned","crossDirection","_crossDirection","block","_nextBlock","_isBlockIndivisible","prevBlockOptions","Error","_blockSize","startIndex","endIndex","crossStartIndex","crossSpan","crossIndex","lineCrossSpan","_cellByDirection","max","lineCrossEndIndex","crossEndIndex","defaultMinSize","forceRemoveRoot","$existingRoot","remove","detach","_saveAssistantRoot","$root","_assistantRoots","_dispose","_cleanUnusedRoots","apply","_toggleVisibility","visible","_attachClickEvent","_optionChanged","args","name","_invalidate","_dimensionChanged","repaint"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/responsive_box.js)\r\n * Version: 21.2.3\r\n * Build date: Thu Oct 28 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth\r\n} from \"../core/utils/size\";\r\nimport $ from \"../core/renderer\";\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport {\r\n    grep,\r\n    noop\r\n} from \"../core/utils/common\";\r\nimport {\r\n    isDefined,\r\n    isPlainObject,\r\n    isEmptyObject\r\n} from \"../core/utils/type\";\r\nimport errors from \"./widget/ui.errors\";\r\nimport {\r\n    getWindow,\r\n    defaultScreenFactorFunc,\r\n    hasWindow\r\n} from \"../core/utils/window\";\r\nvar window = getWindow();\r\nimport {\r\n    each,\r\n    map\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport Box from \"./box\";\r\nimport CollectionWidget from \"./collection/ui.collection_widget.edit\";\r\nvar RESPONSIVE_BOX_CLASS = \"dx-responsivebox\";\r\nvar SCREEN_SIZE_CLASS_PREFIX = RESPONSIVE_BOX_CLASS + \"-screen-\";\r\nvar BOX_ITEM_CLASS = \"dx-box-item\";\r\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\r\nvar HD_SCREEN_WIDTH = 1920;\r\nvar ResponsiveBox = CollectionWidget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            rows: [],\r\n            cols: [],\r\n            screenByWidth: null,\r\n            singleColumnScreen: \"\",\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n            activeStateEnabled: false,\r\n            focusStateEnabled: false,\r\n            onItemStateChanged: void 0,\r\n            onLayoutChanged: null,\r\n            currentScreenFactor: void 0,\r\n            _layoutStrategy: void 0\r\n        })\r\n    },\r\n    _init: function() {\r\n        if (!this.option(\"screenByWidth\")) {\r\n            this._options.silent(\"screenByWidth\", defaultScreenFactorFunc)\r\n        }\r\n        this.callBase();\r\n        this._initLayoutChangedAction()\r\n    },\r\n    _initLayoutChangedAction: function() {\r\n        this._layoutChangedAction = this._createActionByOption(\"onLayoutChanged\", {\r\n            excludeValidators: [\"disabled\", \"readonly\"]\r\n        })\r\n    },\r\n    _itemClass: function() {\r\n        return BOX_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return BOX_ITEM_DATA_KEY\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.$element().addClass(RESPONSIVE_BOX_CLASS);\r\n        this._updateRootBox()\r\n    },\r\n    _updateRootBox: function() {\r\n        clearTimeout(this._updateTimer);\r\n        this._updateTimer = setTimeout(function() {\r\n            if (this._$root) {\r\n                eventsEngine.triggerHandler(this._$root, \"dxupdate\")\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _renderItems: function() {\r\n        this._setScreenSize();\r\n        this._screenItems = this._itemsByScreen();\r\n        this._prepareGrid();\r\n        this._spreadItems();\r\n        this._layoutItems();\r\n        this._linkNodeToItem()\r\n    },\r\n    _itemOptionChanged: function(item) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        this._refreshItem($item, item);\r\n        this._clearItemNodeTemplates();\r\n        this._update(true)\r\n    },\r\n    _setScreenSize: function() {\r\n        var currentScreen = this._getCurrentScreen();\r\n        this._removeScreenSizeClass();\r\n        this.$element().addClass(SCREEN_SIZE_CLASS_PREFIX + currentScreen);\r\n        this.option(\"currentScreenFactor\", currentScreen)\r\n    },\r\n    _removeScreenSizeClass: function() {\r\n        var currentScreenFactor = this.option(\"currentScreenFactor\");\r\n        currentScreenFactor && this.$element().removeClass(SCREEN_SIZE_CLASS_PREFIX + currentScreenFactor)\r\n    },\r\n    _prepareGrid: function() {\r\n        var grid = this._grid = [];\r\n        this._prepareRowsAndCols();\r\n        each(this._rows, function() {\r\n            var row = [];\r\n            grid.push(row);\r\n            each(this._cols, function() {\r\n                row.push(this._createEmptyCell())\r\n            }.bind(this))\r\n        }.bind(this))\r\n    },\r\n    getSingleColumnRows: function() {\r\n        var rows = this.option(\"rows\");\r\n        var screenItemsLength = this._screenItems.length;\r\n        if (rows.length) {\r\n            var filteredRows = this._filterByScreen(rows);\r\n            var result = [];\r\n            for (var i = 0; i < screenItemsLength; i++) {\r\n                var sizeConfig = this._defaultSizeConfig();\r\n                if (i < filteredRows.length && isDefined(filteredRows[i].shrink)) {\r\n                    sizeConfig.shrink = filteredRows[i].shrink\r\n                }\r\n                result.push(sizeConfig)\r\n            }\r\n            return result\r\n        } else {\r\n            return this._defaultSizeConfig(screenItemsLength)\r\n        }\r\n    },\r\n    _prepareRowsAndCols: function() {\r\n        if (this._isSingleColumnScreen()) {\r\n            this._prepareSingleColumnScreenItems();\r\n            this._rows = this.getSingleColumnRows();\r\n            this._cols = this._defaultSizeConfig(1)\r\n        } else {\r\n            this._rows = this._sizesByScreen(this.option(\"rows\"));\r\n            this._cols = this._sizesByScreen(this.option(\"cols\"))\r\n        }\r\n    },\r\n    _isSingleColumnScreen: function() {\r\n        return this._screenRegExp().test(this.option(\"singleColumnScreen\")) || !this.option(\"rows\").length || !this.option(\"cols\").length\r\n    },\r\n    _prepareSingleColumnScreenItems: function() {\r\n        this._screenItems.sort((function(item1, item2) {\r\n            return item1.location.row - item2.location.row || item1.location.col - item2.location.col\r\n        }));\r\n        each(this._screenItems, (function(index, item) {\r\n            extend(item.location, {\r\n                row: index,\r\n                col: 0,\r\n                rowspan: 1,\r\n                colspan: 1\r\n            })\r\n        }))\r\n    },\r\n    _sizesByScreen: function(sizeConfigs) {\r\n        return map(this._filterByScreen(sizeConfigs), function(sizeConfig) {\r\n            return extend(this._defaultSizeConfig(), sizeConfig)\r\n        }.bind(this))\r\n    },\r\n    _createDefaultSizeConfig: function() {\r\n        return {\r\n            ratio: 1,\r\n            baseSize: 0,\r\n            minSize: 0,\r\n            maxSize: 0\r\n        }\r\n    },\r\n    _defaultSizeConfig: function(size) {\r\n        var defaultSizeConfig = this._createDefaultSizeConfig();\r\n        if (!arguments.length) {\r\n            return defaultSizeConfig\r\n        }\r\n        var result = [];\r\n        for (var i = 0; i < size; i++) {\r\n            result.push(defaultSizeConfig)\r\n        }\r\n        return result\r\n    },\r\n    _filterByScreen: function(items) {\r\n        var screenRegExp = this._screenRegExp();\r\n        return grep(items, (function(item) {\r\n            return !item.screen || screenRegExp.test(item.screen)\r\n        }))\r\n    },\r\n    _screenRegExp: function() {\r\n        var screen = this._getCurrentScreen();\r\n        return new RegExp(\"(^|\\\\s)\" + screen + \"($|\\\\s)\", \"i\")\r\n    },\r\n    _getCurrentScreen: function() {\r\n        var width = this._screenWidth();\r\n        return this.option(\"screenByWidth\")(width)\r\n    },\r\n    _screenWidth: function() {\r\n        return hasWindow() ? getWidth(window) : HD_SCREEN_WIDTH\r\n    },\r\n    _createEmptyCell: function() {\r\n        return {\r\n            item: {},\r\n            location: {\r\n                colspan: 1,\r\n                rowspan: 1\r\n            }\r\n        }\r\n    },\r\n    _spreadItems: function() {\r\n        each(this._screenItems, function(_, itemInfo) {\r\n            var location = itemInfo.location || {};\r\n            var itemCol = location.col;\r\n            var itemRow = location.row;\r\n            var row = this._grid[itemRow];\r\n            var itemCell = row && row[itemCol];\r\n            this._occupyCells(itemCell, itemInfo)\r\n        }.bind(this))\r\n    },\r\n    _itemsByScreen: function() {\r\n        return this.option(\"items\").reduce((result, item) => {\r\n            var locations = item.location || {};\r\n            locations = isPlainObject(locations) ? [locations] : locations;\r\n            this._filterByScreen(locations).forEach(location => {\r\n                result.push({\r\n                    item: item,\r\n                    location: extend({\r\n                        rowspan: 1,\r\n                        colspan: 1\r\n                    }, location)\r\n                })\r\n            });\r\n            return result\r\n        }, [])\r\n    },\r\n    _occupyCells: function(itemCell, itemInfo) {\r\n        if (!itemCell || this._isItemCellOccupied(itemCell, itemInfo)) {\r\n            return\r\n        }\r\n        extend(itemCell, itemInfo);\r\n        this._markSpanningCell(itemCell)\r\n    },\r\n    _isItemCellOccupied: function(itemCell, itemInfo) {\r\n        if (!isEmptyObject(itemCell.item)) {\r\n            return true\r\n        }\r\n        var result = false;\r\n        this._loopOverSpanning(itemInfo.location, (function(cell) {\r\n            result = result || !isEmptyObject(cell.item)\r\n        }));\r\n        return result\r\n    },\r\n    _loopOverSpanning: function(location, callback) {\r\n        var rowEnd = location.row + location.rowspan - 1;\r\n        var colEnd = location.col + location.colspan - 1;\r\n        var boundRowEnd = Math.min(rowEnd, this._rows.length - 1);\r\n        var boundColEnd = Math.min(colEnd, this._cols.length - 1);\r\n        location.rowspan -= rowEnd - boundRowEnd;\r\n        location.colspan -= colEnd - boundColEnd;\r\n        for (var rowIndex = location.row; rowIndex <= boundRowEnd; rowIndex++) {\r\n            for (var colIndex = location.col; colIndex <= boundColEnd; colIndex++) {\r\n                if (rowIndex !== location.row || colIndex !== location.col) {\r\n                    callback(this._grid[rowIndex][colIndex])\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _markSpanningCell: function(itemCell) {\r\n        this._loopOverSpanning(itemCell.location, (function(cell) {\r\n            extend(cell, {\r\n                item: itemCell.item,\r\n                spanningCell: itemCell\r\n            })\r\n        }))\r\n    },\r\n    _linkNodeToItem: function() {\r\n        each(this._itemElements(), (function(_, itemNode) {\r\n            var $item = $(itemNode);\r\n            var item = $item.data(BOX_ITEM_DATA_KEY);\r\n            if (!item.box) {\r\n                item.node = $item.children()\r\n            }\r\n        }))\r\n    },\r\n    _layoutItems: function() {\r\n        var rowsCount = this._grid.length;\r\n        var colsCount = rowsCount && this._grid[0].length;\r\n        if (!rowsCount && !colsCount) {\r\n            return\r\n        }\r\n        var result = this._layoutBlock({\r\n            direction: \"col\",\r\n            row: {\r\n                start: 0,\r\n                end: rowsCount - 1\r\n            },\r\n            col: {\r\n                start: 0,\r\n                end: colsCount - 1\r\n            }\r\n        });\r\n        var rootBox = this._prepareBoxConfig(result.box || {\r\n            direction: \"row\",\r\n            items: [extend(result, {\r\n                ratio: 1\r\n            })]\r\n        });\r\n        extend(rootBox, this._rootBoxConfig(rootBox.items));\r\n        this._$root = $(\"<div>\").appendTo(this._itemContainer());\r\n        this._createComponent(this._$root, Box, rootBox)\r\n    },\r\n    _rootBoxConfig: function(items) {\r\n        var rootItems = each(items, function(index, item) {\r\n            this._needApplyAutoBaseSize(item) && extend(item, {\r\n                baseSize: \"auto\"\r\n            })\r\n        }.bind(this));\r\n        return extend({\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            items: rootItems,\r\n            itemTemplate: this._getTemplateByOption(\"itemTemplate\"),\r\n            itemHoldTimeout: this.option(\"itemHoldTimeout\"),\r\n            onItemHold: this._createActionByOption(\"onItemHold\"),\r\n            onItemClick: this._createActionByOption(\"onItemClick\"),\r\n            onItemContextMenu: this._createActionByOption(\"onItemContextMenu\"),\r\n            onItemRendered: this._createActionByOption(\"onItemRendered\")\r\n        }, {\r\n            _layoutStrategy: this.option(\"_layoutStrategy\")\r\n        })\r\n    },\r\n    _needApplyAutoBaseSize: function(item) {\r\n        return !item.baseSize && (!item.minSize || \"auto\" === item.minSize) && (!item.maxSize || \"auto\" === item.maxSize)\r\n    },\r\n    _prepareBoxConfig: function(config) {\r\n        return extend(config || {}, {\r\n            crossAlign: \"stretch\",\r\n            onItemStateChanged: this.option(\"onItemStateChanged\")\r\n        })\r\n    },\r\n    _layoutBlock: function(options) {\r\n        if (this._isSingleItem(options)) {\r\n            return this._itemByCell(options.row.start, options.col.start)\r\n        }\r\n        return this._layoutDirection(options)\r\n    },\r\n    _isSingleItem: function(options) {\r\n        var firstCellLocation = this._grid[options.row.start][options.col.start].location;\r\n        var isItemRowSpanned = options.row.end - options.row.start === firstCellLocation.rowspan - 1;\r\n        var isItemColSpanned = options.col.end - options.col.start === firstCellLocation.colspan - 1;\r\n        return isItemRowSpanned && isItemColSpanned\r\n    },\r\n    _itemByCell: function(rowIndex, colIndex) {\r\n        var itemCell = this._grid[rowIndex][colIndex];\r\n        return itemCell.spanningCell ? null : itemCell.item\r\n    },\r\n    _layoutDirection: function(options) {\r\n        var items = [];\r\n        var direction = options.direction;\r\n        var crossDirection = this._crossDirection(direction);\r\n        var block;\r\n        while (block = this._nextBlock(options)) {\r\n            if (this._isBlockIndivisible(options.prevBlockOptions, block)) {\r\n                throw errors.Error(\"E1025\")\r\n            }\r\n            var item = this._layoutBlock({\r\n                direction: crossDirection,\r\n                row: block.row,\r\n                col: block.col,\r\n                prevBlockOptions: options\r\n            });\r\n            if (item) {\r\n                extend(item, this._blockSize(block, crossDirection));\r\n                items.push(item)\r\n            }\r\n            options[crossDirection].start = block[crossDirection].end + 1\r\n        }\r\n        return {\r\n            box: this._prepareBoxConfig({\r\n                direction: direction,\r\n                items: items\r\n            })\r\n        }\r\n    },\r\n    _isBlockIndivisible: function(options, block) {\r\n        return options && options.col.start === block.col.start && options.col.end === block.col.end && options.row.start === block.row.start && options.row.end === block.row.end\r\n    },\r\n    _crossDirection: function(direction) {\r\n        return \"col\" === direction ? \"row\" : \"col\"\r\n    },\r\n    _nextBlock: function(options) {\r\n        var direction = options.direction;\r\n        var crossDirection = this._crossDirection(direction);\r\n        var startIndex = options[direction].start;\r\n        var endIndex = options[direction].end;\r\n        var crossStartIndex = options[crossDirection].start;\r\n        if (crossStartIndex > options[crossDirection].end) {\r\n            return null\r\n        }\r\n        var crossSpan = 1;\r\n        for (var crossIndex = crossStartIndex; crossIndex < crossStartIndex + crossSpan; crossIndex++) {\r\n            var lineCrossSpan = 1;\r\n            for (var index = startIndex; index <= endIndex; index++) {\r\n                var cell = this._cellByDirection(direction, index, crossIndex);\r\n                lineCrossSpan = Math.max(lineCrossSpan, cell.location[crossDirection + \"span\"])\r\n            }\r\n            var lineCrossEndIndex = crossIndex + lineCrossSpan;\r\n            var crossEndIndex = crossStartIndex + crossSpan;\r\n            if (lineCrossEndIndex > crossEndIndex) {\r\n                crossSpan += lineCrossEndIndex - crossEndIndex\r\n            }\r\n        }\r\n        var result = {};\r\n        result[direction] = {\r\n            start: startIndex,\r\n            end: endIndex\r\n        };\r\n        result[crossDirection] = {\r\n            start: crossStartIndex,\r\n            end: crossStartIndex + crossSpan - 1\r\n        };\r\n        return result\r\n    },\r\n    _cellByDirection: function(direction, index, crossIndex) {\r\n        return \"col\" === direction ? this._grid[crossIndex][index] : this._grid[index][crossIndex]\r\n    },\r\n    _blockSize: function(block, direction) {\r\n        var defaultMinSize = \"row\" === direction ? \"auto\" : 0;\r\n        var sizeConfigs = \"row\" === direction ? this._rows : this._cols;\r\n        var result = extend(this._createDefaultSizeConfig(), {\r\n            ratio: 0\r\n        });\r\n        for (var index = block[direction].start; index <= block[direction].end; index++) {\r\n            var sizeConfig = sizeConfigs[index];\r\n            result.ratio += sizeConfig.ratio;\r\n            result.baseSize += sizeConfig.baseSize;\r\n            result.minSize += sizeConfig.minSize;\r\n            result.maxSize += sizeConfig.maxSize;\r\n            if (isDefined(sizeConfig.shrink)) {\r\n                result.shrink = sizeConfig.shrink\r\n            }\r\n        }\r\n        result.minSize = result.minSize ? result.minSize : defaultMinSize;\r\n        result.maxSize = result.maxSize ? result.maxSize : \"auto\";\r\n        this._isSingleColumnScreen() && (result.baseSize = \"auto\");\r\n        return result\r\n    },\r\n    _update: function(forceRemoveRoot) {\r\n        var $existingRoot = this._$root;\r\n        this._renderItems();\r\n        if ($existingRoot) {\r\n            if (forceRemoveRoot) {\r\n                $existingRoot.remove()\r\n            } else {\r\n                $existingRoot.detach();\r\n                this._saveAssistantRoot($existingRoot)\r\n            }\r\n        }\r\n        this._layoutChangedAction();\r\n        this._updateRootBox()\r\n    },\r\n    _saveAssistantRoot: function($root) {\r\n        this._assistantRoots = this._assistantRoots || [];\r\n        this._assistantRoots.push($root)\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._updateTimer);\r\n        this._clearItemNodeTemplates();\r\n        this._cleanUnusedRoots();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _cleanUnusedRoots: function() {\r\n        if (!this._assistantRoots) {\r\n            return\r\n        }\r\n        each(this._assistantRoots, (function(_, item) {\r\n            $(item).remove()\r\n        }))\r\n    },\r\n    _clearItemNodeTemplates: function() {\r\n        each(this.option(\"items\"), (function() {\r\n            delete this.node\r\n        }))\r\n    },\r\n    _toggleVisibility: function(visible) {\r\n        this.callBase(visible);\r\n        if (visible) {\r\n            this._updateRootBox()\r\n        }\r\n    },\r\n    _attachClickEvent: noop,\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"rows\":\r\n            case \"cols\":\r\n            case \"screenByWidth\":\r\n            case \"_layoutStrategy\":\r\n            case \"singleColumnScreen\":\r\n                this._clearItemNodeTemplates();\r\n                this._invalidate();\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._update();\r\n                break;\r\n            case \"onLayoutChanged\":\r\n                this._initLayoutChangedAction();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._clearItemNodeTemplates();\r\n                this.callBase(args);\r\n                break;\r\n            case \"currentScreenFactor\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        if (this._getCurrentScreen() !== this.option(\"currentScreenFactor\")) {\r\n            this._update()\r\n        }\r\n    },\r\n    repaint: function() {\r\n        this._update()\r\n    }\r\n});\r\nregisterComponent(\"dxResponsiveBox\", ResponsiveBox);\r\nexport default ResponsiveBox;\r\n"]},"metadata":{},"sourceType":"module"}